/Applications/Cursor.app/Contents/Resources/app/out/vs/workbench/workbench.desktop.main.js:`,Qc,s.notebookUri)})),this.b.add(t.onWillRemoveInteractiveDocument(s=>{this.a.$willRemoveInteractiveDocument(s.inputUri,s.notebookUri)}))}dispose(){this.b.dispose()}};CHs=__decorate([ga(vo.MainThreadInteractive),__param(1,Kii)],CHs),K(),Ie(),Ns(),Vt(),it(),W(),oi(),K(),Vt(),Ct(),Sr(),ke(),K(),Vt(),Sr(),ke(),de();var D5r={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(10432,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(10433,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(10434,null),default:""}}},ari;(function(i){function e(t,s,n){if(!t)return;const r=yi(t.type)?t.type:void 0;if(!r||r.length===0){n.error(d(10435,null));return}const o=[];if(Array.isArray(t.required))for(const a of t.required)yi(a)&&o.push(a);return{extensionId:s.value,taskType:r,required:o,properties:t.properties?Ln(t.properties):{},when:t.when?T.deserialize(t.when):void 0}}i.from=e})(ari||(ari={}));var T5r=dc.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(i,e)=>{for(const t of i)t.type&&e.push(`onTaskType:${t.type}`)},jsonSchema:{description:d(10436,null),type:"array",items:D5r}}),L5r=class{constructor(){this.d=new $,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((i,e)=>{T5r.setHandler((t,s)=>{this.c=void 0;try{for(const n of s.removed){const r=n.value;for(const o of r)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const n of s.added){const r=n.value;for(const o of r){const a=ari.from(o,n.description.identifier,n.collector);a&&(this.a[a.taskType]=a)}}(s.removed.length>0||s.added.length>0)&&this.d.fire()}catch{}i(void 0)})})}onReady(){return this.b}get(i){return this.a[i]}all(){return Object.keys(this.a).map(i=>this.a[i])}getJsonSchema(){if(this.c===void 0){const i=[];for(const e of this.all()){const t={type:"object",additionalProperties:!1};e.required.length>0&&(t.required=e.required.slice(0)),e.properties!==void 0?t.properties=Ln(e.properties):t.properties=Object.create(null),t.properties.type={type:"string",enum:[e.taskType]},i.push(t)}this.c={oneOf:i}}return this.c}},IA=new L5r,P4="settings",tbt=new he("taskRunning",!1,d(10437,null)),bk=B(10439,"Tasks"),N4;(function(i){i[i.Escape=1]="Escape",i[i.Strong=2]="Strong",i[i.Weak=3]="Weak"})(N4||(N4={}));var P7="$customized";(function(i){function e(t){if(!t)return i.Strong;switch(t.toLowerCase()){case"escape":return i.Escape;case"strong":return i.Strong;case"weak":return i.Weak;default:return i.Strong}}i.from=e})(N4||(N4={}));var w0e;(function(i){i.defaults={cwd:"${workspaceFolder}"}})(w0e||(w0e={}));var sT;(function(i){i[i.Always=1]="Always",i[i.Silent=2]="Silent",i[i.Never=3]="Never"})(sT||(sT={})),function(i){function e(t){switch(t.toLowerCase()){case"always":return i.Always;case"silent":return i.Silent;case"never":return i.Never;default:return i.Always}}i.fromString=e}(sT||(sT={}));var dF;(function(i){i[i.Never=1]="Never",i[i.OnProblem=2]="OnProblem",i[i.Always=3]="Always"})(dF||(dF={})),function(i){function e(t){switch(t.toLowerCase()){case"always":return i.Always;case"never":return i.Never;case"onproblem":return i.OnProblem;default:return i.OnProblem}}i.fromString=e}(dF||(dF={}));var eI;(function(i){i[i.Shared=1]="Shared",i[i.Dedicated=2]="Dedicated",i[i.New=3]="New"})(eI||(eI={})),function(i){function e(t){switch(t.toLowerCase()){case"shared":return i.Shared;case"dedicated":return i.Dedicated;case"new":return i.New;default:return i.Shared}}i.fromString=e}(eI||(eI={}));var ibt;(function(i){i.defaults={echo:!0,reveal:sT.Always,revealProblems:dF.Never,focus:!1,panel:eI.Shared,showReuseMessage:!0,clear:!1}})(ibt||(ibt={}));var wg;(function(i){i[i.Shell=1]="Shell",i[i.Process=2]="Process",i[i.CustomExecution=3]="CustomExecution"})(wg||(wg={})),function(i){function e(s){switch(s.toLowerCase()){case"shell":return i.Shell;case"process":return i.Process;case"customExecution":return i.CustomExecution;default:return i.Process}}i.fromString=e;function t(s){switch(s){case i.Shell:return"shell";case i.Process:return"process";case i.CustomExecution:return"customExecution";default:return"process"}}i.toString=t}(wg||(wg={}));var N7;(function(i){function e(t){return yi(t)?t:t.value}i.value=e})(N7||(N7={}));var Cg;(function(i){i.Clean={_id:"clean",isDefault:!1},i.Build={_id:"build",isDefault:!1},i.Rebuild={_id:"rebuild",isDefault:!1},i.Test={_id:"test",isDefault:!1};function e(s){return s===i.Clean._id||s===i.Build._id||s===i.Rebuild._id||s===i.Test._id}i.is=e;function t(s){if(s!==void 0)return yi(s)?e(s)?{_id:s,isDefault:!1}:void 0:s}i.from=t})(Cg||(Cg={}));var SHs;(function(i){i[i.Global=1]="Global",i[i.Workspace=2]="Workspace",i[i.Folder=3]="Folder"})(SHs||(SHs={}));var xc;(function(i){i.Workspace="workspace",i.Extension="extension",i.InMemory="inMemory",i.WorkspaceFile="workspaceFile",i.User="user";function e(t){switch(t){case i.User:return 2;case i.WorkspaceFile:return 5;default:return 6}}i.toConfigurationTarget=e})(xc||(xc={}));var xHs;(function(i){i.parallel="parallel",i.sequence="sequence"})(xHs||(xHs={}));var R4;(function(i){i[i.default=1]="default",i[i.folderOpen=2]="folderOpen"})(R4||(R4={}));var sbt;(function(i){i.defaults={reevaluateOnRerun:!0,runOn:R4.default,instanceLimit:1}})(sbt||(sbt={}));var nbt=class{constructor(i,e,t,s,n,r){this._label="",this._id=i,e&&(this._label=e),t&&(this.type=t),this.runOptions=s,this.configurationProperties=n,this._source=r}getDefinition(i){}getMapKey(){return this._id}getKey(){}getCommonTaskId(){const i={folder:this.d(),id:this._id};return JSON.stringify(i)}clone(){return this.f(Object.assign({},this))}getWorkspaceFolder(){}getWorkspaceFileName(){}getTelemetryKind(){return"unknown"}matches(i,e=!1){if(i===void 0)return!1;if(yi(i))return i===this._label||i===this.configurationProperties.identifier||e&&i===this._id;const t=this.getDefinition(!0);return t!==void 0&&t._key===i._key}getQualifiedLabel(){const i=this.getWorkspaceFolder();return i?`${this._label} (${i.name})`:this._label}getTaskExecution(){return{id:this._id,task:this}}addTaskLoadMessages(i){this.c===void 0&&(this.c=[]),i&&(this.c=this.c.concat(i))}get taskLoadMessages(){return this.c}},kf=class eLt extends nbt{constructor(e,t,s,n,r,o,a,l){super(e,s,void 0,a,l,t),this.command={},this._source=t,this.hasDefinedMatchers=o,r&&(this.command=r)}clone(){return new eLt(this._id,this._source,this._label,this.type,this.command,this.hasDefinedMatchers,this.runOptions,this.configurationProperties)}customizes(){if(this._source&&this._source.customizes)return this._source.customizes}getDefinition(e=!1){if(e&&this._source.customizes!==void 0)return this._source.customizes;{let t;switch(this.command?this.command.runtime:void 0){case wg.Shell:t="shell";break;case wg.Process:t="process";break;case wg.CustomExecution:t="customExecution";break;case void 0:t="$composite";break;default:throw new Error("Unexpected task runtime")}return{type:t,_key:this._id,id:this._id}}}static is(e){return e instanceof eLt}getMapKey(){const e=this._source.config.workspaceFolder;return e?`${e.uri.toString()}|${this._id}|${this.instance}`:`${this._id}|${this.instance}`}d(){return this._source.kind===xc.User?P4:this._source.config.workspaceFolder?.uri.toString()}getCommonTaskId(){return this._source.customizes?super.getCommonTaskId():this.getKey()??super.getCommonTaskId()}getKey(){const e=this.d();if(!e)return;let t=this.configurationProperties.identifier;return this._source.kind!==xc.Workspace&&(t+=this._source.kind),JSON.stringify({type:P7,folder:e,id:t})}getWorkspaceFolder(){return this._source.config.workspaceFolder}getWorkspaceFileName(){return this._source.config.workspace&&this._source.config.workspace.configuration?Ui(this._source.config.workspace.configuration):void 0}getTelemetryKind(){return this._source.customizes?"workspace>extension":"workspace"}f(e){return new eLt(e._id,e._source,e._label,e.type,e.command,e.hasDefinedMatchers,e.runOptions,e.configurationProperties)}},eC=class A0n extends nbt{constructor(e,t,s,n,r,o,a){super(e,s,n,o,a,t),this._source=t,this.configures=r}static is(e){return e instanceof A0n}f(e){return e}getDefinition(){return this.configures}getWorkspaceFileName(){return this._source.config.workspace&&this._source.config.workspace.configuration?Ui(this._source.config.workspace.configuration):void 0}getWorkspaceFolder(){return this._source.config.workspaceFolder}d(){return this._source.kind===xc.User?P4:this._source.config.workspaceFolder?.uri.toString()}getKey(){const e=this.d();if(!e)return;let t=this.configurationProperties.identifier;return this._source.kind!==xc.Workspace&&(t+=this._source.kind),JSON.stringify({type:P7,folder:e,id:t})}},Vy=class tLt extends nbt{constructor(e,t,s,n,r,o,a,l,c){super(e,s,n,l,c,t),this.defines=r,this.hasDefinedMatchers=a,this.command=o,this.icon=c.icon,this.hide=c.hide}clone(){return new tLt(this._id,this._source,this._label,this.type,this.defines,this.command,this.hasDefinedMatchers,this.runOptions,this.configurationProperties)}getDefinition(){return this.defines}static is(e){return e instanceof tLt}getMapKey(){const e=this._source.workspaceFolder;return e?`${this._source.scope.toString()}|${e.uri.toString()}|${this._id}|${this.instance}`:`${this._source.scope.toString()}|${this._id}|${this.instance}`}d(){if(this._source.scope===3&&this._source.workspaceFolder)return this._source.workspaceFolder.uri.toString()}getKey(){const e={type:"contributed",scope:this._source.scope,id:this._id};return e.folder=this.d(),JSON.stringify(e)}getWorkspaceFolder(){return this._source.workspaceFolder}getTelemetryKind(){return"extension"}f(e){return new tLt(e._id,e._source,e._label,e.type,e.defines,e.command,e.hasDefinedMatchers,e.runOptions,e.configurationProperties)}},NP=class iLt extends nbt{constructor(e,t,s,n,r,o){super(e,s,n,r,o,t),this._source=t}clone(){return new iLt(this._id,this._source,this._label,this.type,this.runOptions,this.configurationProperties)}static is(e){return e instanceof iLt}getTelemetryKind(){return"composite"}getMapKey(){return`${this._id}|${this.instance}`}d(){}f(e){return new iLt(e._id,e._source,e._label,e.type,e.runOptions,e.configurationProperties)}},Vb;(function(i){i[i.Process=1]="Process",i[i.Terminal=2]="Terminal"})(Vb||(Vb={})),function(i){i._default=i.Terminal}(Vb||(Vb={}));var kHs;(function(i){i[i.V0_1_0=1]="V0_1_0",i[i.V2_0_0=2]="V2_0_0"})(kHs||(kHs={}));var P5r=class{constructor(i){this.c=new Map;for(let e=0;e<i.length;e++)this.c.set(i[e].uri.toString(),e)}compare(i,e){const t=i.getWorkspaceFolder(),s=e.getWorkspaceFolder();if(t&&s){let n=this.c.get(t.uri.toString());n=n===void 0?0:n+1;let r=this.c.get(s.uri.toString());return r=r===void 0?0:r+1,n===r?i._label.localeCompare(e._label):n-r}else return!t&&s?-1:t&&!s?1:0}},EHs;(function(i){i.DependsOnStarted="dependsOnStarted",i.AcquiredInput="acquiredInput",i.Start="start",i.ProcessStarted="processStarted",i.Active="active",i.Inactive="inactive",i.Changed="changed",i.Terminated="terminated",i.ProcessEnded="processEnded",i.End="end"})(EHs||(EHs={}));var IHs;(function(i){i.SingleRun="singleRun",i.Background="background"})(IHs||(IHs={}));var DHs;(function(i){i[i.System=0]="System",i[i.User=1]="User",i[i.FolderOpen=2]="FolderOpen",i[i.ConfigurationChange=3]="ConfigurationChange",i[i.Reconnect=4]="Reconnect"})(DHs||(DHs={}));var Sg;(function(i){function e(l){return{taskId:l._id,taskName:l.configurationProperties.name,runType:l.configurationProperties.isBackground?"background":"singleRun",group:l.configurationProperties.group,__task:l}}function t(l,c,u){return{...e(l),kind:"start",terminalId:c,resolvedVariables:u}}i.start=t;function s(l,c,u){return{...e(l),kind:"processStarted",terminalId:c,processId:u}}i.processStarted=s;function n(l,c,u){return{...e(l),kind:"processEnded",terminalId:c,exitCode:u}}i.processEnded=n;function r(l,c,u){return{...e(l),kind:"terminated",exitReason:u,terminalId:c}}i.terminated=r;function o(l,c,u){return{...e(c),kind:l,terminalId:u}}i.general=o;function a(){return{kind:"changed"}}i.changed=a})(Sg||(Sg={}));var C0e;(function(i){function e(s){const n=Object.keys(s).sort();let r="";for(const o of n){let a=s[o];a instanceof Object?a=e(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),r+=o+","+a+","}return r}function t(s){const r={_key:e(s),type:s.taskType};return Object.assign(r,s),r}i.create=t})(C0e||(C0e={}));var THs;(function(i){i.AutoDetect="task.autoDetect",i.SaveBeforeRun="task.saveBeforeRun",i.ShowDecorations="task.showDecorations",i.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",i.SlowProviderWarning="task.slowProviderWarning",i.QuickOpenHistory="task.quickOpen.history",i.QuickOpenDetail="task.quickOpen.detail",i.QuickOpenSkip="task.quickOpen.skip",i.QuickOpenShowAll="task.quickOpen.showAll",i.AllowAutomaticTasks="task.allowAutomaticTasks",i.Reconnection="task.reconnection",i.VerboseLogging="task.verboseLogging"})(THs||(THs={}));var LHs;(function(i){i.Tasks="tasks",i.SuppressTaskName="tasks.suppressTaskName",i.Windows="tasks.windows",i.Osx="tasks.osx",i.Linux="tasks.linux",i.ShowOutput="tasks.showOutput",i.IsShellCommand="tasks.isShellCommand",i.ServiceTestSetting="tasks.service.testSetting"})(LHs||(LHs={}));var A4;(function(i){function e(t,s){const n=IA.get(t.type);if(n===void 0){const l=Ln(t);return delete l._key,C0e.create(l)}const r=Object.create(null);r.type=n.taskType;const o=new Set;n.required.forEach(l=>o.add(l));const a=n.properties;for(const l of Object.keys(a)){const c=t[l];if(c!=null)r[l]=c;else if(o.has(l)){const u=a[l];if(u.default!==void 0)r[l]=Ln(u.default);else switch(u.type){case"boolean":r[l]=!1;break;case"number":case"integer":r[l]=0;break;case"string":r[l]="";break;default:s.error(d(10438,null,JSON.stringify(t,void 0,0),l));return}}}return C0e.create(r)}i.createTaskIdentifier=e})(A4||(A4={})),K(),ee(),ke();var PHs=new he("customExecutionSupported",!1,d(10440,null)),S0e=new he("shellExecutionSupported",!1,d(10441,null)),NHs=new he("taskCommandsRegistered",!1,d(10442,null)),rbt=new he("processExecutionSupported",!1,d(10443,null)),RHs=new he("serverlessWebContext",!1,d(10444,null)),_p=T.or(T.and(S0e,rbt),PHs),M4=Be("taskService");Ft();var obt;(function(i){function e(t){return{id:t.id,task:tI.from(t.task)}}i.from=e})(obt||(obt={}));var lri;(function(i){function e(t,s){return{id:t.id,processId:s}}i.from=e})(lri||(lri={}));var cri;(function(i){function e(t,s){return{id:t.id,exitCode:s}}i.from=e})(cri||(cri={}));var abt;(function(i){function e(s){const n=Object.assign(Object.create(null),s);return delete n._key,n}i.from=e;function t(s,n){let r=A4.createTaskIdentifier(s,console);return r===void 0&&n&&(r={_key:Wt(),type:"$executeOnly"}),r}i.to=t})(abt||(abt={}));var lbt;(function(i){function e(s){if(s!=null)return Object.assign(Object.create(null),s)}i.from=e;function t(s){return s==null?ibt.defaults:Object.assign(Object.create(null),ibt.defaults,s)}i.to=t})(lbt||(lbt={}));var cbt;(function(i){function e(s){if(s!=null)return Object.assign(Object.create(null),s)}i.from=e;function t(s){return s==null?sbt.defaults:Object.assign(Object.create(null),sbt.defaults,s)}i.to=t})(cbt||(cbt={}));var ubt;(function(i){function e(s){if(s!=null)return{cwd:s.cwd,env:s.env}}i.from=e;function t(s){return s==null?w0e.defaults:{cwd:s.cwd||w0e.defaults.cwd,env:s.env}}i.to=t})(ubt||(ubt={}));var x0e;(function(i){function e(n){const r=n;return r&&!!r.process}i.is=e;function t(n){const r=yi(n.name)?n.name:n.name.value,o=n.args?n.args.map(l=>yi(l)?l:l.value):[],a={process:r,args:o};return n.options&&(a.options=ubt.from(n.options)),a}i.from=t;function s(n){const r={runtime:wg.Process,name:n.process,args:n.args,presentation:void 0};return r.options=ubt.to(n.options),r}i.to=s})(x0e||(x0e={}));var hbt;(function(i){function e(s){if(s==null)return;const n={cwd:s.cwd||w0e.defaults.cwd,env:s.env};return s.shell&&(n.executable=s.shell.executable,n.shellArgs=s.shell.args,n.shellQuoting=s.shell.quoting),n}i.from=e;function t(s){if(s==null)return;const n={cwd:s.cwd,env:s.env};return s.executable&&(n.shell={executable:s.executable},s.shellArgs&&(n.shell.args=s.shellArgs),s.shellQuoting&&(n.shell.quoting=s.shellQuoting)),n}i.to=t})(hbt||(hbt={}));var k0e;(function(i){function e(n){const r=n;return r&&(!!r.commandLine||!!r.command)}i.is=e;function t(n){const r={};return n.name&&yi(n.name)&&(n.args===void 0||n.args===null||n.args.length===0)?r.commandLine=n.name:(r.command=n.name,r.args=n.args),n.options&&(r.options=hbt.from(n.options)),r}i.from=t;function s(n){const r={runtime:wg.Shell,name:n.commandLine?n.commandLine:n.command,args:n.args,presentation:void 0};return n.options&&(r.options=hbt.to(n.options)),r}i.to=s})(k0e||(k0e={}));var AJ;(function(i){function e(n){const r=n;return r&&r.customExecution==="customExecution"}i.is=e;function t(n){return{customExecution:"customExecution"}}i.from=t;function s(n){return{runtime:wg.CustomExecution,presentation:void 0}}i.to=s})(AJ||(AJ={}));var dbt;(function(i){function e(s){const n={label:s.label};return s.kind===xc.Extension?(n.extensionId=s.extension,s.workspaceFolder?n.scope=s.workspaceFolder.uri:n.scope=s.scope):s.kind===xc.Workspace&&(n.extensionId="$core",n.scope=s.config.workspaceFolder?s.config.workspaceFolder.uri:1),n}i.from=e;function t(s,n){let r,o;return s.scope===void 0||typeof s.scope=="number"&&s.scope!==1?n.getWorkspace().folders.length===0?(r=1,o=void 0):(r=3,o=n.getWorkspace().folders[0]):typeof s.scope=="number"?r=s.scope:(r=3,o=n.getWorkspaceFolder(V.revive(s.scope))??void 0),{kind:xc.Extension,label:s.label,extension:s.extensionId,scope:r,workspaceFolder:o}}i.to=t})(dbt||(dbt={}));var fbt;(function(i){function e(t){const s=t;return s&&yi(s.id)&&!!s.workspaceFolder}i.is=e})(fbt||(fbt={}));var tI;(function(i){function e(s){if(s==null||!kf.is(s)&&!Vy.is(s)&&!eC.is(s))return;const n={_id:s._id,name:s.configurationProperties.name,definition:abt.from(s.getDefinition(!0)),source:dbt.from(s._source),execution:void 0,presentationOptions:!eC.is(s)&&s.command?lbt.from(s.command.presentation):void 0,isBackground:s.configurationProperties.isBackground,problemMatchers:[],hasDefinedMatchers:Vy.is(s)?s.hasDefinedMatchers:!1,runOptions:cbt.from(s.runOptions)};if(n.group=uri.from(s.configurationProperties.group),s.configurationProperties.detail&&(n.detail=s.configurationProperties.detail),!eC.is(s)&&s.command)switch(s.command.runtime){case wg.Process:n.execution=x0e.from(s.command);break;case wg.Shell:n.execution=k0e.from(s.command);break;case wg.CustomExecution:n.execution=AJ.from(s.command);break}if(s.configurationProperties.problemMatchers)for(const r of s.configurationProperties.problemMatchers)yi(r)&&n.problemMatchers.push(r);return n}i.from=e;function t(s,n,r,o,a){if(!s||typeof s.name!="string")return;let l;if(s.execution&&(k0e.is(s.execution)?l=k0e.to(s.execution):x0e.is(s.execution)?l=x0e.to(s.execution):AJ.is(s.execution)&&(l=AJ.to(s.execution))),!l)return;l.presentation=lbt.to(s.presentationOptions);const c=dbt.to(s.source,n),u=d(2625,null,c.label,s.name),h=abt.to(s.definition,r),f=AJ.is(s.execution)&&s._id?s._id:`${s.source.extensionId}.${h._key}`;return new Vy(f,c,u,h.type,h,l,s.hasDefinedMatchers,cbt.to(s.runOptions),{name:s.name,identifier:u,group:s.group,isBackground:!!s.isBackground,problemMatchers:s.problemMatchers.slice(),detail:s.detail,icon:o,hide:a})}i.to=t})(tI||(tI={}));var uri;(function(i){function e(t){if(t!==void 0)return{_id:typeof t=="string"?t:t._id,isDefault:typeof t=="string"||typeof t.isDefault=="string"?!1:t.isDefault}}i.from=e})(uri||(uri={}));var hri;(function(i){function e(s){return s}i.from=e;function t(s){return s}i.to=t})(hri||(hri={}));var AHs=class extends H{constructor(e,t,s,n){super(),this.f=t,this.g=s,this.h=n,this.b=e.getProxy(Bo.ExtHostTask),this.c=new Map,this.D(this.f.onDidStateChange(async r=>{if(r.kind==="changed")return;const o=r.__task;if(r.kind==="start"){const a=obt.from(o.getTaskExecution());let l=a.task.definition;if(a.task?.execution&&AJ.is(a.task.execution)&&r.resolvedVariables){const c={};for(const[u,h]of r.resolvedVariables.entries())c[u]=h;l=await this.h.resolveAnyAsync(o.getWorkspaceFolder(),a.task.definition,c)}this.b.$onDidStartTask(a,r.terminalId,l)}else r.kind==="processStarted"?this.b.$onDidStartTaskProcess(lri.from(o.getTaskExecution(),r.processId)):r.kind==="processEnded"?this.b.$onDidEndTaskProcess(cri.from(o.getTaskExecution(),r.exitCode)):r.kind==="end"&&this.b.$OnDidEndTask(obt.from(o.getTaskExecution()))}))}dispose(){for(const e of this.c.values())e.disposable.dispose();this.c.clear(),super.dispose()}$createTaskId(e){return new Promise((t,s)=>{const n=tI.to(e,this.g,!0);n?t(n._id):s(new Error("Task could not be created from DTO"))})}$registerTaskProvider(e,t){const s={provideTasks:r=>Promise.resolve(this.b.$provideTasks(e,r)).then(o=>{const a=[];for(const c of o.tasks){const u=tI.to(c,this.g,!0);u?a.push(u):console.error(`Task System: can not convert task: ${JSON.stringify(c.definition,void 0,0)}. Task will be dropped`)}const l={...o.extension,extensionLocation:V.revive(o.extension.extensionLocation)};return{tasks:a,extension:l}}),resolveTask:r=>{const o=tI.from(r);return o?(o.name=o.name===void 0?"":o.name,Promise.resolve(this.b.$resolveTask(e,o)).then(a=>{if(a)return tI.to(a,this.g,!0,r.configurationProperties.icon,r.configurationProperties.hide)})):Promise.resolve(void 0)}},n=this.f.registerTaskProvider(s,t);return this.c.set(e,{disposable:n,provider:s}),Promise.resolve(void 0)}$unregisterTaskProvider(e){const t=this.c.get(e);return t&&(t.disposable.dispose(),this.c.delete(e)),Promise.resolve(void 0)}$fetchTasks(e){return this.f.tasks(hri.to(e)).then(t=>{const s=[];for(const n of t){const r=tI.from(n);r&&s.push(r)}return s})}j(e){let t;if(typeof e=="string")t=e;else{const s=this.g.getWorkspace(),n=V.revive(e);s.configuration?.toString()===n.toString()?t=s:t=this.g.getWorkspaceFolder(n)}return t}async $getTaskExecution(e){if(fbt.is(e)){const t=this.j(e.workspaceFolder);if(t){const s=await this.f.getTask(t,e.id,!0);if(s)return{id:s._id,task:tI.from(s)};throw new Error("Task not found")}else throw new Error("No workspace folder")}else{const t=tI.to(e,this.g,!0);return{id:t._id,task:tI.from(t)}}}$executeTask(e){return new Promise((t,s)=>{if(fbt.is(e)){const n=this.j(e.workspaceFolder);n?this.f.getTask(n,e.id,!0).then(r=>{if(!r)s(new Error("Task not found"));else{const o={id:e.id,task:tI.from(r)};this.f.run(r).then(a=>{(a?.exitCode===void 0||a.exitCode!==0)&&this.b.$OnDidEndTask(o)},a=>{}),t(o)}},r=>{s(new Error("Task not found"))}):s(new Error("No workspace folder"))}else{const n=tI.to(e,this.g,!0);this.f.run(n).then(void 0,o=>{});const r={id:n._id,task:tI.from(n)};t(r)}})}$customExecutionComplete(e,t){return new Promise((s,n)=>{this.f.getActiveTasks().then(r=>{for(const o of r)if(e===o._id){this.f.extensionCallbackTaskComplete(o,t).then(a=>{s(void 0)},a=>{n(a)});return}n(new Error("Task to mark as complete not found"))})})}$terminateTask(e){return new Promise((t,s)=>{this.f.getActiveTasks().then(n=>{for(const r of n)if(e===r._id){this.f.terminate(r).then(o=>{t(void 0)},o=>{s(void 0)});return}s(new ed("Task to terminate not found"))})})}$registerTaskSystem(e,t){let s;switch(t.platform){case"Web":s=0;break;case"win32":s=3;break;case"darwin":s=1;break;case"linux":s=2;break;default:s=mC}this.f.registerTaskSystem(e,{platform:s,uriProvider:n=>V.from({scheme:t.scheme,authority:t.authority,path:n}),context:this.a,resolveVariables:(n,r,o)=>{const a=[];return r.variables.forEach(l=>a.push(l)),Promise.resolve(this.b.$resolveVariables(n.uri,{process:r.process,variables:a})).then(l=>{const c=Array.from(Object.values(l.variables));return new Promise((u,h)=>{this.h.resolveWithInteraction(n,c,"tasks",void 0,o).then(f=>{f||u(void 0);const g={process:void 0,variables:new Map};for(let p=0;p<c.length;p++){const b=a[p].substring(2,a[p].length-1);if(f&&l.variables[a[p]]===a[p]){const v=f.get(b);typeof v=="string"&&g.variables.set(b,v)}else g.variables.set(b,c[p])}yi(l.process)&&(g.process=l.process),u(g)},f=>{h(f)})})})},findExecutable:(n,r,o)=>this.b.$findExecutable(n,r,o)})}async $registerSupportedExecutions(e,t,s){return this.f.registerSupportedExecutions(e,t,s)}};AHs=__decorate([ga(vo.MainThreadTask),__param(1,M4),__param(2,kt),__param(3,lk)],AHs),W(),Pn();var MHs=class extends H{constructor(e,t){super(),this.b=t,this.a=this.D(new oo)}$registerResourceLabelFormatter(e,t){t.priority=!0;const s=this.b.registerCachedFormatter(t);this.a.set(e,s)}$unregisterResourceLabelFormatter(e){this.a.deleteAndDispose(e)}};MHs=__decorate([ga(vo.MainThreadLabelService),__param(1,Hs)],MHs),K(),ni(),de(),W(),K(),ee(),Xt(),de(),W(),Ie(),Ne(),ee(),Xt();var Hb=Be("tunnelService"),Sta=Be("sharedTunnelsService"),tb;(function(i){i.Http="http",i.Https="https"})(tb||(tb={}));var B1;(function(i){i.ConstantPrivate="constantPrivate",i.Private="private",i.Public="public"})(B1||(B1={}));function N5r(i){return!!i.forwardPort}var R7;(function(i){i[i.Notify=1]="Notify",i[i.OpenBrowser=2]="OpenBrowser",i[i.OpenPreview=3]="OpenPreview",i[i.Silent=4]="Silent",i[i.Ignore=5]="Ignore",i[i.OpenBrowserOnce=6]="OpenBrowserOnce"})(R7||(R7={}));function gbt(i){if(i.scheme!=="http"&&i.scheme!=="https")return;const e=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(i.authority);if(e)return{address:e[1],port:+e[2]}}function R5r(i){if(i.scheme!=="http"&&i.scheme!=="https"||!i.query)return;const e=i.query.split("&");for(const t of e){const s=t.split("=")[1];if(/^https?:/.exec(s)){const n=gbt(V.parse(s));if(n)return n}}}var E0e=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function une(i){return E0e.indexOf(i)>=0}var pbt=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function MJ(i){return pbt.indexOf(i)>=0}function A5r(i,e,t,s){if(t===1)return!1;if(t===2&&MJ(e)){const n=/(\d+)\.(\d+)\.(\d+)/g.exec(s);if(n?.length===4&&parseInt(n[1])>=18)return!1}return i<1024}var M5r=class{constructor(i,e,t){this.remoteAddress=i,this.localAddress=e,this.b=t,this.a=new $,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},dri=class extends H{constructor(e,t){super(),this.q=e,this.r=t,this.a=new $,this.onTunnelOpened=this.a.event,this.b=new $,this.onTunnelClosed=this.b.event,this.c=new $,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get s(){const e=this.r.getValue("remote.localPortHost");return!e||e==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(e){return this.g=e,e?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(e){this.h=e.elevation,this.m=e.privacyOptions,this.j=e.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.t()}async t(){const e=[],t=Array.from(this.f.values());for(const s of t){const n=Array.from(s.values());for(const r of n){const o=await r.value;o&&typeof o!="string"&&e.push(o)}}return e}async dispose(){super.dispose();for(const e of this.f.values()){for(const{value:t}of e.values())await t.then(s=>typeof s!="string"?s?.dispose():void 0);e.clear()}this.f.clear()}setEnvironmentTunnel(e,t,s,n,r){this.y(e,t,Promise.resolve({tunnelRemoteHost:e,tunnelRemotePort:t,localAddress:s,privacy:n,protocol:r,dispose:()=>Promise.resolve()}))}async getExistingTunnel(e,t){(MJ(e)||une(e))&&(e=E0e[0]);const s=this.C(e,t);if(s)return++s.refcount,s.value}openTunnel(e,t,s,n,r,o=!1,a,l){this.q.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${t}:${s} on local port ${r}.`);const c=this.g??e;if(!c)return;if(t||(t="localhost"),n||(n=this.s),this.g&&this.n.has(s)){this.q.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(c,t,s,n,r,o,a,l);return u?u.then(h=>{if(h){if(typeof h=="string")return this.q.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.z(t,s),h}else{this.q.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.z(t,s);return}this.q.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.u(h);return(h.tunnelRemoteHost!==t||h.tunnelRemotePort!==s)&&this.q.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.q.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.q.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}u(e){return{tunnelRemotePort:e.tunnelRemotePort,tunnelRemoteHost:e.tunnelRemoteHost,tunnelLocalPort:e.tunnelLocalPort,localAddress:e.localAddress,privacy:e.privacy,protocol:e.protocol,dispose:async()=>{this.q.trace(`ForwardedPorts: (TunnelService) dispose request for ${e.tunnelRemoteHost}:${e.tunnelRemotePort} `);const t=this.f.get(e.tunnelRemoteHost);if(t){const s=t.get(e.tunnelRemotePort);s&&(s.refcount--,await this.w(e.tunnelRemoteHost,e.tunnelRemotePort,s))}}}}async w(e,t,s){if(s.refcount<=0){this.q.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${e}:${t}.`);const n=s.value.then(async r=>{r&&typeof r!="string"&&(await r.dispose(!0),this.b.fire({host:r.tunnelRemoteHost,port:r.tunnelRemotePort}))});return this.f.has(e)&&this.f.get(e).delete(t),n}}async closeTunnel(e,t){this.q.trace(`ForwardedPorts: (TunnelService) close request for ${e}:${t} `);const s=this.f.get(e);if(s&&s.has(t)){const n=s.get(t);n.refcount=0,await this.w(e,t,n)}}y(e,t,s){this.f.has(e)||this.f.set(e,new Map),this.f.get(e).set(t,{refcount:1,value:s})}async z(e,t){const s=this.f.get(e);if(s){const n=s.get(t),r=n?await n.value:void 0;(!r||typeof r=="string")&&s.delete(t),s.size===0&&this.f.delete(e)}}C(e,t){const s=[e];une(e)?(s.push(...E0e),s.push(...pbt)):MJ(e)&&s.push(...pbt);const n=s.map(r=>this.f.get(r));for(const r of n){const o=r?.get(t);if(o)return o}}canTunnel(e){return!!gbt(e)}G(e,t,s,n,r,o,a){this.q.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${t}:${s} on local port ${n}.`);const l=s;this.n.add(l);const c=n===void 0?s:n,u={elevationRequired:r?this.isPortPrivileged(c):!1},h={remoteAddress:{host:t,port:s},localAddressPort:n,privacy:o,public:o?o!==B1.Private:void 0,protocol:a},f=e.forwardPort(h,u);return f?(this.y(t,s,f),f.finally(()=>{this.q.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(l)})):this.n.delete(l),f}};dri=__decorate([__param(0,Mt),__param(1,pe)],dri),ee();var $5r=Be("IExtHostInitDataService");ee();var F5r=Be("IExtHostRpcService"),O5r=class extends M5r{},mbt;(function(i){function e(s){return{remoteAddress:s.remoteAddress,localAddress:s.localAddress,public:!!s.public,privacy:s.privacy??(s.public?B1.Public:B1.Private),protocol:s.protocol}}i.fromApiTunnel=e;function t(s){return{remoteAddress:{host:s.tunnelRemoteHost,port:s.tunnelRemotePort},localAddress:s.localAddress,public:s.privacy!==B1.ConstantPrivate&&s.privacy!==B1.ConstantPrivate,privacy:s.privacy,protocol:s.protocol}}i.fromServiceTunnel=t})(mbt||(mbt={}));var kta=Be("IExtHostTunnelService"),$Hs=class extends H{constructor(e,t,s){super(),this.r=s,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new $,this.onDidChangeTunnels=this.h.event,this.n=0,this.q=new Map,this.a=e.getProxy(vo.MainThreadTunnelService)}async openTunnel(e,t){this.r.trace(`ForwardedPorts: (ExtHostTunnelService) ${e.identifier.value} called openTunnel API for ${t.remoteAddress.host}:${t.remoteAddress.port}.`);const s=await this.a.$openTunnel(t,e.displayName);if(s){const n=new O5r(s.remoteAddress,s.localAddress,()=>this.a.$closeTunnel(s.remoteAddress));return this.D(n),n}}async getTunnels(){return this.a.$getTunnels()}s(){return this.n++}registerPortsAttributesProvider(e,t){e.portRange===void 0&&e.commandPattern===void 0&&this.r.error("PortAttributesProvider must specify either a portRange or a commandPattern");const s=this.s();return this.q.set(s,{selector:e,provider:t}),this.a.$registerPortsAttributesProvider(e,s),new Tti(()=>{this.q.delete(s),this.a.$unregisterPortsAttributesProvider(s)})}async $providePortAttributes(e,t,s,n,r){const o=[];for(const l of e){const c=this.q.get(l);if(!c)return[];o.push(...await Promise.all(t.map(async u=>{let h;try{h=await c.provider.providePortAttributes({port:u,pid:s,commandLine:n},r)}catch{h=await c.provider.providePortAttributes(u,s,n,r)}return{providedAttributes:h,port:u}})))}const a=o.filter(l=>!!l.providedAttributes);return a.length>0?a.map(l=>({autoForwardAction:l.providedAttributes.autoForwardAction,port:l.port})):[]}async $registerCandidateFinder(e){}registerTunnelProvider(e,t){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(n,r)=>await e.provideTunnel(n,r,ht.None)??void 0;const s=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,privacyOptions:t.tunnelFeatures?.privacyOptions,protocol:t.tunnelFeatures.protocol===void 0?!0:t.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(s,!0),Promise.resolve(Oe(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(e,t){if(e){e.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(e.candidatePortSource),e.showCandidatePort&&(this.f=e.showCandidatePort,this.a.$setCandidateFilter());const s=e.tunnelFactory??(t?this.u(t):void 0);if(s){this.b=s;let n=e.tunnelFeatures?.privacyOptions??[];e.tunnelFeatures?.public&&n.length===0&&(n=[{id:"private",label:d(2769,null),themeIcon:"lock"},{id:"public",label:d(2770,null),themeIcon:"eye"}]);const r=e.tunnelFeatures?{elevation:!!e.tunnelFeatures?.elevation,public:!!e.tunnelFeatures?.public,privacyOptions:n,protocol:!0}:void 0;this.a.$setTunnelProvider(r,!!e.tunnelFactory)}}else this.b=void 0;return Oe(()=>{this.b=void 0})}u(e){}async $closeTunnel(e,t){if(this.g.has(e.host)){const s=this.g.get(e.host);s.has(e.port)&&(t&&s.get(e.port).disposeListener.dispose(),await s.get(e.port).tunnel.dispose(),s.delete(e.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(e,t){if(this.b)try{this.r.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const s=this.b(e,t);if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),s!==void 0){const n=await s;if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),n===void 0){this.r.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(e.remoteAddress.host)||this.g.set(e.remoteAddress.host,new Map);const r=this.D(n.onDidDispose(()=>(this.r.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(n.remoteAddress))));return this.g.get(e.remoteAddress.host).set(e.remoteAddress.port,{tunnel:n,disposeListener:r}),mbt.fromApiTunnel(n)}else this.r.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(s){if(this.r.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),s instanceof Error)return s.message}}async $applyCandidateFilter(e){const t=await Promise.all(e.map(n=>this.f(n.host,n.port,n.detail??""))),s=e.filter((n,r)=>t[r]);return this.r.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${e.map(n=>n.port).join(", ")} to ${s.map(n=>n.port).join(", ")}`),s}};$Hs=__decorate([__param(0,F5r),__param(1,$5r),__param(2,Mt)],$Hs),K(),de(),ee(),Et(),jt(),K(),de(),fl(),W(),Ie(),Ne(),en(),Xt(),jt(),oi(),lr(),zs(),ni(),Vt(),Sr(),ke();var _5r=10*1e3,bbt="remote.tunnels.toRestore",fri="remote.tunnels.toRestoreExpiration",B5r=1e3*60*60*24*14,FHs="onTunnel",vbt=new he("forwardedPortsViewEnabled",!1,d(13192,null)),A7=new he("forwardedPortsViewOnlyEnabled",!1,d(13193,null));function ybt(i){const e=i.match(/^([a-zA-Z0-9_-]+(?:\.[a-zA-Z0-9_-]+)*:)?([0-9]+)$/);if(e)return{host:e[1]?.substring(0,e[1].length-1)||"localhost",port:Number(e[2])}}var iI;(function(i){i.Other="Other",i.User="User",i.AutoForwardEnd="AutoForwardEnd"})(iI||(iI={}));var sI;(function(i){i[i.User=0]="User",i[i.Auto=1]="Auto",i[i.Extension=2]="Extension"})(sI||(sI={}));var gri={source:sI.User,description:d(13194,null)},pri={source:sI.Auto,description:d(13195,null)};function OHs(i,e,t){const s=i.get(Ef(e,t));if(s)return s;if(une(e))for(const n of E0e){const r=Ef(n,t);if(i.has(r))return i.get(r)}else if(MJ(e))for(const n of pbt){const r=Ef(n,t);if(i.has(r))return i.get(r)}}function Hv(i,e,t){const s=OHs(i,e,t);if(s)return s;const n=MJ(e)?"localhost":une(e)?"0.0.0.0":void 0;if(n)return OHs(i,n,t)}function Ef(i,e){return i+":"+e}var nI;(function(i){i.Notify="notify",i.OpenBrowser="openBrowser",i.OpenBrowserOnce="openBrowserOnce",i.OpenPreview="openPreview",i.Silent="silent",i.Ignore="ignore"})(nI||(nI={}));function U5r(i){return i&&"host"in i&&typeof i.host=="string"&&"port"in i&&typeof i.port=="number"&&(!("detail"in i)||typeof i.detail=="string")&&(!("pid"in i)||typeof i.pid=="string")}var _Hs=class vM extends H{static{this.c="remote.portsAttributes"}static{this.f="remote.otherPortsAttributes"}static{this.g=/^(\d+)\-(\d+)$/}static{this.h=/^([a-z0-9\-]+):(\d{1,5})$/}constructor(e){super(),this.q=e,this.j=[],this.n=new $,this.onDidChangeAttributes=this.n.event,this.D(e.onDidChangeConfiguration(t=>{(t.affectsConfiguration(vM.c)||t.affectsConfiguration(vM.f))&&this.r()})),this.r()}r(){this.j=this.w(),this.n.fire()}getAttributes(e,t,s){let n=this.u(e,t,s,this.j,0);const r={label:void 0,onAutoForward:void 0,elevateIfNeeded:void 0,requireLocalPort:void 0,protocol:void 0};for(;n>=0;){const o=this.j[n];o.key===e?(r.onAutoForward=o.onAutoForward??r.onAutoForward,r.elevateIfNeeded=o.elevateIfNeeded!==void 0?o.elevateIfNeeded:r.elevateIfNeeded,r.label=o.label??r.label,r.requireLocalPort=o.requireLocalPort,r.protocol=o.protocol):(r.onAutoForward=r.onAutoForward??o.onAutoForward,r.elevateIfNeeded=r.elevateIfNeeded!==void 0?r.elevateIfNeeded:o.elevateIfNeeded,r.label=r.label??o.label,r.requireLocalPort=r.requireLocalPort!==void 0?r.requireLocalPort:void 0,r.protocol=r.protocol??o.protocol),n=this.u(e,t,s,this.j,n+1)}return r.onAutoForward!==void 0||r.elevateIfNeeded!==void 0||r.label!==void 0||r.requireLocalPort!==void 0||r.protocol!==void 0?r:this.z()}s(e){return e.start!==void 0&&e.end!==void 0}t(e){return e.host!==void 0&&e.port!==void 0&&yi(e.host)&&Mu(e.port)}u(e,t,s,n,r){if(r>=n.length)return-1;const o=!une(t)&&!MJ(t),l=n.slice(r).findIndex(c=>Mu(c.key)?o?!1:c.key===e:this.s(c.key)?o?!1:e>=c.key.start&&e<=c.key.end:this.t(c.key)?e===c.key.port&&t===c.key.host:s?c.key.test(s):!1);return l>=0?l+r:-1}w(){const e=this.q.getValue(vM.c);if(!e||!Zr(e))return[];const t=[];for(const n in e){if(n===void 0)continue;const r=e[n];let o;if(Number(n))o=Number(n);else if(yi(n))if(vM.g.test(n)){const a=n.match(vM.g);o={start:Number(a[1]),end:Number(a[2])}}else if(vM.h.test(n)){const a=n.match(vM.h);o={host:a[1],port:Number(a[2])}}else{let a;try{a=RegExp(n)}catch{}a&&(o=a)}o&&t.push({key:o,elevateIfNeeded:r.elevateIfNeeded,onAutoForward:r.onAutoForward,label:r.label,requireLocalPort:r.requireLocalPort,protocol:r.protocol})}const s=this.q.getValue(vM.f);return s&&(this.m={elevateIfNeeded:s.elevateIfNeeded,label:s.label,onAutoForward:s.onAutoForward,requireLocalPort:s.requireLocalPort,protocol:s.protocol}),this.y(t)}y(e){function t(s,n){return Mu(s.key)?s.key:n.s(s.key)?s.key.start:n.t(s.key)?s.key.port:Number.MAX_VALUE}return e.sort((s,n)=>t(s,this)-t(n,this))}z(){return this.m}static providedActionToAction(e){switch(e){case R7.Notify:return nI.Notify;case R7.OpenBrowser:return nI.OpenBrowser;case R7.OpenBrowserOnce:return nI.OpenBrowserOnce;case R7.OpenPreview:return nI.OpenPreview;case R7.Silent:return nI.Silent;case R7.Ignore:return nI.Ignore;default:return}}async addAttributes(e,t,s){const r=this.q.inspect(vM.c).userRemoteValue;let o;!r||!Zr(r)?o={}:o=Ln(r),o[`${e}`]||(o[`${e}`]={});for(const a in t)o[`${e}`][a]=t[a];return this.q.updateValue(vM.c,o,s)}},wbt=class extends H{constructor(e,t,s,n,r,o,a,l,c,u){super(),this.H=e,this.I=t,this.J=s,this.L=n,this.M=r,this.N=o,this.O=a,this.P=l,this.Q=c,this.R=u,this.c=new Map,this.g=new $,this.onForwardPort=this.g.event,this.h=new $,this.onClosePort=this.h.event,this.j=new $,this.onPortName=this.j.event,this.n=new $,this.onCandidatesChanged=this.n.event,this.s=new $,this.onEnvironmentTunnelsSet=this.s.event,this.t=!1,this.u=void 0,this.y=!1,this.z=new $,this.C=new Map,this.F=new Map,this.G=[],this.U=!1,this.eb=new Date,this.configPortsAttributes=new _Hs(s),this.r=this.bb(),this.D(this.configPortsAttributes.onDidChangeAttributes(this.kb,this)),this.forwarded=new Map,this.f=new Map,this.H.tunnels.then(async h=>{const f=await this.getAttributes(h.map(g=>({port:g.tunnelRemotePort,host:g.tunnelRemoteHost})));for(const g of h)if(g.localAddress){const p=Ef(g.tunnelRemoteHost,g.tunnelRemotePort),b=Hv(this.m??new Map,g.tunnelRemoteHost,g.tunnelRemotePort);this.forwarded.set(p,{remotePort:g.tunnelRemotePort,remoteHost:g.tunnelRemoteHost,localAddress:g.localAddress,protocol:f?.get(g.tunnelRemotePort)?.protocol??tb.Http,localUri:await this.Y(g.localAddress,f?.get(g.tunnelRemotePort)),localPort:g.tunnelLocalPort,name:f?.get(g.tunnelRemotePort)?.label,runningProcess:b?.detail,hasRunningProcess:!!b,pid:b?.pid,privacy:g.privacy,source:gri}),this.f.set(p,g)}}),this.detected=new Map,this.D(this.H.onTunnelOpened(async h=>{const f=Ef(h.tunnelRemoteHost,h.tunnelRemotePort);if(!Hv(this.forwarded,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Hv(this.detected,h.tunnelRemoteHost,h.tunnelRemotePort)&&!Hv(this.c,h.tunnelRemoteHost,h.tunnelRemotePort)&&h.localAddress){const g=Hv(this.m??new Map,h.tunnelRemoteHost,h.tunnelRemotePort),p=(await this.getAttributes([{port:h.tunnelRemotePort,host:h.tunnelRemoteHost}]))?.get(h.tunnelRemotePort);this.forwarded.set(f,{remoteHost:h.tunnelRemoteHost,remotePort:h.tunnelRemotePort,localAddress:h.localAddress,protocol:p?.protocol??tb.Http,localUri:await this.Y(h.localAddress,p),localPort:h.tunnelLocalPort,name:p?.label,closeable:!0,runningProcess:g?.detail,hasRunningProcess:!!g,pid:g?.pid,privacy:h.privacy,source:gri})}await this.db(),this.W(!0),this.f.set(f,h),this.g.fire(this.forwarded.get(f))})),this.D(this.H.onTunnelClosed(h=>this.X(h,iI.Other))),this.W(!1)}S(){return this.Q.extensions.find(e=>e.activationEvents?.includes(FHs))?(this.R.createKey(A7.key,!0),!0):!1}W(e){if(this.U||(e&&(this.U=!0),this.L.remoteAuthority!==void 0&&!e)||this.S())return;const s=this.D(this.Q.onDidRegisterExtensions(()=>{this.S()&&s.dispose()}))}async X(e,t){const s=Ef(e.host,e.port);this.forwarded.has(s)&&(this.forwarded.delete(s),await this.db(),this.h.fire(e))}Y(e,t){if(e.startsWith("http"))return V.parse(e);const s=t?.protocol??"http";return V.parse(`${s}://${e}`)}async Z(e){const t=this.N.getWorkspace(),s=t.configuration?lc(t.configuration.path):t.folders.length>0?lc(t.folders[0].uri.path):void 0;if(s===void 0){this.O.debug("Could not get workspace hash for forwarded ports storage key.");return}return`${e}.${this.L.remoteAuthority}.${s}`}async $(){return this.Z(bbt)}async ab(){return this.Z(fri)}async bb(){const e=this.I.get(bbt,1);if(e)return this.I.remove(bbt,1),await this.db(),e;const t=await this.$();if(t)return this.I.get(t,0)}async restoreForwarded(){if(this.cb(),this.J.getValue("remote.restoreForwardedPorts")){const e=await this.r;if(e&&e!==this.w){const t=JSON.parse(e)??[];this.O.trace(`ForwardedPorts: (TunnelModel) restoring ports ${t.map(s=>s.remotePort).join(", ")}`);for(const s of t){const n=Hv(this.detected,s.remoteHost,s.remotePort);s.source.source!==sI.Extension&&!n||s.source.source===sI.Extension&&n?await this.gb({remote:{host:s.remoteHost,port:s.remotePort},local:s.localPort,name:s.name,elevateIfNeeded:!0,source:s.source}):s.source.source===sI.Extension&&!n&&this.C.set(Ef(s.remoteHost,s.remotePort),s)}}}if(this.y=!0,this.z.fire(),!this.u){const e=await this.$();this.u=this.D(new X),this.u.add(this.I.onDidChangeValue(0,void 0,this.u)(async t=>{t.key===e&&(this.r=Promise.resolve(this.I.get(e,0)),await this.restoreForwarded())}))}}cb(){const e=this.I.keys(0,0).filter(t=>t.startsWith(fri));for(const t of e){const s=this.I.getNumber(t,0);if(s&&s<Date.now()){this.r=Promise.resolve(void 0);const n=t.replace(fri,bbt);this.I.remove(t,0),this.I.remove(n,0)}}}async db(){if(this.J.getValue("remote.restoreForwardedPorts")){const e=Array.from(this.forwarded.values()),t=e.map(o=>({remoteHost:o.remoteHost,remotePort:o.remotePort,localPort:o.localPort,name:o.name,localAddress:o.localAddress,localUri:o.localUri,protocol:o.protocol,source:o.source}));let s;e.length>0&&(s=JSON.stringify(t));const n=await this.$(),r=await this.ab();!s&&n&&r?(this.I.remove(n,0),this.I.remove(r,0)):s!==this.w&&n&&r&&(this.I.store(n,s,0,0),this.I.store(r,Date.now()+B5r,0,0)),this.w=s}}async fb(e,t,s){if(!e.tunnelLocalPort||!s?.requireLocalPort||e.tunnelLocalPort===t)return;const n=new Date;if(this.eb.getTime()+_5r>n.getTime())return;this.eb=n;const r=d(13196,null,t,e.tunnelRemotePort,e.tunnelLocalPort);return this.P.info(r)}async forward(e,t){return!this.y&&this.L.remoteAuthority&&await ce.toPromise(this.z.event),this.gb(e,t)}async gb(e,t){await this.Q.activateByEvent(FHs);const s=Hv(this.forwarded,e.remote.host,e.remote.port);t=t??(t!==null?(await this.getAttributes([e.remote]))?.get(e.remote.port):void 0);const n=e.local!==void 0?e.local:e.remote.port;let r;if(s)return this.ib(s,e,t);{const o=this.L.remoteAuthority,a=o?{getAddress:async()=>(await this.M.resolveAuthority(o)).authority}:void 0,l=Ef(e.remote.host,e.remote.port);this.c.set(l,!0),e=this.hb(l,e);const c=await this.H.openTunnel(a,e.remote.host,e.remote.port,void 0,n,e.elevateIfNeeded?e.elevateIfNeeded:t?.elevateIfNeeded,e.privacy,t?.protocol);if(typeof c=="string")r=c;else if(c&&c.localAddress){const u=Hv(this.m??new Map,e.remote.host,e.remote.port),h=c.protocol?c.protocol===tb.Https?tb.Https:tb.Http:t?.protocol??tb.Http,f={remoteHost:c.tunnelRemoteHost,remotePort:c.tunnelRemotePort,localPort:c.tunnelLocalPort,name:t?.label??e.name,closeable:!0,localAddress:c.localAddress,protocol:h,localUri:await this.Y(c.localAddress,t),runningProcess:u?.detail,hasRunningProcess:!!u,pid:u?.pid,source:e.source??gri,privacy:c.privacy};return this.forwarded.set(l,f),this.f.set(l,c),this.c.delete(l),await this.db(),await this.fb(c,n,t),this.g.fire(f),c}this.c.delete(l)}return r}hb(e,t){const s=this.C.has(e)?this.C:this.F.has(e)?this.F:void 0;if(s){const n=s.get(e);s.delete(e),n&&(t.name=n.name??t.name,t.local=("local"in n?n.local:"localPort"in n?n.localPort:void 0)??t.local,t.privacy=t.privacy)}return t}async ib(e,t,s){const n=s?.label??t.name;let r;(function(a){a[a.None=0]="None",a[a.Fire=1]="Fire",a[a.Reopen=2]="Reopen"})(r||(r={}));let o=r.None;switch(n!==e.name&&(e.name=n,o=r.Fire),(s?.protocol||e.protocol!==tb.Http)&&s?.protocol!==e.protocol&&(t.source=e.source,o=r.Reopen),t.privacy&&e.privacy!==t.privacy&&(o=r.Reopen),o){case r.Fire:{this.g.fire();break}case r.Reopen:await this.close(e.remoteHost,e.remotePort,iI.User),await this.gb(t,s)}return Hv(this.f,t.remote.host,t.remote.port)}async name(e,t,s){const n=Hv(this.forwarded,e,t),r=Ef(e,t);if(n){n.name=s,await this.db(),this.j.fire({host:e,port:t});return}else this.detected.has(r)&&(this.detected.get(r).name=s,this.j.fire({host:e,port:t}))}async close(e,t,s){const n=Ef(e,t),r=this.forwarded.get(n);return s===iI.AutoForwardEnd&&r&&r.source.source===sI.Auto&&this.F.set(n,{local:r.localPort,name:r.name,privacy:r.privacy}),await this.H.closeTunnel(e,t),this.X({host:e,port:t},s)}address(e,t){const s=Ef(e,t);return(this.forwarded.get(s)||this.detected.get(s))?.localAddress}get environmentTunnelsSet(){return this.t}addEnvironmentTunnels(e){if(e)for(const t of e){const s=Hv(this.m??new Map,t.remoteAddress.host,t.remoteAddress.port),n=typeof t.localAddress=="string"?t.localAddress:Ef(t.localAddress.host,t.localAddress.port);this.detected.set(Ef(t.remoteAddress.host,t.remoteAddress.port),{remoteHost:t.remoteAddress.host,remotePort:t.remoteAddress.port,localAddress:n,protocol:tb.Http,localUri:this.Y(n),closeable:!1,runningProcess:s?.detail,hasRunningProcess:!!s,pid:s?.pid,privacy:B1.ConstantPrivate,source:{source:sI.Extension,description:d(13197,null)}}),this.H.setEnvironmentTunnel(t.remoteAddress.host,t.remoteAddress.port,n,B1.ConstantPrivate,tb.Http)}this.t=!0,this.s.fire(),this.g.fire()}setCandidateFilter(e){this.q=e}async setCandidates(e){let t=e;this.q&&(t=await this.q(e));const s=this.jb(t);this.O.trace(`ForwardedPorts: (TunnelModel) removed candidates ${Array.from(s.values()).map(n=>n.port).join(", ")}`),this.n.fire(s)}jb(e){const t=this.m??new Map,s=new Map;return this.m=s,e.forEach(n=>{const r=Ef(n.host,n.port);s.set(r,{host:n.host,port:n.port,detail:n.detail,pid:n.pid}),t.has(r)&&t.delete(r);const o=Hv(this.forwarded,n.host,n.port);o&&(o.runningProcess=n.detail,o.hasRunningProcess=!0,o.pid=n.pid)}),t.forEach((n,r)=>{const o=ybt(r);if(!o)return;const a=Hv(this.forwarded,o.host,o.port);a&&(a.runningProcess=void 0,a.hasRunningProcess=!1,a.pid=void 0);const l=Hv(this.detected,o.host,o.port);l&&(l.runningProcess=void 0,l.hasRunningProcess=!1,l.pid=void 0)}),t}get candidates(){return this.m?Array.from(this.m.values()):[]}get candidatesOrUndefined(){return this.m?this.candidates:void 0}async kb(){const e=Array.from(this.forwarded.values()),t=await this.getAttributes(e.map(s=>({port:s.remotePort,host:s.remoteHost})),!1);if(t)for(const s of e){const n=t.get(s.remotePort);(n?.protocol||s.protocol!==tb.Http)&&n?.protocol!==s.protocol&&await this.gb({remote:{host:s.remoteHost,port:s.remotePort},local:s.localPort,name:s.name,source:s.source},n),n&&n.label&&n.label!==s.name&&await this.name(s.remoteHost,s.remotePort,n.label)}}async getAttributes(e,t=!0){const s=new Map,n=new Map;e.forEach(c=>{const u=Hv(this.m??new Map,E0e[0],c.port)??c;if(u){s.set(c.port,u);const h=U5r(u)?u.pid:void 0;n.has(h)||n.set(h,[]),n.get(h)?.push(c.port)}});const r=new Map;if(e.forEach(c=>{const u=this.configPortsAttributes.getAttributes(c.port,c.host,s.get(c.port)?.detail);u&&r.set(c.port,u)}),this.G.length===0||!t)return r.size>0?r:void 0;const o=await Promise.all(this.G.flatMap(c=>Array.from(n.entries()).map(u=>{const h=u[1],f=s.get(h[0]);return c.providePortAttributes(h,f?.pid,f?.detail,ht.None)}))),a=new Map;if(o.forEach(c=>c.forEach(u=>{u&&a.set(u.port,u)})),!r&&!a)return;const l=new Map;return e.forEach(c=>{const u=r.get(c.port),h=a.get(c.port);l.set(c.port,{elevateIfNeeded:u?.elevateIfNeeded,label:u?.label,onAutoForward:u?.onAutoForward??_Hs.providedActionToAction(h?.autoForwardAction),requireLocalPort:u?.requireLocalPort,protocol:u?.protocol})}),l}addAttributesProvider(e){this.G.push(e)}};__decorate([Vm(1e3)],wbt.prototype,"db",null),wbt=__decorate([__param(0,Hb),__param(1,lt),__param(2,pe),__param(3,kn),__param(4,Wm),__param(5,kt),__param(6,Mt),__param(7,_s),__param(8,Us),__param(9,Le)],wbt);var xg=Be("remoteExplorerService"),Cbt="remote.explorerType",$J="~remote.forwardedPorts",mri="~remote.forwardedPortsContainer",FJ="remote.autoForwardPorts",DA="remote.autoForwardPortsSource",Sbt="remote.autoForwardPortsFallback",$4="process",xbt="output",kbt="hybrid",Bp;(function(i){i.Candidate="Candidate",i.Detected="Detected",i.Forwarded="Forwarded",i.Add="Add"})(Bp||(Bp={}));var pS;(function(i){i[i.None=0]="None",i[i.New=1]="New",i[i.Label=2]="Label",i[i.LocalPort=3]="LocalPort"})(pS||(pS={}));var V5r={type:"object",required:["id"],properties:{id:{description:d(13184,null),type:"string"}}},H5r=dc.registerExtensionPoint({extensionPoint:"remoteHelp",jsonSchema:{description:d(13185,null),type:"object",properties:{getStarted:{description:d(13186,null),oneOf:[{type:"string"},V5r]},documentation:{description:d(13187,null),type:"string"},feedback:{description:d(13188,null),type:"string",markdownDeprecationMessage:d(13189,null,"`reportIssue`")},reportIssue:{description:d(13190,null),type:"string"},issues:{description:d(13191,null),type:"string"}}}}),fF;(function(i){i[i.Disabled=0]="Disabled",i[i.ViewOnly=1]="ViewOnly",i[i.AdditionalFeatures=2]="AdditionalFeatures"})(fF||(fF={}));var bri=class{constructor(e,t,s){this.j=e,this.k=t,this.a=[],this.b=new $,this.onDidChangeTargetType=this.b.event,this.c=new $,this.onDidChangeHelpInformation=this.c.event,this.d=[],this.g=new $,this.onDidChangeEditable=this.g.event,this.h=new $,this.onEnabledPortsFeatures=this.h.event,this.i=fF.Disabled,this.namedProcesses=new Map,this.e=s.createInstance(wbt),H5r.setHandler(n=>{this.d.push(...n),this.c.fire(n)})}get helpInformation(){return this.d}set targetType(e){const t=this.a.length>0?this.a[0]:"",s=e.length>0?e[0]:"";t!==s&&(this.a=e,this.j.store(Cbt,this.a.toString(),1,1),this.j.store(Cbt,this.a.toString(),0,0),this.b.fire(this.a))}get targetType(){return this.a}get tunnelModel(){return this.e}forward(e,t){return this.tunnelModel.forward(e,t)}close(e,t){return this.tunnelModel.close(e.host,e.port,t)}setTunnelInformation(e){e?.features&&this.k.setTunnelFeatures(e.features),this.tunnelModel.addEnvironmentTunnels(e?.environmentTunnels)}setEditable(e,t,s){s?this.f={tunnelItem:e,data:s,editId:t}:this.f=void 0,this.g.fire(e?{tunnel:e,editId:t}:void 0)}getEditableData(e,t){return this.f&&(!e&&e===this.f.tunnelItem||e&&this.f.tunnelItem?.remotePort===e.remotePort&&this.f.tunnelItem.remoteHost===e.remoteHost&&this.f.editId===t)?this.f.data:void 0}setCandidateFilter(e){return e?(this.tunnelModel.setCandidateFilter(e),{dispose:()=>{this.tunnelModel.setCandidateFilter(void 0)}}):{dispose:()=>{}}}onFoundNewCandidates(e){this.tunnelModel.setCandidates(e)}restore(){return this.tunnelModel.restoreForwarded()}enablePortsFeatures(e){this.i=e?fF.ViewOnly:fF.AdditionalFeatures,this.h.fire()}get portsFeaturesEnabled(){return this.i}};bri=__decorate([__param(0,lt),__param(1,Hb),__param(2,se)],bri),et(xg,bri,1),W(),Ne(),Xt(),Gl(),qt(),Tr(),ke();var BHs=class extends H{constructor(e,t,s,n,r,o,a,l){super(),this.f=t,this.g=s,this.h=n,this.j=r,this.m=o,this.n=a,this.q=l,this.b=!1,this.c=new Map,this.s=!1,this.a=e.getProxy(Bo.ExtHostTunnelService),this.D(s.onTunnelOpened(()=>this.a.$onDidTunnelsChange())),this.D(s.onTunnelClosed(()=>this.a.$onDidTunnelsChange()))}r(){return(!!this.j.getValue(FJ)||this.g.hasTunnelProvider)&&this.j.getValue(DA)!==xbt}async $setRemoteTunnelService(e){this.f.namedProcesses.set(e,"Code Extension Host"),this.f.portsFeaturesEnabled===fF.AdditionalFeatures?this.a.$registerCandidateFinder(this.r()):this.D(this.f.onEnabledPortsFeatures(()=>this.a.$registerCandidateFinder(this.r()))),this.D(this.j.onDidChangeConfiguration(async t=>{if(this.f.portsFeaturesEnabled===fF.AdditionalFeatures&&(t.affectsConfiguration(FJ)||t.affectsConfiguration(DA)))return this.a.$registerCandidateFinder(this.r())})),this.D(this.g.onAddedTunnelProvider(async()=>{if(this.f.portsFeaturesEnabled===fF.AdditionalFeatures)return this.a.$registerCandidateFinder(this.r())}))}async $registerPortsAttributesProvider(e,t){this.c.set(t,e),this.s||(this.f.tunnelModel.addAttributesProvider(this),this.s=!0)}async $unregisterPortsAttributesProvider(e){this.c.delete(e)}async providePortAttributes(e,t,s,n){if(this.c.size===0)return[];const r=Array.from(this.c.entries()).filter(o=>{const a=o[1],l=typeof a.portRange=="number"?[a.portRange,a.portRange+1]:a.portRange,c=l?e.some(h=>l[0]<=h&&h<l[1]):!0,u=!a.commandPattern||s&&s.match(a.commandPattern);return c&&u}).map(o=>o[0]);return r.length===0?[]:this.a.$providePortAttributes(r,e,t,s,n)}async $openTunnel(e,t){const s=await this.f.forward({remote:e.remoteAddress,local:e.localAddressPort,name:e.label,source:{source:sI.Extension,description:t},elevateIfNeeded:!1});if(!(!s||typeof s=="string"))return!this.b&&e.localAddressPort!==void 0&&s.tunnelLocalPort!==void 0&&this.g.isPortPrivileged(e.localAddressPort)&&s.tunnelLocalPort!==e.localAddressPort&&this.g.canElevate&&this.t(e,s,t),mbt.fromServiceTunnel(s)}async t(e,t,s){return this.h.prompt(ts.Info,d(2626,null,s,e.remoteAddress.port,e.localAddressPort),[{label:d(2627,null,t.tunnelRemotePort),run:async()=>{this.b=!0,await this.f.close({host:t.tunnelRemoteHost,port:t.tunnelRemotePort},iI.Other),await this.f.forward({remote:e.remoteAddress,local:e.localAddressPort,name:e.label,source:{source:sI.Extension,description:s},elevateIfNeeded:!0}),this.b=!1}}])}async $closeTunnel(e){return this.f.close(e,iI.Other)}async $getTunnels(){return(await this.g.tunnels).map(e=>({remoteAddress:{port:e.tunnelRemotePort,host:e.tunnelRemoteHost},localAddress:e.localAddress,privacy:e.privacy,protocol:e.protocol}))}async $onFoundNewCandidates(e){this.f.onFoundNewCandidates(e)}async $setTunnelProvider(e,t){const s={forwardPort:(n,r)=>this.a.$forwardPort(n,r).then(a=>{if(a){if(typeof a=="string")return a}else return;const l=a;return this.m.trace(`ForwardedPorts: (MainThreadTunnelService) New tunnel established by tunnel provider: ${l?.remoteAddress.host}:${l?.remoteAddress.port}`),{tunnelRemotePort:l.remoteAddress.port,tunnelRemoteHost:l.remoteAddress.host,localAddress:typeof l.localAddress=="string"?l.localAddress:Ef(l.localAddress.host,l.localAddress.port),tunnelLocalPort:typeof l.localAddress!="string"?l.localAddress.port:void 0,public:l.public,privacy:l.privacy,protocol:l.protocol??tb.Http,dispose:async c=>(this.m.trace(`ForwardedPorts: (MainThreadTunnelService) Closing tunnel from tunnel provider: ${l?.remoteAddress.host}:${l?.remoteAddress.port}`),this.a.$closeTunnel({host:l.remoteAddress.host,port:l.remoteAddress.port},c))}})};e&&this.g.setTunnelFeatures(e),this.g.setTunnelProvider(s),t&&this.q.createKey(vbt.key,!0)}async $setCandidateFilter(){this.f.setCandidateFilter(e=>this.a.$applyCandidateFilter(e))}async $setCandidatePortSource(e){this.n.getEnvironment().then(()=>{switch(e){case Dwe.None:{De.as(Fn.Configuration).registerDefaultConfigurations([{overrides:{"remote.autoForwardPorts":!1}}]);break}case Dwe.Output:{De.as(Fn.Configuration).registerDefaultConfigurations([{overrides:{"remote.autoForwardPortsSource":xbt}}]);break}case Dwe.Hybrid:{De.as(Fn.Configuration).registerDefaultConfigurations([{overrides:{"remote.autoForwardPortsSource":kbt}}]);break}default:}}).catch(()=>{})}};BHs=__decorate([ga(vo.MainThreadTunnelService),__param(1,xg),__param(2,Hb),__param(3,gi),__param(4,pe),__param(5,Mt),__param(6,wa),__param(7,Le)],BHs),W(),K(),en(),sa(),zs(),ai(),de(),un(),Ne(),de(),W(),Fi(),Vt(),K(),Et(),qe(),zs(),Xt();function UHs(i){return`onAuthenticationRequest:${i}`}async function vri(i,e){const t=await i.get(`${e.urlProtocol}.loginAccount`);if(t)try{const s=JSON.parse(t);if(s&&yi(s.id)&&yi(s.accessToken)&&yi(s.providerId))return s}catch(s){console.error(`Failed parsing current auth session value: ${s}`)}}var W5r={type:"object",additionalProperties:!1,properties:{id:{type:"string",description:d(12645,null)},label:{type:"string",description:d(12646,null)}}},q5r=dc.registerExtensionPoint({extensionPoint:"authentication",jsonSchema:{description:d(12647,null),type:"array",items:W5r},activationEventsGenerator:(i,e)=>{for(const t of i)t.id&&e.push(`onAuthenticationRequest:${t.id}`)}}),yri=class extends H{constructor(e,t,s,n){super(),this.j=e,this.m=s,this.n=n,this.a=this.D(new $),this.onDidRegisterAuthenticationProvider=this.a.event,this.b=this.D(new $),this.onDidUnregisterAuthenticationProvider=this.b.event,this.c=this.D(new $),this.onDidChangeSessions=this.c.event,this.f=this.D(new $),this.onDidChangeDeclaredProviders=this.f.event,this.g=new Map,this.h=this.D(new oo),this.q=[],this.D(t.onDidChangeExtensionSessionAccess(r=>{this.c.fire({providerId:r.providerId,label:r.accountName,event:{added:[],changed:[],removed:[]}})})),this.s(),this.t()}get declaredProviders(){return this.q}s(){if(this.m.options?.authenticationProviders?.length)for(const e of this.m.options.authenticationProviders)this.registerDeclaredAuthenticationProvider(e),this.registerAuthenticationProvider(e.id,e)}t(){this.D(q5r.setHandler((e,{added:t,removed:s})=>{this.n.debug(`Found authentication providers. added: ${t.length}, removed: ${s.length}`),t.forEach(r=>{for(const o of r.value){if(cv(o.id)){r.collector.error(d(12648,null));continue}if(cv(o.label)){r.collector.error(d(12649,null));continue}this.declaredProviders.some(a=>a.id===o.id)?r.collector.error(d(12650,null,o.id)):(this.registerDeclaredAuthenticationProvider(o),this.n.debug(`Declared authentication provider: ${o.id}`))}}),s.flatMap(r=>r.value).forEach(r=>{const o=this.declaredProviders.find(a=>a.id===r.id);o&&(this.unregisterDeclaredAuthenticationProvider(o.id),this.n.debug(`Undeclared authentication provider: ${o.id}`))})}))}registerDeclaredAuthenticationProvider(e){if(cv(e.id))throw new Error(d(12651,null));if(cv(e.label))throw new Error(d(12652,null));if(this.declaredProviders.some(t=>t.id===e.id))throw new Error(d(12653,null,e.id));this.q.push(e),this.f.fire()}unregisterDeclaredAuthenticationProvider(e){const t=this.declaredProviders.findIndex(s=>s.id===e);t>-1&&this.declaredProviders.splice(t,1),this.f.fire()}isAuthenticationProviderRegistered(e){return this.g.has(e)}registerAuthenticationProvider(e,t){this.g.set(e,t);const s=new X;s.add(t.onDidChangeSessions(n=>this.c.fire({providerId:e,label:t.label,event:n}))),DI(t)&&s.add(t),this.h.set(e,s),this.a.fire({id:e,label:t.label})}unregisterAuthenticationProvider(e){const t=this.g.get(e);t&&(this.g.delete(e),this.b.fire({id:e,label:t.label})),this.h.deleteAndDispose(e)}getProviderIds(){const e=[];return this.g.forEach(t=>{e.push(t.id)}),e}getProvider(e){if(this.g.has(e))return this.g.get(e);throw new Error(`No authentication provider '${e}' is currently registered.`)}async getAccounts(e){const t=await this.getSessions(e),s=new Array,n=new Set;for(const r of t)n.has(r.account.label)||(n.add(r.account.label),s.push(r.account));return s}async getSessions(e,t,s,n=!1){const r=this.g.get(e)||await this.u(e,n);if(r)return await r.getSessions(t,{account:s});throw new Error(`No authentication provider '${e}' is currently registered.`)}async createSession(e,t,s){const n=this.g.get(e)||await this.u(e,!!s?.activateImmediate);if(n)return await n.createSession(t,{account:s?.account});throw new Error(`No authentication provider '${e}' is currently registered.`)}async removeSession(e,t){const s=this.g.get(e);if(s)return s.removeSession(t);throw new Error(`No authentication provider '${e}' is currently registered.`)}async u(e,t){await this.j.activateByEvent(UHs(e),t?1:0);let s=this.g.get(e);if(s)return s;const n=new X,r=new Promise((a,l)=>{n.add(ce.once(this.onDidRegisterAuthenticationProvider)(c=>{if(c.id===e)if(s=this.g.get(e),s)a(s);else throw new Error(`No authentication provider '${e}' is currently registered.`)}))}),o=new Promise((a,l)=>{const c=setTimeout(()=>{l("Timed out waiting for authentication provider to register")},5e3);n.add(Oe(()=>clearTimeout(c)))});return Promise.race([r,o]).finally(()=>n.dispose())}};yri=__decorate([__param(0,Us),__param(1,bJ),__param(2,Ob),__param(3,Mt)],yri),et(Ov,yri,1),J(class extends ie{constructor(){super({id:"authentication.command.anysphere.signOut",title:{value:"Sign Out of GitHub",original:"Sign Out of GitHub"},f1:!0})}run(e,...t){this.runAsync(e,...t)}async runAsync(e,...t){const s=e.get(Ov),r=s.getProviderIds().map(async a=>{try{const l=await s.getSessions(a),c={};return l.forEach(u=>{c[u.account.label]?c[u.account.label].push(u):c[u.account.label]=[u]}),{providerId:a,sessions:c}}catch{return{providerId:a}}}),o=await Promise.all(r);for(const a of o)if(a.sessions){for(const l of Object.keys(a.sessions))if(a.providerId==="github")for(const c of a.sessions[l])s.removeSession(a.providerId,c.id)}}}),Ie(),cs(),Ft(),Xt();var j5r=class extends H{constructor(i,e,t,s,n,r){super(),this.a=i,this.id=e,this.label=t,this.supportsMultipleAccounts=s,this.b=n,this.onDidChangeSessions=r.event}async getSessions(i,e){return this.a.$getSessions(this.id,i,e)}createSession(i,e){return this.a.$createSession(this.id,i,e)}async removeSession(i){await this.a.$removeSession(this.id,i),this.b.info(d(2565,null))}},VHs=class extends H{constructor(e,t,s,n,r,o,a,l,c,u,h,f,g){super(),this.f=t,this.g=s,this.h=n,this.j=r,this.m=o,this.n=a,this.q=l,this.r=c,this.s=u,this.t=h,this.u=f,this.w=g,this.b=this.D(new oo),this.c=new Set,this.G=new Set,this.a=e.getProxy(Bo.ExtHostAuthentication),this.D(this.f.onDidChangeSessions(p=>{this.a.$onDidChangeAuthenticationSessions(p.providerId,p.label)})),this.D(this.g.onDidChangeAccountPreference(p=>{const b=this.f.getProvider(p.providerId);this.a.$onDidChangeAuthenticationSessions(b.id,b.label,p.extensionIds)}))}async $registerAuthenticationProvider(e,t,s){this.f.declaredProviders.find(o=>o.id===e)||(this.w.warn(`Authentication provider ${e} was not declared in the Extension Manifest.`),this.r.publicLog2("authentication.providerNotDeclared",{id:e}));const n=new $;this.b.set(e,n);const r=new j5r(this.a,e,t,s,this.n,n);this.f.registerAuthenticationProvider(e,r)}$unregisterAuthenticationProvider(e){this.b.deleteAndDispose(e),this.f.unregisterAuthenticationProvider(e)}async $ensureProvider(e){if(!this.f.isAuthenticationProviderRegistered(e))return await this.q.activateByEvent(UHs(e),1)}$sendDidChangeSessions(e,t){const s=this.b.get(e);s instanceof $&&s.fire(t)}$removeSession(e,t){return this.f.removeSession(e,t)}async y(e){const t=`In order to provide better results for @git, Cursor wants to sign in with ${e}.`;let s;(function(r){r[r.Allow=0]="Allow",r[r.DontAskAgain=1]="DontAskAgain",r[r.Cancel=2]="Cancel"})(s||(s={}));const n=await this.m.prompt({type:is.Info,message:t,buttons:[{label:d(2566,null),run:()=>s.Allow},{label:d(2567,null),run:()=>s.DontAskAgain},{label:d(2568,null),run:()=>s.Cancel}]});return n.result===s.DontAskAgain&&await this.t.updateValue("cursor-retrieval.canAttemptGithubLogin",!1),n.result===s.Allow}async z(e,t,s,n){let r;e.id.startsWith(uzt)?r=d(2569,null,t,e.label):r=d(s?2570:2571,null,t,e.label);const o=[{label:d(2572,null),run(){return!0}}];n?.learnMore&&o.push({label:d(2573,null),run:async()=>{const l=this.z(e,t,s,n);return await this.u.open(V.revive(n.learnMore),{allowCommands:!0}),await l}});const{result:a}=await this.m.prompt({type:is.Info,message:r,buttons:o,detail:n?.detail,cancelButton:!0});return a??!1}async C(e,t){const s=await this.m.prompt({message:d(2574,null),detail:d(2575,null,e,t),type:is.Warning,cancelButton:!0,buttons:[{label:d(2576,null,e),run:()=>e},{label:d(2577,null,t),run:()=>t}]});if(!s.result)throw new _a;return s.result===e}async F(e,t,s,n,r){const o=await this.f.getSessions(e,t,r.account,!0),a=this.f.getProvider(e);if(r.forceNewSession&&r.createIfNone)throw new Error("Invalid combination of options. Please remove one of the following: forceNewSession, createIfNone");if(r.forceNewSession&&r.silent)throw new Error("Invalid combination of options. Please remove one of the following: forceNewSession, silent");if(r.createIfNone&&r.silent)throw new Error("Invalid combination of options. Please remove one of the following: createIfNone, silent");r.clearSessionPreference&&this.M(s,e,t);const l=r.account?o[0]:this.J(s,e,t,o);if(!r.forceNewSession&&o.length){if(l&&this.h.isAccessAllowed(e,l.account.label,s))return l;if(!a.supportsMultipleAccounts&&this.h.isAccessAllowed(e,o[0].account.label,s))return o[0]}if(r.createIfNone||r.forceNewSession){let c;typeof r.forceNewSession=="object"&&(c=r.forceNewSession);const u=!!(r.forceNewSession&&o.length);let h;if(this.s.cursorTrustedExtensionAuthAccess?.includes(s)?h=await this.y(a.label):h=await this.z(a,n,u,c),!h)throw new Error("User did not consent to login.");let f;if(o?.length&&!r.forceNewSession)f=a.supportsMultipleAccounts&&!r.account?await this.g.selectSession(e,s,n,t,o):o[0];else{const g=r.account??l?.account;do f=await this.f.createSession(e,t,{activateImmediate:!0,account:g});while(g&&g.label!==f.account.label&&!await this.C(f.account.label,g.label))}return this.h.updateAllowedExtensions(e,f.account.label,[{id:s,name:n,allowed:!0}]),this.L(s,e,f),f}if(!l&&!this.g.getAccountPreference(s,e)){const c=o.find(u=>this.h.isAccessAllowed(e,u.account.label,s));if(c)return c}r.silent||(o.length?this.g.requestSessionAccess(e,s,n,t,o):await this.g.requestNewSession(e,t,s,n))}async $getSession(e,t,s,n,r){this.H(s,e,t);const o=await this.F(e,t,s,n,r);return o&&(this.I(s,e),this.j.addAccountUsage(e,o.account.label,t,s,n)),o}async $getAccounts(e){return await this.f.getAccounts(e)}H(e,t,s){const n=s.some(o=>o.startsWith("VSCODE_CLIENT_ID:")),r=`${e}|${t}|${n}`;this.G.has(r)||(this.G.add(r),n&&this.r.publicLog2("authentication.clientIdUsage",{extensionId:e}))}I(e,t){const s=`${e}|${t}`;this.c.has(s)||(this.c.add(s),this.r.publicLog2("authentication.providerUsage",{providerId:t,extensionId:e}))}J(e,t,s,n){if(n.length===0)return;const r=this.g.getAccountPreference(e,t);if(r)return n.find(l=>l.account.label===r);const o=this.g.getSessionPreference(t,e,s);if(o){const a=n.find(l=>l.id===o);if(a)return this.g.updateAccountPreference(e,t,a.account),a}}L(e,t,s){this.g.updateAccountPreference(e,t,s.account),this.g.updateSessionPreference(t,e,s)}M(e,t,s){this.g.removeAccountPreference(e,t),this.g.removeSessionPreference(t,e,s)}};VHs=__decorate([ga(vo.MainThreadAuthentication),__param(1,Ov),__param(2,hzt),__param(3,bJ),__param(4,E9),__param(5,_s),__param(6,gi),__param(7,Us),__param(8,At),__param(9,ds),__param(10,pe),__param(11,ns),__param(12,Mt)],VHs),X6(),xr();var I0e={typeName:"aiserver.v1.ShadowWorkspaceService",methods:{getLintsForChange:{name:"GetLintsForChange",I:IWi,O:$H,kind:Ze.Unary},shadowHealthCheck:{name:"ShadowHealthCheck",I:iFt,O:sFt,kind:Ze.Unary},swSyncIndex:{name:"SwSyncIndex",I:EWi,O:nFt,kind:Ze.Unary},swProvideTemporaryAccessToken:{name:"SwProvideTemporaryAccessToken",I:kWi,O:tFt,kind:Ze.Unary},swCompileRepoIncludeExcludePatterns:{name:"SwCompileRepoIncludeExcludePatterns",I:eFt,O:oet,kind:Ze.Unary},swCallClientSideV2Tool:{name:"SwCallClientSideV2Tool",I:xWi,O:Ohe,kind:Ze.Unary},swGetExplicitContext:{name:"SwGetExplicitContext",I:SWi,O:Z2t,kind:Ze.Unary},swWriteTextFileWithLints:{name:"SwWriteTextFileWithLints",I:CWi,O:Q2t,kind:Ze.Unary}}};Jn(),W(),xs(),Rl(),ai(),W(),Et(),ee();var HHs=Be("editHistoryService"),z5r=class extends H{constructor(){super(),this.a=void 0}registerEditHistoryProvider(i){this.a=i}unregisterEditHistoryProvider(){this.a=void 0}};et(HHs,z5r,1),hy(),Qu(),ee();var WHs=Be("IShadowWorkspaceServerService");Xt(),z4t(),ni(),Ns(),Ex(),In(),co(),Xn(),He(),ql(),ee();var D0e=Be("tracingService");J4t(),Ft(),PC(),Pg(),xr();var J5r=class Cze extends R{constructor(e){super(),this.authId="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.DeleteUserRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"auth_id",kind:"scalar",T:9}])}static fromBinary(e,t){return new Cze().fromBinary(e,t)}static fromJson(e,t){return new Cze().fromJson(e,t)}static fromJsonString(e,t){return new Cze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Cze,e,t)}},G5r=class Sze extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.DeleteUserResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new Sze().fromBinary(e,t)}static fromJson(e,t){return new Sze().fromJson(e,t)}static fromJsonString(e,t){return new Sze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Sze,e,t)}},K5r=class xze extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.RunTailscaleSSHRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new xze().fromBinary(e,t)}static fromJson(e,t){return new xze().fromJson(e,t)}static fromJsonString(e,t){return new xze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(xze,e,t)}},Y5r=class kze extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.RunTailscaleSSHResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new kze().fromBinary(e,t)}static fromJson(e,t){return new kze().fromJson(e,t)}static fromJsonString(e,t){return new kze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(kze,e,t)}},X5r=class Eze extends R{constructor(e){super(),this.teamId=0,this.authIds=[],this.workosIds=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AddAuthIdsToTeamRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"team_id",kind:"scalar",T:5},{no:2,name:"auth_ids",kind:"scalar",T:9,repeated:!0},{no:3,name:"workos_ids",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new Eze().fromBinary(e,t)}static fromJson(e,t){return new Eze().fromJson(e,t)}static fromJsonString(e,t){return new Eze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Eze,e,t)}},Q5r=class Ize extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AddAuthIdsToTeamResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new Ize().fromBinary(e,t)}static fromJson(e,t){return new Ize().fromJson(e,t)}static fromJsonString(e,t){return new Ize().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Ize,e,t)}};xr();var qHs={typeName:"aiserver.v1.AdminService",methods:{deleteUser:{name:"DeleteUser",I:J5r,O:G5r,kind:Ze.Unary},runTailscaleSSH:{name:"RunTailscaleSSH",I:K5r,O:Y5r,kind:Ze.Unary},addAuthIdsToTeam:{name:"AddAuthIdsToTeam",I:X5r,O:Q5r,kind:Ze.Unary}}};Nos(),xr(),co(),bc();var TA;(function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.READ_WRITE_FILE=1]="READ_WRITE_FILE",i[i.RUN_TERM=2]="RUN_TERM",i[i.CREATE_RM_FILES=3]="CREATE_RM_FILES"})(TA||(TA={})),m.util.setEnumType(TA,"aiserver.v1.AiProjectStepType",[{no:0,name:"AI_PROJECT_STEP_TYPE_UNSPECIFIED"},{no:1,name:"AI_PROJECT_STEP_TYPE_READ_WRITE_FILE"},{no:2,name:"AI_PROJECT_STEP_TYPE_RUN_TERM"},{no:3,name:"AI_PROJECT_STEP_TYPE_CREATE_RM_FILES"}]);var Z5r=class Dze extends R{constructor(e){super(),this.prompt="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectAgentInitRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"prompt",kind:"scalar",T:9}])}static fromBinary(e,t){return new Dze().fromBinary(e,t)}static fromJson(e,t){return new Dze().fromJson(e,t)}static fromJsonString(e,t){return new Dze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Dze,e,t)}},T0e=class Tze extends R{constructor(e){super(),this.fullUserMessage="",this.fullBotMessage="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.MessagePayload"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"full_user_message",kind:"scalar",T:9},{no:2,name:"full_bot_message",kind:"scalar",T:9}])}static fromBinary(e,t){return new Tze().fromBinary(e,t)}static fromJson(e,t){return new Tze().fromJson(e,t)}static fromJsonString(e,t){return new Tze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Tze,e,t)}},e6r=class Lze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectClarification"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"output",kind:"scalar",T:9,oneof:"response"},{no:2,name:"thought",kind:"scalar",T:9,oneof:"response"},{no:3,name:"message_payload",kind:"message",T:T0e,oneof:"response"}])}static fromBinary(e,t){return new Lze().fromBinary(e,t)}static fromJson(e,t){return new Lze().fromJson(e,t)}static fromJsonString(e,t){return new Lze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Lze,e,t)}},t6r=class Pze extends R{constructor(e){super(),this.clarificationResponse="",this.previousMessages=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectClarificationRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"clarification_response",kind:"scalar",T:9},{no:3,name:"previous_messages",kind:"message",T:OX,repeated:!0}])}static fromBinary(e,t){return new Pze().fromBinary(e,t)}static fromJson(e,t){return new Pze().fromJson(e,t)}static fromJsonString(e,t){return new Pze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Pze,e,t)}},jHs=class Nze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectClarificationResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"clarification",kind:"message",T:e6r,oneof:"response"},{no:2,name:"repeat_clarification",kind:"scalar",T:8,oneof:"response"}])}static fromBinary(e,t){return new Nze().fromBinary(e,t)}static fromJson(e,t){return new Nze().fromJson(e,t)}static fromJsonString(e,t){return new Nze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Nze,e,t)}},i6r=class Rze extends R{constructor(e){super(),this.previousMessages=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectAgentPlanRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:3,name:"previous_messages",kind:"message",T:OX,repeated:!0}])}static fromBinary(e,t){return new Rze().fromBinary(e,t)}static fromJson(e,t){return new Rze().fromJson(e,t)}static fromJsonString(e,t){return new Rze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Rze,e,t)}},zHs=class Aze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectAgentPlanResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"thought",kind:"scalar",T:9,oneof:"response"},{no:2,name:"output",kind:"scalar",T:9,oneof:"response"},{no:3,name:"message_payload",kind:"message",T:T0e,oneof:"response"}])}static fromBinary(e,t){return new Aze().fromBinary(e,t)}static fromJson(e,t){return new Aze().fromJson(e,t)}static fromJsonString(e,t){return new Aze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Aze,e,t)}},s6r=class Mze extends R{constructor(e){super(),this.previousMessages=[],this.feedbackOrProgress="",this.forceMoveToNextStep=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectPlanFeedbackRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"previous_messages",kind:"message",T:OX,repeated:!0},{no:3,name:"feedback_or_progress",kind:"scalar",T:9},{no:4,name:"force_move_to_next_step",kind:"scalar",T:8}])}static fromBinary(e,t){return new Mze().fromBinary(e,t)}static fromJson(e,t){return new Mze().fromJson(e,t)}static fromJsonString(e,t){return new Mze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Mze,e,t)}},n6r=class $ze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectPlanFeedbackResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"revised_plan",kind:"message",T:zHs,oneof:"response"},{no:2,name:"repeat_feedback",kind:"scalar",T:8,oneof:"response"}])}static fromBinary(e,t){return new $ze().fromBinary(e,t)}static fromJson(e,t){return new $ze().fromJson(e,t)}static fromJsonString(e,t){return new $ze().fromJsonString(e,t)}static equals(e,t){return m.util.equals($ze,e,t)}},r6r=class Fze extends R{constructor(e){super(),this.description="",this.spec="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectBreakdownRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"description",kind:"scalar",T:9},{no:3,name:"spec",kind:"scalar",T:9}])}static fromBinary(e,t){return new Fze().fromBinary(e,t)}static fromJson(e,t){return new Fze().fromJson(e,t)}static fromJsonString(e,t){return new Fze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Fze,e,t)}},JHs=class Oze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectBreakdownResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"thought",kind:"scalar",T:9,oneof:"response"},{no:2,name:"step",kind:"message",T:o6r,oneof:"response"},{no:3,name:"message_payload",kind:"message",T:T0e,oneof:"response"}])}static fromBinary(e,t){return new Oze().fromBinary(e,t)}static fromJson(e,t){return new Oze().fromJson(e,t)}static fromJsonString(e,t){return new Oze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Oze,e,t)}},o6r=class _ze extends R{constructor(e){super(),this.stepNumber=0,this.stepDescription="",this.stepType=TA.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectBreakdownResponse.Step"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"step_number",kind:"scalar",T:5},{no:2,name:"step_description",kind:"scalar",T:9},{no:3,name:"step_type",kind:"enum",T:m.getEnumType(TA)}])}static fromBinary(e,t){return new _ze().fromBinary(e,t)}static fromJson(e,t){return new _ze().fromJson(e,t)}static fromJsonString(e,t){return new _ze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(_ze,e,t)}},a6r=class Bze extends R{constructor(e){super(),this.previousMessages=[],this.feedbackOrProgress="",this.forceMoveToNextStep=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectBreakdownFeedbackRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"previous_messages",kind:"message",T:OX,repeated:!0},{no:3,name:"feedback_or_progress",kind:"scalar",T:9},{no:4,name:"force_move_to_next_step",kind:"scalar",T:8}])}static fromBinary(e,t){return new Bze().fromBinary(e,t)}static fromJson(e,t){return new Bze().fromJson(e,t)}static fromJsonString(e,t){return new Bze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Bze,e,t)}},l6r=class Uze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectBreakdownFeedbackResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"revised_breakdown",kind:"message",T:JHs,oneof:"response"},{no:2,name:"repeat_feedback",kind:"scalar",T:8,oneof:"response"}])}static fromBinary(e,t){return new Uze().fromBinary(e,t)}static fromJson(e,t){return new Uze().fromJson(e,t)}static fromJsonString(e,t){return new Uze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Uze,e,t)}},c6r=class Vze extends R{constructor(e){super(),this.stepDescription="",this.projectPlan="",this.projectBreakdown=[],this.stepType=TA.UNSPECIFIED,this.shellType=PH.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"step_description",kind:"scalar",T:9},{no:3,name:"project_plan",kind:"scalar",T:9},{no:4,name:"project_breakdown",kind:"scalar",T:9,repeated:!0},{no:5,name:"step_type",kind:"enum",T:m.getEnumType(TA)},{no:6,name:"shell_type",kind:"enum",T:m.getEnumType(PH)}])}static fromBinary(e,t){return new Vze().fromBinary(e,t)}static fromJson(e,t){return new Vze().fromJson(e,t)}static fromJsonString(e,t){return new Vze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Vze,e,t)}},GHs=class Hze extends R{constructor(e){super(),this.response={case:void 0},this.stepType=TA.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"thought",kind:"scalar",T:9,oneof:"response"},{no:2,name:"output",kind:"scalar",T:9,oneof:"response"},{no:3,name:"message_payload",kind:"message",T:T0e,oneof:"response"},{no:5,name:"step_payload",kind:"message",T:g6r,oneof:"response"},{no:4,name:"step_type",kind:"enum",T:m.getEnumType(TA)}])}static fromBinary(e,t){return new Hze().fromBinary(e,t)}static fromJson(e,t){return new Hze().fromJson(e,t)}static fromJsonString(e,t){return new Hze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Hze,e,t)}},u6r=class Wze extends R{constructor(e){super(),this.filename="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.WriteCode"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"filename",kind:"scalar",T:9}])}static fromBinary(e,t){return new Wze().fromBinary(e,t)}static fromJson(e,t){return new Wze().fromJson(e,t)}static fromJsonString(e,t){return new Wze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Wze,e,t)}},h6r=class qze extends R{constructor(e){super(),this.thought="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.ReviseCode"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"thought",kind:"scalar",T:9}])}static fromBinary(e,t){return new qze().fromBinary(e,t)}static fromJson(e,t){return new qze().fromJson(e,t)}static fromJsonString(e,t){return new qze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(qze,e,t)}},d6r=class jze extends R{constructor(e){super(),this.commandBatchUuid="",this.command="",this.response="",this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.RunTerm"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"command_batch_uuid",kind:"scalar",T:9},{no:2,name:"command",kind:"scalar",T:9},{no:3,name:"response",kind:"scalar",T:9},{no:4,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new jze().fromBinary(e,t)}static fromJson(e,t){return new jze().fromJson(e,t)}static fromJsonString(e,t){return new jze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(jze,e,t)}},f6r=class zze extends R{constructor(e){super(),this.payload={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.CreatingFiles"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"filename",kind:"scalar",T:9,oneof:"payload"},{no:2,name:"directory",kind:"scalar",T:9,oneof:"payload"}])}static fromBinary(e,t){return new zze().fromBinary(e,t)}static fromJson(e,t){return new zze().fromJson(e,t)}static fromJsonString(e,t){return new zze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(zze,e,t)}},Rta=class Jze extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.Nothing"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new Jze().fromBinary(e,t)}static fromJson(e,t){return new Jze().fromJson(e,t)}static fromJsonString(e,t){return new Jze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Jze,e,t)}},g6r=class Gze extends R{constructor(e){super(),this.payload={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponse.StepPayload"}static{this.fields=m.util.newFieldList(()=>[{no:5,name:"write_code",kind:"message",T:u6r,oneof:"payload"},{no:6,name:"run_term",kind:"message",T:d6r,oneof:"payload"},{no:7,name:"creating_files",kind:"message",T:f6r,oneof:"payload"},{no:8,name:"revise_code",kind:"message",T:h6r,oneof:"payload"}])}static fromBinary(e,t){return new Gze().fromBinary(e,t)}static fromJson(e,t){return new Gze().fromJson(e,t)}static fromJsonString(e,t){return new Gze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Gze,e,t)}},p6r=class Kze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepResponseWrapped"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"real_response",kind:"message",T:GHs,oneof:"response"},{no:2,name:"background_task_uuid",kind:"scalar",T:9,oneof:"response"}])}static fromBinary(e,t){return new Kze().fromBinary(e,t)}static fromJson(e,t){return new Kze().fromJson(e,t)}static fromJsonString(e,t){return new Kze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Kze,e,t)}},m6r=class Yze extends R{constructor(e){super(),this.stepDescription="",this.projectPlan="",this.projectBreakdown=[],this.stepType=TA.UNSPECIFIED,this.shellType=PH.UNSPECIFIED,this.previousFeedbackMessages=[],this.forceMoveToNextStep=!1,this.feedbackPayload={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepFeedbackRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"model_details",kind:"message",T:Ea},{no:2,name:"step_description",kind:"scalar",T:9},{no:3,name:"project_plan",kind:"scalar",T:9},{no:4,name:"project_breakdown",kind:"scalar",T:9,repeated:!0},{no:5,name:"step_type",kind:"enum",T:m.getEnumType(TA)},{no:6,name:"shell_type",kind:"enum",T:m.getEnumType(PH)},{no:7,name:"previous_feedback_messages",kind:"message",T:OX,repeated:!0},{no:8,name:"force_move_to_next_step",kind:"scalar",T:8},{no:9,name:"modify_code_payload",kind:"message",T:b6r,oneof:"feedback_payload"}])}static fromBinary(e,t){return new Yze().fromBinary(e,t)}static fromJson(e,t){return new Yze().fromJson(e,t)}static fromJsonString(e,t){return new Yze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Yze,e,t)}},b6r=class Xze extends R{constructor(e){super(),this.filesToModify=[],this.feedbackText="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepFeedbackRequest.ModifyCodePayload"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"files_to_modify",kind:"scalar",T:9,repeated:!0},{no:2,name:"feedback_text",kind:"scalar",T:9}])}static fromBinary(e,t){return new Xze().fromBinary(e,t)}static fromJson(e,t){return new Xze().fromJson(e,t)}static fromJsonString(e,t){return new Xze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Xze,e,t)}},v6r=class Qze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepFeedbackResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response_from_feedback",kind:"message",T:GHs,oneof:"response"},{no:2,name:"repeat_feedback",kind:"scalar",T:8,oneof:"response"}])}static fromBinary(e,t){return new Qze().fromBinary(e,t)}static fromJson(e,t){return new Qze().fromJson(e,t)}static fromJsonString(e,t){return new Qze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Qze,e,t)}},y6r=class Zze extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectStepFeedbackResponseWrapped"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"real_response",kind:"message",T:v6r,oneof:"response"},{no:2,name:"background_task_uuid",kind:"scalar",T:9,oneof:"response"}])}static fromBinary(e,t){return new Zze().fromBinary(e,t)}static fromJson(e,t){return new Zze().fromJson(e,t)}static fromJsonString(e,t){return new Zze().fromJsonString(e,t)}static equals(e,t){return m.util.equals(Zze,e,t)}},Ata=class eJe extends R{constructor(e){super(),this.code="",this.path="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AiProjectAgentWriteCode"}static{this.fields=m.util.newFieldList(()=>[{no:2,name:"code",kind:"scalar",T:9},{no:3,name:"path",kind:"scalar",T:9},{no:4,name:"message_payload",kind:"message",T:T0e}])}static fromBinary(e,t){return new eJe().fromBinary(e,t)}static fromJson(e,t){return new eJe().fromJson(e,t)}static fromJsonString(e,t){return new eJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(eJe,e,t)}};xr();var KHs={typeName:"aiserver.v1.AiProjectService",methods:{aiProjectAgentInit:{name:"AiProjectAgentInit",I:Z5r,O:jHs,kind:Ze.ServerStreaming},aiProjectClarification:{name:"AiProjectClarification",I:t6r,O:jHs,kind:Ze.ServerStreaming},aiProjectPlan:{name:"AiProjectPlan",I:i6r,O:zHs,kind:Ze.ServerStreaming},aiProjectPlanFeedback:{name:"AiProjectPlanFeedback",I:s6r,O:n6r,kind:Ze.ServerStreaming},aiProjectBreakdown:{name:"AiProjectBreakdown",I:r6r,O:JHs,kind:Ze.ServerStreaming},aiProjectBreakdownFeedback:{name:"AiProjectBreakdownFeedback",I:a6r,O:l6r,kind:Ze.ServerStreaming},aiProjectStep:{name:"AiProjectStep",I:c6r,O:p6r,kind:Ze.ServerStreaming},aiProjectStepFeedback:{name:"AiProjectStepFeedback",I:m6r,O:y6r,kind:Ze.ServerStreaming}}};xr();var YHs={typeName:"aiserver.v1.BidiService",methods:{bidiAppend:{name:"BidiAppend",I:yyr,O:wyr,kind:Ze.Unary}}};yet(),xr();var XHs={typeName:"aiserver.v1.FileSyncService",methods:{fSUploadFile:{name:"FSUploadFile",I:CFt,O:SFt,kind:Ze.Unary},fSSyncFile:{name:"FSSyncFile",I:xFt,O:kFt,kind:Ze.Unary},fSIsEnabledForUser:{name:"FSIsEnabledForUser",I:Sqi,O:xqi,kind:Ze.Unary},fSConfig:{name:"FSConfig",I:Rqi,O:Aqi,kind:Ze.Unary},fSGetFileContents:{name:"FSGetFileContents",I:kqi,O:Eqi,kind:Ze.Unary},fSGetMultiFileContents:{name:"FSGetMultiFileContents",I:Dqi,O:Lqi,kind:Ze.Unary},fSInternalSyncFile:{name:"FSInternalSyncFile",I:xFt,O:kFt,kind:Ze.Unary},fSInternalUploadFile:{name:"FSInternalUploadFile",I:CFt,O:SFt,kind:Ze.Unary},fSInternalHealthCheck:{name:"FSInternalHealthCheck",I:Pqi,O:Nqi,kind:Ze.Unary}}};GFt(),xr();var QHs={typeName:"aiserver.v1.LinterService",methods:{lintFile:{name:"LintFile",I:tGi,O:sGi,kind:Ze.Unary},lintChunk:{name:"LintChunk",I:XJi,O:QJi,kind:Ze.Unary},lintFimChunk:{name:"LintFimChunk",I:ZJi,O:eGi,kind:Ze.Unary},lintExplanation:{name:"LintExplanation",I:zFt,O:KJi,kind:Ze.ServerStreaming},lintExplanation2:{name:"LintExplanation2",I:zFt,O:YJi,kind:Ze.Unary}}};xr();var ZHs={typeName:"aiserver.v1.MetricsService",methods:{reportIncrement:{name:"ReportIncrement",I:jat,O:zat,kind:Ze.Unary},reportDecrement:{name:"ReportDecrement",I:jat,O:zat,kind:Ze.Unary},reportDistribution:{name:"ReportDistribution",I:jat,O:zat,kind:Ze.Unary},reportGauge:{name:"ReportGauge",I:jat,O:zat,kind:Ze.Unary}}},wri={typeName:"aiserver.v1.ProfilingService",methods:{submitProfile:{name:"SubmitProfile",I:S1s,O:ptr,kind:Ze.Unary}}};xr();var hne=class tJe extends R{constructor(e){super(),this.data={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.EventData"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"string_value",kind:"scalar",T:9,oneof:"data"},{no:2,name:"int_value",kind:"scalar",T:3,oneof:"data"},{no:3,name:"bool_value",kind:"scalar",T:8,oneof:"data"},{no:4,name:"double_value",kind:"scalar",T:1,oneof:"data"}])}static fromBinary(e,t){return new tJe().fromBinary(e,t)}static fromJson(e,t){return new tJe().fromJson(e,t)}static fromJsonString(e,t){return new tJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(tJe,e,t)}},w6r=class iJe extends R{constructor(e){super(),this.eventName="",this.eventData={},this.timestamp=Ed.zero,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AnalyticsEvent"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"event_name",kind:"scalar",T:9},{no:2,name:"event_data",kind:"map",K:9,V:{kind:"message",T:hne}},{no:3,name:"timestamp",kind:"scalar",T:3}])}static fromBinary(e,t){return new iJe().fromBinary(e,t)}static fromJson(e,t){return new iJe().fromJson(e,t)}static fromJsonString(e,t){return new iJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(iJe,e,t)}},C6r=class sJe extends R{constructor(e){super(),this.events=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TrackEventsRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"events",kind:"message",T:w6r,repeated:!0}])}static fromBinary(e,t){return new sJe().fromBinary(e,t)}static fromJson(e,t){return new sJe().fromJson(e,t)}static fromJsonString(e,t){return new sJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(sJe,e,t)}},S6r=class nJe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TrackEventsResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new nJe().fromBinary(e,t)}static fromJson(e,t){return new nJe().fromJson(e,t)}static fromJsonString(e,t){return new nJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(nJe,e,t)}};xr();var Cri={typeName:"aiserver.v1.AnalyticsService",methods:{trackEvents:{name:"TrackEvents",I:C6r,O:S6r,kind:Ze.Unary}}};Ecs(),xr();var OJ;(function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.TERMINAL_AGENT=1]="TERMINAL_AGENT",i[i.WEB_AGENT=2]="WEB_AGENT",i[i.PROGRAMMER_AGENT=3]="PROGRAMMER_AGENT"})(OJ||(OJ={})),m.util.setEnumType(OJ,"aiserver.v1.SubAgent",[{no:0,name:"SUB_AGENT_UNSPECIFIED"},{no:1,name:"SUB_AGENT_TERMINAL_AGENT"},{no:2,name:"SUB_AGENT_WEB_AGENT"},{no:3,name:"SUB_AGENT_PROGRAMMER_AGENT"}]);var x6r=class rJe extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"action",kind:"message",T:k6r,oneof:"response"},{no:2,name:"done",kind:"message",T:eWs,oneof:"response"},{no:3,name:"stream_thought",kind:"message",T:G6r,oneof:"response"},{no:4,name:"start_sub_agent",kind:"message",T:J6r,oneof:"response"},{no:5,name:"done_sub_agent",kind:"message",T:z6r,oneof:"response"},{no:10,name:"raw_response",kind:"message",T:E6r,oneof:"response"},{no:11,name:"paused",kind:"message",T:H6r,oneof:"response"}])}static fromBinary(e,t){return new rJe().fromBinary(e,t)}static fromJson(e,t){return new rJe().fromJson(e,t)}static fromJsonString(e,t){return new rJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(rJe,e,t)}},k6r=class oJe extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotActionResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"terminal_command",kind:"message",T:V6r,oneof:"response"},{no:2,name:"web_search",kind:"message",T:B6r,oneof:"response"},{no:3,name:"ask_user",kind:"message",T:O6r,oneof:"response"},{no:4,name:"ask_oracle",kind:"message",T:$6r,oneof:"response"},{no:5,name:"file_edit",kind:"message",T:A6r,oneof:"response"},{no:6,name:"open_file",kind:"message",T:N6r,oneof:"response"}])}static fromBinary(e,t){return new oJe().fromBinary(e,t)}static fromJson(e,t){return new oJe().fromJson(e,t)}static fromJsonString(e,t){return new oJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(oJe,e,t)}},E6r=class aJe extends R{constructor(e){super(),this.response="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.RawResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response",kind:"scalar",T:9}])}static fromBinary(e,t){return new aJe().fromBinary(e,t)}static fromJson(e,t){return new aJe().fromJson(e,t)}static fromJsonString(e,t){return new aJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(aJe,e,t)}},I6r=class lJe extends R{constructor(e){super(),this.requestId="",this.workingDirectory="",this.currentDirectoryFiles=[],this.relatedFiles=[],this.request={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:7,name:"working_directory",kind:"scalar",T:9},{no:8,name:"current_directory_files",kind:"scalar",T:9,repeated:!0},{no:9,name:"related_files",kind:"message",T:D6r,repeated:!0},{no:4,name:"action",kind:"message",T:T6r,oneof:"request"},{no:5,name:"start",kind:"message",T:q6r,oneof:"request"},{no:11,name:"pause",kind:"message",T:W6r,oneof:"request"},{no:6,name:"done",kind:"message",T:eWs,oneof:"request"},{no:12,name:"continue",kind:"message",T:j6r,oneof:"request"},{no:10,name:"error",kind:"message",T:L6r,oneof:"request"}])}static fromBinary(e,t){return new lJe().fromBinary(e,t)}static fromJson(e,t){return new lJe().fromJson(e,t)}static fromJsonString(e,t){return new lJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(lJe,e,t)}},D6r=class cJe extends R{constructor(e){super(),this.absolutePath="",this.content="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotFile"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"content",kind:"scalar",T:9}])}static fromBinary(e,t){return new cJe().fromBinary(e,t)}static fromJson(e,t){return new cJe().fromJson(e,t)}static fromJsonString(e,t){return new cJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(cJe,e,t)}},T6r=class uJe extends R{constructor(e){super(),this.type={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotActionRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"terminal_command",kind:"message",T:U6r,oneof:"type"},{no:2,name:"web_search",kind:"message",T:_6r,oneof:"type"},{no:3,name:"ask_user",kind:"message",T:F6r,oneof:"type"},{no:4,name:"ask_oracle",kind:"message",T:M6r,oneof:"type"},{no:5,name:"file_edit",kind:"message",T:R6r,oneof:"type"},{no:6,name:"open_file",kind:"message",T:P6r,oneof:"type"}])}static fromBinary(e,t){return new uJe().fromBinary(e,t)}static fromJson(e,t){return new uJe().fromJson(e,t)}static fromJsonString(e,t){return new uJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(uJe,e,t)}},L6r=class hJe extends R{constructor(e){super(),this.error="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotError"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"error",kind:"scalar",T:9}])}static fromBinary(e,t){return new hJe().fromBinary(e,t)}static fromJson(e,t){return new hJe().fromJson(e,t)}static fromJsonString(e,t){return new hJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(hJe,e,t)}},P6r=class dJe extends R{constructor(e){super(),this.content="",this.absolutePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.OpenFileRequest"}static{this.fields=m.util.newFieldList(()=>[{no:2,name:"content",kind:"scalar",T:9},{no:1,name:"absolute_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new dJe().fromBinary(e,t)}static fromJson(e,t){return new dJe().fromJson(e,t)}static fromJsonString(e,t){return new dJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(dJe,e,t)}},N6r=class fJe extends R{constructor(e){super(),this.absolutePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.OpenFileResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new fJe().fromBinary(e,t)}static fromJson(e,t){return new fJe().fromJson(e,t)}static fromJsonString(e,t){return new fJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(fJe,e,t)}},R6r=class gJe extends R{constructor(e){super(),this.diff="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.FileEditRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"diff",kind:"scalar",T:9}])}static fromBinary(e,t){return new gJe().fromBinary(e,t)}static fromJson(e,t){return new gJe().fromJson(e,t)}static fromJsonString(e,t){return new gJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(gJe,e,t)}},A6r=class pJe extends R{constructor(e){super(),this.absolutePath="",this.query="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.FileEditResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"query",kind:"scalar",T:9}])}static fromBinary(e,t){return new pJe().fromBinary(e,t)}static fromJson(e,t){return new pJe().fromJson(e,t)}static fromJsonString(e,t){return new pJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(pJe,e,t)}},M6r=class mJe extends R{constructor(e){super(),this.answer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AskOracleRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"answer",kind:"scalar",T:9}])}static fromBinary(e,t){return new mJe().fromBinary(e,t)}static fromJson(e,t){return new mJe().fromJson(e,t)}static fromJsonString(e,t){return new mJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(mJe,e,t)}},$6r=class bJe extends R{constructor(e){super(),this.question="",this.originalSubAgent=OJ.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AskOracleResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"original_sub_agent",kind:"enum",T:m.getEnumType(OJ)}])}static fromBinary(e,t){return new bJe().fromBinary(e,t)}static fromJson(e,t){return new bJe().fromJson(e,t)}static fromJsonString(e,t){return new bJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(bJe,e,t)}},F6r=class vJe extends R{constructor(e){super(),this.answer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AskUserRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"answer",kind:"scalar",T:9}])}static fromBinary(e,t){return new vJe().fromBinary(e,t)}static fromJson(e,t){return new vJe().fromJson(e,t)}static fromJsonString(e,t){return new vJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(vJe,e,t)}},O6r=class yJe extends R{constructor(e){super(),this.question="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AskUserResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"question",kind:"scalar",T:9}])}static fromBinary(e,t){return new yJe().fromBinary(e,t)}static fromJson(e,t){return new yJe().fromJson(e,t)}static fromJsonString(e,t){return new yJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(yJe,e,t)}},_6r=class wJe extends R{constructor(e){super(),this.query="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WebSearchRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"query",kind:"scalar",T:9}])}static fromBinary(e,t){return new wJe().fromBinary(e,t)}static fromJson(e,t){return new wJe().fromJson(e,t)}static fromJsonString(e,t){return new wJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(wJe,e,t)}},B6r=class CJe extends R{constructor(e){super(),this.answer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WebSearchResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"answer",kind:"scalar",T:9}])}static fromBinary(e,t){return new CJe().fromBinary(e,t)}static fromJson(e,t){return new CJe().fromJson(e,t)}static fromJsonString(e,t){return new CJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(CJe,e,t)}},U6r=class SJe extends R{constructor(e){super(),this.response="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TerminalCommandRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response",kind:"scalar",T:9}])}static fromBinary(e,t){return new SJe().fromBinary(e,t)}static fromJson(e,t){return new SJe().fromJson(e,t)}static fromJsonString(e,t){return new SJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(SJe,e,t)}},V6r=class xJe extends R{constructor(e){super(),this.command="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TerminalCommandResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"command",kind:"scalar",T:9},{no:2,name:"timeout",kind:"scalar",T:1,opt:!0},{no:3,name:"is_run_server",kind:"scalar",T:8,opt:!0}])}static fromBinary(e,t){return new xJe().fromBinary(e,t)}static fromJson(e,t){return new xJe().fromJson(e,t)}static fromJsonString(e,t){return new xJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(xJe,e,t)}},H6r=class kJe extends R{constructor(e){super(),this.response="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotPaused"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response",kind:"scalar",T:9}])}static fromBinary(e,t){return new kJe().fromBinary(e,t)}static fromJson(e,t){return new kJe().fromJson(e,t)}static fromJsonString(e,t){return new kJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(kJe,e,t)}},W6r=class EJe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotPause"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new EJe().fromBinary(e,t)}static fromJson(e,t){return new EJe().fromJson(e,t)}static fromJsonString(e,t){return new EJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(EJe,e,t)}},q6r=class IJe extends R{constructor(e){super(),this.task="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotStart"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"task",kind:"scalar",T:9}])}static fromBinary(e,t){return new IJe().fromBinary(e,t)}static fromJson(e,t){return new IJe().fromJson(e,t)}static fromJsonString(e,t){return new IJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(IJe,e,t)}},j6r=class DJe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotContinue"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new DJe().fromBinary(e,t)}static fromJson(e,t){return new DJe().fromJson(e,t)}static fromJsonString(e,t){return new DJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(DJe,e,t)}},eWs=class TJe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotDone"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new TJe().fromBinary(e,t)}static fromJson(e,t){return new TJe().fromJson(e,t)}static fromJsonString(e,t){return new TJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(TJe,e,t)}},z6r=class LJe extends R{constructor(e){super(),this.response="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotDoneSubAgent"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response",kind:"scalar",T:9}])}static fromBinary(e,t){return new LJe().fromBinary(e,t)}static fromJson(e,t){return new LJe().fromJson(e,t)}static fromJsonString(e,t){return new LJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(LJe,e,t)}},J6r=class PJe extends R{constructor(e){super(),this.task="",this.subAgent=OJ.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotStartSubAgent"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"task",kind:"scalar",T:9},{no:2,name:"sub_agent",kind:"enum",T:m.getEnumType(OJ)}])}static fromBinary(e,t){return new PJe().fromBinary(e,t)}static fromJson(e,t){return new PJe().fromJson(e,t)}static fromJsonString(e,t){return new PJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(PJe,e,t)}},G6r=class NJe extends R{constructor(e){super(),this.thought="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AutopilotStreamThought"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"thought",kind:"scalar",T:9}])}static fromBinary(e,t){return new NJe().fromBinary(e,t)}static fromJson(e,t){return new NJe().fromJson(e,t)}static fromJsonString(e,t){return new NJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(NJe,e,t)}};xr();var tWs={typeName:"aiserver.v1.AutopilotService",methods:{streamAutopilot:{name:"StreamAutopilot",I:I6r,O:x6r,kind:Ze.ServerStreaming}}};xr();var iWs=class RJe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetDebuggingDataUploadUrlRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new RJe().fromBinary(e,t)}static fromJson(e,t){return new RJe().fromJson(e,t)}static fromJsonString(e,t){return new RJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(RJe,e,t)}},sWs=class AJe extends R{constructor(e){super(),this.url="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetDebuggingDataUploadUrlResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"url",kind:"scalar",T:9}])}static fromBinary(e,t){return new AJe().fromBinary(e,t)}static fromJson(e,t){return new AJe().fromJson(e,t)}static fromJsonString(e,t){return new AJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(AJe,e,t)}},K6r=class MJe extends R{constructor(e){super(),this.stackTrace="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.LogWhenTabTurnsOffRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"stack_trace",kind:"scalar",T:9}])}static fromBinary(e,t){return new MJe().fromBinary(e,t)}static fromJson(e,t){return new MJe().fromJson(e,t)}static fromJsonString(e,t){return new MJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(MJe,e,t)}},nWs=class $Je extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.LogWhenTabTurnsOffResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new $Je().fromBinary(e,t)}static fromJson(e,t){return new $Je().fromJson(e,t)}static fromJsonString(e,t){return new $Je().fromJsonString(e,t)}static equals(e,t){return m.util.equals($Je,e,t)}};xr();var Sri={typeName:"aiserver.v1.ClientLoggerService",methods:{getDebuggingDataUploadUrl:{name:"GetDebuggingDataUploadUrl",I:iWs,O:sWs,kind:Ze.Unary},logWhenTabTurnsOff:{name:"LogWhenTabTurnsOff",I:K6r,O:nWs,kind:Ze.Unary}}};xr(),fw(),co();var Y6r=class FJe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ConversationAiMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new FJe().fromBinary(e,t)}static fromJson(e,t){return new FJe().fromJson(e,t)}static fromJsonString(e,t){return new FJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(FJe,e,t)}},X6r=class OJe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ConversationUserMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new OJe().fromBinary(e,t)}static fromJson(e,t){return new OJe().fromJson(e,t)}static fromJsonString(e,t){return new OJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(OJe,e,t)}},Q6r=class _Je extends R{constructor(e){super(),this.targetFilePath="",this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AssistantConversationEditToolCall"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"target_file_path",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new _Je().fromBinary(e,t)}static fromJson(e,t){return new _Je().fromJson(e,t)}static fromJsonString(e,t){return new _Je().fromJsonString(e,t)}static equals(e,t){return m.util.equals(_Je,e,t)}},Z6r=class BJe extends R{constructor(e){super(),this.query="",this.result="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AssistantConversationSearchToolCall"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"query",kind:"scalar",T:9},{no:2,name:"result",kind:"scalar",T:9}])}static fromBinary(e,t){return new BJe().fromBinary(e,t)}static fromJson(e,t){return new BJe().fromJson(e,t)}static fromJsonString(e,t){return new BJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(BJe,e,t)}},e8r=class UJe extends R{constructor(e){super(),this.content="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AssistantConversationReadFileToolCall"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"content",kind:"scalar",T:9}])}static fromBinary(e,t){return new UJe().fromBinary(e,t)}static fromJson(e,t){return new UJe().fromJson(e,t)}static fromJsonString(e,t){return new UJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(UJe,e,t)}},t8r=class VJe extends R{constructor(e){super(),this.content="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.AssistantConversationRunTerminalToolCall"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"content",kind:"scalar",T:9}])}static fromBinary(e,t){return new VJe().fromBinary(e,t)}static fromJson(e,t){return new VJe().fromJson(e,t)}static fromJsonString(e,t){return new VJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(VJe,e,t)}},i8r=class HJe extends R{constructor(e){super(),this.toolCall={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ConversationToolCall"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"edit",kind:"message",T:Q6r,oneof:"tool_call"},{no:2,name:"search",kind:"message",T:Z6r,oneof:"tool_call"},{no:3,name:"read_file",kind:"message",T:e8r,oneof:"tool_call"},{no:4,name:"run_terminal",kind:"message",T:t8r,oneof:"tool_call"}])}static fromBinary(e,t){return new HJe().fromBinary(e,t)}static fromJson(e,t){return new HJe().fromJson(e,t)}static fromJsonString(e,t){return new HJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(HJe,e,t)}},rWs=class WJe extends R{constructor(e){super(),this.message={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ConversationHistoryMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"ai",kind:"message",T:Y6r,oneof:"message"},{no:3,name:"ai_tool_call",kind:"message",T:i8r,oneof:"message"},{no:2,name:"user",kind:"message",T:X6r,oneof:"message"}])}static fromBinary(e,t){return new WJe().fromBinary(e,t)}static fromJson(e,t){return new WJe().fromJson(e,t)}static fromJsonString(e,t){return new WJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(WJe,e,t)}},s8r=class qJe extends R{constructor(e){super(),this.sessionId="",this.shouldQueryStaging=!1,this.shouldQueryProd=!1,this.encryptionKey=new Uint8Array(0),this.initialQuery="",this.initialConversationHistory=[],this.initialAttachedFiles=[],this.initialRecentlyViewedFiles=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientInitMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"session_id",kind:"scalar",T:9},{no:2,name:"repository",kind:"message",T:al},{no:3,name:"should_query_staging",kind:"scalar",T:8},{no:5,name:"should_query_prod",kind:"scalar",T:8},{no:4,name:"encryption_key",kind:"scalar",T:12},{no:6,name:"initial_query",kind:"scalar",T:9},{no:7,name:"initial_conversation_history",kind:"message",T:rWs,repeated:!0},{no:8,name:"initial_attached_files",kind:"scalar",T:9,repeated:!0},{no:9,name:"initial_recently_viewed_files",kind:"message",T:oWs,repeated:!0}])}static fromBinary(e,t){return new qJe().fromBinary(e,t)}static fromJson(e,t){return new qJe().fromJson(e,t)}static fromJsonString(e,t){return new qJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(qJe,e,t)}},n8r=class jJe extends R{constructor(e){super(),this.messages=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientConversationHistoryUpdateMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"messages",kind:"message",T:rWs,repeated:!0}])}static fromBinary(e,t){return new jJe().fromBinary(e,t)}static fromJson(e,t){return new jJe().fromJson(e,t)}static fromJsonString(e,t){return new jJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(jJe,e,t)}},r8r=class zJe extends R{constructor(e){super(),this.attachedFiles=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientAttachedFilesUpdateMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"attached_files",kind:"message",T:o8r,repeated:!0}])}static fromBinary(e,t){return new zJe().fromBinary(e,t)}static fromJson(e,t){return new zJe().fromJson(e,t)}static fromJsonString(e,t){return new zJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(zJe,e,t)}},o8r=class JJe extends R{constructor(e){super(),this.relativePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientAttachedFilesUpdateMessage.AttachedFile"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new JJe().fromBinary(e,t)}static fromJson(e,t){return new JJe().fromJson(e,t)}static fromJsonString(e,t){return new JJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(JJe,e,t)}},oWs=class GJe extends R{constructor(e){super(),this.encryptedRelativePath="",this.relativePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientRecentlyViewedFileMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"encrypted_relative_path",kind:"scalar",T:9},{no:2,name:"relative_path",kind:"scalar",T:9},{no:3,name:"last_viewed",kind:"message",T:EH}])}static fromBinary(e,t){return new GJe().fromBinary(e,t)}static fromJson(e,t){return new GJe().fromJson(e,t)}static fromJsonString(e,t){return new GJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(GJe,e,t)}},a8r=class KJe extends R{constructor(e){super(),this.sessionVersion=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientUpdateMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"query",kind:"scalar",T:9,opt:!0},{no:2,name:"conversation_history",kind:"message",T:n8r,opt:!0},{no:3,name:"attached_files",kind:"message",T:r8r,opt:!0},{no:4,name:"recently_viewed_file",kind:"message",T:oWs,opt:!0},{no:6,name:"session_version",kind:"scalar",T:13}])}static fromBinary(e,t){return new KJe().fromBinary(e,t)}static fromJson(e,t){return new KJe().fromJson(e,t)}static fromJsonString(e,t){return new KJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(KJe,e,t)}},l8r=class YJe extends R{constructor(e){super(),this.relativePath="",this.decryptedRelativePath="",this.content="",this.currentVersion=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientRequestFileResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9},{no:2,name:"decrypted_relative_path",kind:"scalar",T:9},{no:3,name:"content",kind:"scalar",T:9},{no:4,name:"current_version",kind:"scalar",T:13}])}static fromBinary(e,t){return new YJe().fromBinary(e,t)}static fromJson(e,t){return new YJe().fromJson(e,t)}static fromJsonString(e,t){return new YJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(YJe,e,t)}},c8r=class XJe extends R{constructor(e){super(),this.relativePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientUntrackRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new XJe().fromBinary(e,t)}static fromJson(e,t){return new XJe().fromJson(e,t)}static fromJsonString(e,t){return new XJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(XJe,e,t)}},u8r=class QJe extends R{constructor(e){super(),this.startLineNumber=0,this.startColumn=0,this.endLineNumber=0,this.endColumn=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TextChangeRange"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"start_line_number",kind:"scalar",T:5},{no:2,name:"start_column",kind:"scalar",T:5},{no:3,name:"end_line_number",kind:"scalar",T:5},{no:4,name:"end_column",kind:"scalar",T:5}])}static fromBinary(e,t){return new QJe().fromBinary(e,t)}static fromJson(e,t){return new QJe().fromJson(e,t)}static fromJsonString(e,t){return new QJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(QJe,e,t)}},h8r=class ZJe extends R{constructor(e){super(),this.rangeOffset=0,this.rangeLength=0,this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.TextChange"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"range_offset",kind:"scalar",T:5},{no:2,name:"range_length",kind:"scalar",T:5},{no:3,name:"range",kind:"message",T:u8r},{no:4,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new ZJe().fromBinary(e,t)}static fromJson(e,t){return new ZJe().fromJson(e,t)}static fromJsonString(e,t){return new ZJe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(ZJe,e,t)}},d8r=class eGe extends R{constructor(e){super(),this.relativePath="",this.changes=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientTextChangeNotification"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9},{no:2,name:"changes",kind:"message",T:h8r,repeated:!0}])}static fromBinary(e,t){return new eGe().fromBinary(e,t)}static fromJson(e,t){return new eGe().fromJson(e,t)}static fromJsonString(e,t){return new eGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(eGe,e,t)}},f8r=class tGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientSubmitIntentNotification"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new tGe().fromBinary(e,t)}static fromJson(e,t){return new tGe().fromJson(e,t)}static fromJsonString(e,t){return new tGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(tGe,e,t)}},g8r=class iGe extends R{constructor(e){super(),this.prefersInteractive=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientInteractiveIntentNotification"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"prefers_interactive",kind:"scalar",T:8}])}static fromBinary(e,t){return new iGe().fromBinary(e,t)}static fromJson(e,t){return new iGe().fromJson(e,t)}static fromJsonString(e,t){return new iGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(iGe,e,t)}},p8r=class sGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientSubmitHintNotification"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new sGe().fromBinary(e,t)}static fromJson(e,t){return new sGe().fromJson(e,t)}static fromJsonString(e,t){return new sGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(sGe,e,t)}},m8r=class nGe extends R{constructor(e){super(),this.message={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankClientMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"init",kind:"message",T:s8r,oneof:"message"},{no:2,name:"update",kind:"message",T:a8r,oneof:"message"},{no:5,name:"request_file_response",kind:"message",T:l8r,oneof:"message"},{no:6,name:"untrack_request",kind:"message",T:c8r,oneof:"message"},{no:7,name:"change_notification",kind:"message",T:d8r,oneof:"message"},{no:8,name:"submit_intent",kind:"message",T:f8r,oneof:"message"},{no:10,name:"submit_hint",kind:"message",T:p8r,oneof:"message"},{no:9,name:"interactive_intent",kind:"message",T:g8r,oneof:"message"}])}static fromBinary(e,t){return new nGe().fromBinary(e,t)}static fromJson(e,t){return new nGe().fromJson(e,t)}static fromJsonString(e,t){return new nGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(nGe,e,t)}},b8r=class rGe extends R{constructor(e){super(),this.relativePath="",this.currentVersion=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankServerRequestFileRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9},{no:2,name:"current_version",kind:"scalar",T:13}])}static fromBinary(e,t){return new rGe().fromBinary(e,t)}static fromJson(e,t){return new rGe().fromJson(e,t)}static fromJsonString(e,t){return new rGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(rGe,e,t)}},v8r=class oGe extends R{constructor(e){super(),this.relativePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankServerUntrackRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new oGe().fromBinary(e,t)}static fromJson(e,t){return new oGe().fromJson(e,t)}static fromJsonString(e,t){return new oGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(oGe,e,t)}},y8r=class aGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SimpleChunk"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"start",kind:"message",T:$m},{no:2,name:"end",kind:"message",T:$m}])}static fromBinary(e,t){return new aGe().fromBinary(e,t)}static fromJson(e,t){return new aGe().fromJson(e,t)}static fromJsonString(e,t){return new aGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(aGe,e,t)}},w8r=class lGe extends R{constructor(e){super(),this.relativePath="",this.currentVersion=0,this.chunks=[],this.totalChunkCount=0,this.score=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankCandidateStatus"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_path",kind:"scalar",T:9},{no:2,name:"current_version",kind:"scalar",T:13},{no:3,name:"chunks",kind:"message",T:y8r,repeated:!0},{no:4,name:"total_chunk_count",kind:"scalar",T:13},{no:5,name:"score",kind:"scalar",T:13}])}static fromBinary(e,t){return new lGe().fromBinary(e,t)}static fromJson(e,t){return new lGe().fromJson(e,t)}static fromJsonString(e,t){return new lGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(lGe,e,t)}},C8r=class cGe extends R{constructor(e){super(),this.candidateStatuses=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankServerStatusUpdateMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"current_version",kind:"scalar",T:13,opt:!0},{no:2,name:"candidate_statuses",kind:"message",T:w8r,repeated:!0}])}static fromBinary(e,t){return new cGe().fromBinary(e,t)}static fromJson(e,t){return new cGe().fromJson(e,t)}static fromJsonString(e,t){return new cGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(cGe,e,t)}},S8r=class uGe extends R{constructor(e){super(),this.message={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ContextBankServerMessage"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"file_request",kind:"message",T:b8r,oneof:"message"},{no:2,name:"status_update",kind:"message",T:C8r,oneof:"message"},{no:3,name:"untrack_request",kind:"message",T:v8r,oneof:"message"}])}static fromBinary(e,t){return new uGe().fromBinary(e,t)}static fromJson(e,t){return new uGe().fromJson(e,t)}static fromJsonString(e,t){return new uGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(uGe,e,t)}};xr();var aWs={typeName:"aiserver.v1.ContextBankService",methods:{createContextBankSession:{name:"CreateContextBankSession",I:m8r,O:S8r,kind:Ze.BiDiStreaming}}};xr();var x8r=class hGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CursorPredictionConfigRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new hGe().fromBinary(e,t)}static fromJson(e,t){return new hGe().fromJson(e,t)}static fromJsonString(e,t){return new hGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(hGe,e,t)}},k8r=class dGe extends R{constructor(e){super(),this.name="",this.radius=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CursorPredictionModel"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"name",kind:"scalar",T:9},{no:2,name:"radius",kind:"scalar",T:5}])}static fromBinary(e,t){return new dGe().fromBinary(e,t)}static fromJson(e,t){return new dGe().fromJson(e,t)}static fromJsonString(e,t){return new dGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(dGe,e,t)}},E8r=class fGe extends R{constructor(e){super(),this.models=[],this.defaultModel="",this.heuristics=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CursorPredictionConfigResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"models",kind:"message",T:k8r,repeated:!0},{no:2,name:"default_model",kind:"scalar",T:9},{no:3,name:"heuristics",kind:"enum",T:m.getEnumType(L0e),repeated:!0}])}static fromBinary(e,t){return new fGe().fromBinary(e,t)}static fromJson(e,t){return new fGe().fromJson(e,t)}static fromJsonString(e,t){return new fGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(fGe,e,t)}},L0e;(function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.DISABLE_IN_LAST_CPP_SUGGESTION=1]="DISABLE_IN_LAST_CPP_SUGGESTION"})(L0e||(L0e={})),m.util.setEnumType(L0e,"aiserver.v1.CursorPredictionConfigResponse.Heuristic",[{no:0,name:"HEURISTIC_UNSPECIFIED"},{no:1,name:"HEURISTIC_DISABLE_IN_LAST_CPP_SUGGESTION"}]),xr();var xri={typeName:"aiserver.v1.CursorPredictionService",methods:{cursorPredictionConfig:{name:"CursorPredictionConfig",I:x8r,O:E8r,kind:Ze.Unary}}};q4t(),xr(),au(),co();var I8r=class gGe extends R{constructor(e){super(),this.files=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.FileFilterRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"files",kind:"message",T:LN,repeated:!0},{no:2,name:"bug_description",kind:"message",T:Fc}])}static fromBinary(e,t){return new gGe().fromBinary(e,t)}static fromJson(e,t){return new gGe().fromJson(e,t)}static fromJsonString(e,t){return new gGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(gGe,e,t)}},D8r=class pGe extends R{constructor(e){super(),this.filePath="",this.fileScore=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.FileFilterResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"file_path",kind:"scalar",T:9},{no:2,name:"file_score",kind:"scalar",T:2}])}static fromBinary(e,t){return new pGe().fromBinary(e,t)}static fromJson(e,t){return new pGe().fromJson(e,t)}static fromJsonString(e,t){return new pGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(pGe,e,t)}},T8r=class mGe extends R{constructor(e){super(),this.commits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitFilterRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"commits",kind:"message",T:NN,repeated:!0},{no:2,name:"bug_description",kind:"message",T:Fc}])}static fromBinary(e,t){return new mGe().fromBinary(e,t)}static fromJson(e,t){return new mGe().fromJson(e,t)}static fromJsonString(e,t){return new mGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(mGe,e,t)}},L8r=class bGe extends R{constructor(e){super(),this.relevantCommit="",this.commitScore=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitFilterResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relevant_commit",kind:"scalar",T:9},{no:2,name:"commit_score",kind:"scalar",T:2}])}static fromBinary(e,t){return new bGe().fromBinary(e,t)}static fromJson(e,t){return new bGe().fromJson(e,t)}static fromJsonString(e,t){return new bGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(bGe,e,t)}},P8r=class vGe extends R{constructor(e){super(),this.relevantCommits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.BugAnalysisRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relevant_commits",kind:"message",T:NN,repeated:!0},{no:2,name:"bug_description_and_file_attachments",kind:"message",T:Fc},{no:3,name:"model_details",kind:"message",T:Ea}])}static fromBinary(e,t){return new vGe().fromBinary(e,t)}static fromJson(e,t){return new vGe().fromJson(e,t)}static fromJsonString(e,t){return new vGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(vGe,e,t)}},N8r=class yGe extends R{constructor(e){super(),this.reasoning="",this.bugDescription="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.BugAnalysisResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"reasoning",kind:"scalar",T:9},{no:2,name:"bug_description",kind:"scalar",T:9}])}static fromBinary(e,t){return new yGe().fromBinary(e,t)}static fromJson(e,t){return new yGe().fromJson(e,t)}static fromJsonString(e,t){return new yGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(yGe,e,t)}};xr();var lWs={typeName:"aiserver.v1.DebuggerService",methods:{gitFilter:{name:"GitFilter",I:T8r,O:L8r,kind:Ze.ServerStreaming},fileFilter:{name:"FileFilter",I:I8r,O:D8r,kind:Ze.ServerStreaming},bugAnalysis:{name:"BugAnalysis",I:P8r,O:N8r,kind:Ze.ServerStreaming}}};xr();var R8r=class wGe extends R{constructor(e){super(),this.rootSha="",this.searchKey="",this.verifyCommit="",this.verifyValue="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"root_sha",kind:"scalar",T:9},{no:2,name:"search_key",kind:"scalar",T:9},{no:3,name:"verify_commit",kind:"scalar",T:9},{no:4,name:"verify_value",kind:"scalar",T:9}])}static fromBinary(e,t){return new wGe().fromBinary(e,t)}static fromJson(e,t){return new wGe().fromJson(e,t)}static fromJsonString(e,t){return new wGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(wGe,e,t)}},A8r=class CGe extends R{constructor(e){super(),this.response={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"created",kind:"message",T:cWs,oneof:"response"},{no:2,name:"challenge",kind:"message",T:M8r,oneof:"response"}])}static fromBinary(e,t){return new CGe().fromBinary(e,t)}static fromJson(e,t){return new CGe().fromJson(e,t)}static fromJsonString(e,t){return new CGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(CGe,e,t)}},M8r=class SGe extends R{constructor(e){super(),this.verifyCommits=[],this.rootCommits=[],this.visitedCommits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphResponse.Challenge"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"verify_commits",kind:"scalar",T:9,repeated:!0},{no:2,name:"root_commits",kind:"scalar",T:9,repeated:!0},{no:3,name:"visited_commits",kind:"message",T:$8r,repeated:!0}])}static fromBinary(e,t){return new SGe().fromBinary(e,t)}static fromJson(e,t){return new SGe().fromJson(e,t)}static fromJsonString(e,t){return new SGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(SGe,e,t)}},$8r=class xGe extends R{constructor(e){super(),this.visitedCommits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphResponse.Challenge.VisitedCommits"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"visited_commits",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new xGe().fromBinary(e,t)}static fromJson(e,t){return new xGe().fromJson(e,t)}static fromJsonString(e,t){return new xGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(xGe,e,t)}},cWs=class kGe extends R{constructor(e){super(),this.workspaceId="",this.verifyCommit="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitGraphCreated"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"verify_commit",kind:"scalar",T:9}])}static fromBinary(e,t){return new kGe().fromBinary(e,t)}static fromJson(e,t){return new kGe().fromJson(e,t)}static fromJsonString(e,t){return new kGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(kGe,e,t)}},F8r=class EGe extends R{constructor(e){super(),this.rootSha="",this.searchKey="",this.responses=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphChallengeRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"root_sha",kind:"scalar",T:9},{no:2,name:"search_key",kind:"scalar",T:9},{no:3,name:"responses",kind:"message",T:O8r,repeated:!0}])}static fromBinary(e,t){return new EGe().fromBinary(e,t)}static fromJson(e,t){return new EGe().fromJson(e,t)}static fromJsonString(e,t){return new EGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(EGe,e,t)}},O8r=class IGe extends R{constructor(e){super(),this.verifyCommit="",this.verifyValue="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphChallengeRequest.Response"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"verify_commit",kind:"scalar",T:9},{no:2,name:"verify_value",kind:"scalar",T:9}])}static fromBinary(e,t){return new IGe().fromBinary(e,t)}static fromJson(e,t){return new IGe().fromJson(e,t)}static fromJsonString(e,t){return new IGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(IGe,e,t)}},_8r=class DGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.InitGitGraphChallengeResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"created",kind:"message",T:cWs}])}static fromBinary(e,t){return new DGe().fromBinary(e,t)}static fromJson(e,t){return new DGe().fromJson(e,t)}static fromJsonString(e,t){return new DGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(DGe,e,t)}},B8r=class TGe extends R{constructor(e){super(),this.files=[],this.timestampMs=0,this.sha="",this.parentShas=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitGraphCommit"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"files",kind:"message",T:U8r,repeated:!0},{no:2,name:"timestamp_ms",kind:"scalar",T:1},{no:3,name:"sha",kind:"scalar",T:9},{no:4,name:"parent_shas",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new TGe().fromBinary(e,t)}static fromJson(e,t){return new TGe().fromJson(e,t)}static fromJsonString(e,t){return new TGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(TGe,e,t)}},U8r=class LGe extends R{constructor(e){super(),this.deletions=0,this.additions=0,this.status=P0e.UNSPECIFIED,this.encryptedFromRelativePath="",this.encryptedToRelativePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitGraphCommitFile"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"deletions",kind:"scalar",T:5},{no:2,name:"additions",kind:"scalar",T:5},{no:3,name:"status",kind:"enum",T:m.getEnumType(P0e)},{no:5,name:"encrypted_from_relative_path",kind:"scalar",T:9},{no:6,name:"encrypted_to_relative_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new LGe().fromBinary(e,t)}static fromJson(e,t){return new LGe().fromJson(e,t)}static fromJsonString(e,t){return new LGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(LGe,e,t)}},P0e;(function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.ADDED=1]="ADDED",i[i.DELETED=2]="DELETED",i[i.MODIFIED=3]="MODIFIED",i[i.RENAMED=4]="RENAMED"})(P0e||(P0e={})),m.util.setEnumType(P0e,"aiserver.v1.GitGraphCommitFile.Status",[{no:0,name:"STATUS_UNSPECIFIED"},{no:1,name:"STATUS_ADDED"},{no:2,name:"STATUS_DELETED"},{no:3,name:"STATUS_MODIFIED"},{no:4,name:"STATUS_RENAMED"}]);var V8r=class PGe extends R{constructor(e){super(),this.workspaceId="",this.commits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.BatchedUploadCommitsIntoGitGraphRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"commits",kind:"message",T:B8r,repeated:!0}])}static fromBinary(e,t){return new PGe().fromBinary(e,t)}static fromJson(e,t){return new PGe().fromJson(e,t)}static fromJsonString(e,t){return new PGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(PGe,e,t)}},H8r=class NGe extends R{constructor(e){super(),this.results=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.BatchedUploadCommitsIntoGitGraphResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"results",kind:"message",T:W8r,repeated:!0}])}static fromBinary(e,t){return new NGe().fromBinary(e,t)}static fromJson(e,t){return new NGe().fromJson(e,t)}static fromJsonString(e,t){return new NGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(NGe,e,t)}},W8r=class RGe extends R{constructor(e){super(),this.sha="",this.success=!1,this.alreadyVisited=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.BatchedUploadCommitsIntoGitGraphResponse.Result"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"sha",kind:"scalar",T:9},{no:2,name:"success",kind:"scalar",T:8},{no:3,name:"already_visited",kind:"scalar",T:8}])}static fromBinary(e,t){return new RGe().fromBinary(e,t)}static fromJson(e,t){return new RGe().fromJson(e,t)}static fromJsonString(e,t){return new RGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(RGe,e,t)}},q8r=class AGe extends R{constructor(e){super(),this.workspaceId="",this.encryptedRelativePath="",this.maxNumFiles=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetGitGraphRelatedFilesRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"encrypted_relative_path",kind:"scalar",T:9},{no:3,name:"max_num_files",kind:"scalar",T:5}])}static fromBinary(e,t){return new AGe().fromBinary(e,t)}static fromJson(e,t){return new AGe().fromJson(e,t)}static fromJsonString(e,t){return new AGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(AGe,e,t)}},j8r=class MGe extends R{constructor(e){super(),this.relatedFiles=[],this.timeTakenMs=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetGitGraphRelatedFilesResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"related_files",kind:"message",T:z8r,repeated:!0},{no:2,name:"time_taken_ms",kind:"scalar",T:2}])}static fromBinary(e,t){return new MGe().fromBinary(e,t)}static fromJson(e,t){return new MGe().fromJson(e,t)}static fromJsonString(e,t){return new MGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(MGe,e,t)}},z8r=class $Ge extends R{constructor(e){super(),this.encryptedRelativePath="",this.weight=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GitGraphRelatedFile"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"encrypted_relative_path",kind:"scalar",T:9},{no:2,name:"weight",kind:"scalar",T:1}])}static fromBinary(e,t){return new $Ge().fromBinary(e,t)}static fromJson(e,t){return new $Ge().fromJson(e,t)}static fromJsonString(e,t){return new $Ge().fromJsonString(e,t)}static equals(e,t){return m.util.equals($Ge,e,t)}},J8r=class FGe extends R{constructor(e){super(),this.workspaceId="",this.commits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.MarkPendingCommitsRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"commits",kind:"message",T:G8r,repeated:!0}])}static fromBinary(e,t){return new FGe().fromBinary(e,t)}static fromJson(e,t){return new FGe().fromJson(e,t)}static fromJsonString(e,t){return new FGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(FGe,e,t)}},G8r=class OGe extends R{constructor(e){super(),this.sha="",this.parentShas=[],this.timestampMs=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.MarkPendingCommitsRequest.Commit"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"sha",kind:"scalar",T:9},{no:2,name:"parent_shas",kind:"scalar",T:9,repeated:!0},{no:3,name:"timestamp_ms",kind:"scalar",T:1}])}static fromBinary(e,t){return new OGe().fromBinary(e,t)}static fromJson(e,t){return new OGe().fromJson(e,t)}static fromJsonString(e,t){return new OGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(OGe,e,t)}},K8r=class _Ge extends R{constructor(e){super(),this.alreadyVisitedShas=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.MarkPendingCommitsResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"already_visited_shas",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new _Ge().fromBinary(e,t)}static fromJson(e,t){return new _Ge().fromJson(e,t)}static fromJsonString(e,t){return new _Ge().fromJsonString(e,t)}static equals(e,t){return m.util.equals(_Ge,e,t)}},Y8r=class BGe extends R{constructor(e){super(),this.workspaceId="",this.maxNumCommits=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetPendingCommitsRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9},{no:2,name:"max_num_commits",kind:"scalar",T:5}])}static fromBinary(e,t){return new BGe().fromBinary(e,t)}static fromJson(e,t){return new BGe().fromJson(e,t)}static fromJsonString(e,t){return new BGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(BGe,e,t)}},X8r=class UGe extends R{constructor(e){super(),this.commits=[],this.waitBeforeUploadingMs=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetPendingCommitsResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"commits",kind:"message",T:Q8r,repeated:!0},{no:2,name:"wait_before_uploading_ms",kind:"scalar",T:2}])}static fromBinary(e,t){return new UGe().fromBinary(e,t)}static fromJson(e,t){return new UGe().fromJson(e,t)}static fromJsonString(e,t){return new UGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(UGe,e,t)}},Q8r=class VGe extends R{constructor(e){super(),this.sha="",this.parentWalkDepth=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetPendingCommitsResponse.Commit"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"sha",kind:"scalar",T:9},{no:2,name:"visited_neighbor_sha",kind:"scalar",T:9,opt:!0},{no:3,name:"parent_walk_depth",kind:"scalar",T:5}])}static fromBinary(e,t){return new VGe().fromBinary(e,t)}static fromJson(e,t){return new VGe().fromJson(e,t)}static fromJsonString(e,t){return new VGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(VGe,e,t)}},Z8r=class HGe extends R{constructor(e){super(),this.workspaceId="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.DeleteGitGraphRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}])}static fromBinary(e,t){return new HGe().fromBinary(e,t)}static fromJson(e,t){return new HGe().fromJson(e,t)}static fromJsonString(e,t){return new HGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(HGe,e,t)}},e3r=class WGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.DeleteGitGraphResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new WGe().fromBinary(e,t)}static fromJson(e,t){return new WGe().fromJson(e,t)}static fromJsonString(e,t){return new WGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(WGe,e,t)}},t3r=class qGe extends R{constructor(e){super(),this.workspaceId="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetGitGraphStatusRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"workspace_id",kind:"scalar",T:9}])}static fromBinary(e,t){return new qGe().fromBinary(e,t)}static fromJson(e,t){return new qGe().fromJson(e,t)}static fromJsonString(e,t){return new qGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(qGe,e,t)}},i3r=class jGe extends R{constructor(e){super(),this.numSuccessfulCommits=0,this.numFailedCommits=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetGitGraphStatusResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"num_successful_commits",kind:"scalar",T:5},{no:2,name:"num_failed_commits",kind:"scalar",T:5}])}static fromBinary(e,t){return new jGe().fromBinary(e,t)}static fromJson(e,t){return new jGe().fromJson(e,t)}static fromJsonString(e,t){return new jGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(jGe,e,t)}},s3r=class zGe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.IsGitGraphEnabledRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new zGe().fromBinary(e,t)}static fromJson(e,t){return new zGe().fromJson(e,t)}static fromJsonString(e,t){return new zGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(zGe,e,t)}},n3r=class JGe extends R{constructor(e){super(),this.isEnabled=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.IsGitGraphEnabledResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"is_enabled",kind:"scalar",T:8}])}static fromBinary(e,t){return new JGe().fromBinary(e,t)}static fromJson(e,t){return new JGe().fromJson(e,t)}static fromJsonString(e,t){return new JGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(JGe,e,t)}};xr();var uWs={typeName:"aiserver.v1.GitGraphService",methods:{initGitGraph:{name:"InitGitGraph",I:R8r,O:A8r,kind:Ze.Unary},initGitGraphChallenge:{name:"InitGitGraphChallenge",I:F8r,O:_8r,kind:Ze.Unary},batchedUploadCommitsIntoGitGraph:{name:"BatchedUploadCommitsIntoGitGraph",I:V8r,O:H8r,kind:Ze.Unary},getPendingCommits:{name:"GetPendingCommits",I:Y8r,O:X8r,kind:Ze.Unary},markPendingCommits:{name:"MarkPendingCommits",I:J8r,O:K8r,kind:Ze.Unary},getGitGraphRelatedFiles:{name:"GetGitGraphRelatedFiles",I:q8r,O:j8r,kind:Ze.Unary},getGitGraphStatus:{name:"GetGitGraphStatus",I:t3r,O:i3r,kind:Ze.Unary},deleteGitGraph:{name:"DeleteGitGraph",I:Z8r,O:e3r,kind:Ze.Unary},isGitGraphEnabled:{name:"IsGitGraphEnabled",I:s3r,O:n3r,kind:Ze.Unary}}};xr(),X6(),g0(),co(),yb(),fw(),uGi(),au();var kri=class GGe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.startLine=0,this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.UsefulType"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"start_line",kind:"scalar",T:5},{no:3,name:"text",kind:"scalar",T:9},{no:4,name:"score",kind:"scalar",T:1,opt:!0}])}static fromBinary(e,t){return new GGe().fromBinary(e,t)}static fromJson(e,t){return new GGe().fromJson(e,t)}static fromJsonString(e,t){return new GGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(GGe,e,t)}},r3r=class KGe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.fileContents="",this.implementationStartLineInclusive=0,this.implementationEndLineInclusive=0,this.applyPlan="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainApplyPlanRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"file_contents",kind:"scalar",T:9},{no:3,name:"implementation_start_line_inclusive",kind:"scalar",T:5},{no:4,name:"implementation_end_line_inclusive",kind:"scalar",T:5},{no:5,name:"apply_plan",kind:"scalar",T:9}])}static fromBinary(e,t){return new KGe().fromBinary(e,t)}static fromJson(e,t){return new KGe().fromJson(e,t)}static fromJsonString(e,t){return new KGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(KGe,e,t)}},o3r=class YGe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainApplyPlanResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new YGe().fromBinary(e,t)}static fromJson(e,t){return new YGe().fromJson(e,t)}static fromJsonString(e,t){return new YGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(YGe,e,t)}},a3r=class XGe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.fileContents="",this.usefulTypes=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SortUsefulTypesNaiveRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"file_contents",kind:"scalar",T:9},{no:3,name:"query_range",kind:"message",T:l3r},{no:4,name:"useful_types",kind:"message",T:kri,repeated:!0}])}static fromBinary(e,t){return new XGe().fromBinary(e,t)}static fromJson(e,t){return new XGe().fromJson(e,t)}static fromJsonString(e,t){return new XGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(XGe,e,t)}},l3r=class QGe extends R{constructor(e){super(),this.startLineNumber=0,this.startColumn=0,this.endLineNumber=0,this.endColumn=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SortUsefulTypesNaiveRequest.IRange"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"start_line_number",kind:"scalar",T:5},{no:2,name:"start_column",kind:"scalar",T:5},{no:3,name:"end_line_number",kind:"scalar",T:5},{no:4,name:"end_column",kind:"scalar",T:5}])}static fromBinary(e,t){return new QGe().fromBinary(e,t)}static fromJson(e,t){return new QGe().fromJson(e,t)}static fromJsonString(e,t){return new QGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(QGe,e,t)}},c3r=class ZGe extends R{constructor(e){super(),this.usefulTypes=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SortUsefulTypesNaiveResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"useful_types",kind:"message",T:kri,repeated:!0}])}static fromBinary(e,t){return new ZGe().fromBinary(e,t)}static fromJson(e,t){return new ZGe().fromJson(e,t)}static fromJsonString(e,t){return new ZGe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(ZGe,e,t)}},u3r=class eKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.oldFileContents="",this.implementationStartLineInclusive=0,this.implementationEndLineInclusive=0,this.newImplementationLines=[],this.callSiteLines=[],this.functionName="",this.branchNotes="",this.branchName="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"old_file_contents",kind:"scalar",T:9},{no:3,name:"implementation_start_line_inclusive",kind:"scalar",T:5},{no:4,name:"implementation_end_line_inclusive",kind:"scalar",T:5},{no:5,name:"new_implementation_lines",kind:"scalar",T:9,repeated:!0},{no:6,name:"call_site_lines",kind:"scalar",T:5,repeated:!0},{no:7,name:"function_name",kind:"scalar",T:9},{no:8,name:"branch_notes",kind:"scalar",T:9},{no:9,name:"branch_name",kind:"scalar",T:9},{no:10,name:"lints",kind:"message",T:$H}])}static fromBinary(e,t){return new eKe().fromBinary(e,t)}static fromJson(e,t){return new eKe().fromJson(e,t)}static fromJsonString(e,t){return new eKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(eKe,e,t)}},h3r=class tKe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"decision",kind:"message",T:p3r}])}static fromBinary(e,t){return new tKe().fromBinary(e,t)}static fromJson(e,t){return new tKe().fromJson(e,t)}static fromJsonString(e,t){return new tKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(tKe,e,t)}},d3r=class iKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectResponse.AcceptDecision"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new iKe().fromBinary(e,t)}static fromJson(e,t){return new iKe().fromJson(e,t)}static fromJsonString(e,t){return new iKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(iKe,e,t)}},f3r=class sKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectResponse.RetryWithoutMoreInformationDecision"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new sKe().fromBinary(e,t)}static fromJson(e,t){return new sKe().fromJson(e,t)}static fromJsonString(e,t){return new sKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(sKe,e,t)}},g3r=class nKe extends R{constructor(e){super(),this.codebaseQuestions=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectResponse.RetryWithCodebaseQuestionDecision"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"codebase_questions",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new nKe().fromBinary(e,t)}static fromJson(e,t){return new nKe().fromJson(e,t)}static fromJsonString(e,t){return new nKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(nKe,e,t)}},p3r=class rKe extends R{constructor(e){super(),this.decision={case:void 0},m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainReflectResponse.Decision"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"accept",kind:"message",T:d3r,oneof:"decision"},{no:2,name:"retry_without_more_information",kind:"message",T:f3r,oneof:"decision"},{no:3,name:"retry_with_codebase_question",kind:"message",T:g3r,oneof:"decision"}])}static fromBinary(e,t){return new rKe().fromBinary(e,t)}static fromJson(e,t){return new rKe().fromJson(e,t)}static fromJsonString(e,t){return new rKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(rKe,e,t)}},m3r=class oKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.fileContents="",this.implementationStartLineInclusive=0,this.implementationEndLineInclusive=0,this.diffHistory=[],this.callSiteLines=[],this.functionName="",this.usefulTypes=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.V0ChainRunRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"file_contents",kind:"scalar",T:9},{no:3,name:"implementation_start_line_inclusive",kind:"scalar",T:5},{no:4,name:"implementation_end_line_inclusive",kind:"scalar",T:5},{no:5,name:"diff_history",kind:"message",T:US,repeated:!0},{no:6,name:"call_site_lines",kind:"scalar",T:5,repeated:!0},{no:7,name:"function_name",kind:"scalar",T:9},{no:8,name:"useful_types",kind:"message",T:kri,repeated:!0},{no:10,name:"prompt",kind:"message",T:hWs},{no:9,name:"debug_info",kind:"message",T:jI}])}static fromBinary(e,t){return new oKe().fromBinary(e,t)}static fromJson(e,t){return new oKe().fromJson(e,t)}static fromJsonString(e,t){return new oKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(oKe,e,t)}},b3r=class aKe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.V0ChainRunResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new aKe().fromBinary(e,t)}static fromJson(e,t){return new aKe().fromJson(e,t)}static fromJsonString(e,t){return new aKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(aKe,e,t)}},hWs=class lKe extends R{constructor(e){super(),this.text="",this.contextItems=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.HallucinatedFunctionsProtoPrompt"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9},{no:2,name:"context_items",kind:"message",T:t8,repeated:!0}])}static fromBinary(e,t){return new lKe().fromBinary(e,t)}static fromJson(e,t){return new lKe().fromJson(e,t)}static fromJsonString(e,t){return new lKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(lKe,e,t)}},dWs=class cKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.fileContents="",this.implementationStartLineInclusive=0,this.implementationEndLineInclusive=0,this.diffHistory=[],this.callSiteLines=[],this.functionName="",this.branchNotes="",this.branchName="",this.scoredCodebaseContext=[],this.branchDiffFiles=[],this.diffHistoryFiles=[],this.planVersion=N0e.UNSPECIFIED,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"file_contents",kind:"scalar",T:9},{no:3,name:"implementation_start_line_inclusive",kind:"scalar",T:5},{no:4,name:"implementation_end_line_inclusive",kind:"scalar",T:5},{no:5,name:"diff_history",kind:"message",T:US,repeated:!0},{no:6,name:"call_site_lines",kind:"scalar",T:5,repeated:!0},{no:7,name:"function_name",kind:"scalar",T:9},{no:9,name:"debug_info",kind:"message",T:jI},{no:20,name:"prompt",kind:"message",T:hWs},{no:10,name:"branch_notes",kind:"scalar",T:9},{no:11,name:"branch_name",kind:"scalar",T:9},{no:12,name:"scored_codebase_context",kind:"message",T:Xp,repeated:!0},{no:13,name:"diff_to_base_branch",kind:"message",T:v3r},{no:16,name:"branch_diff_files",kind:"message",T:fWs,repeated:!0},{no:14,name:"diff_history_files",kind:"message",T:fWs,repeated:!0},{no:8,name:"codebase_information",kind:"message",T:w3r,opt:!0},{no:15,name:"plan_version",kind:"enum",T:m.getEnumType(N0e)},{no:17,name:"context_ast",kind:"message",T:KFt}])}static fromBinary(e,t){return new cKe().fromBinary(e,t)}static fromJson(e,t){return new cKe().fromJson(e,t)}static fromJsonString(e,t){return new cKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(cKe,e,t)}},N0e;(function(i){i[i.UNSPECIFIED=0]="UNSPECIFIED",i[i.V0=1]="V0",i[i.V1_MORE_CONTEXT_AND_GUIDELINES=2]="V1_MORE_CONTEXT_AND_GUIDELINES"})(N0e||(N0e={})),m.util.setEnumType(N0e,"aiserver.v1.Opus2ChainPlanRequest.OpusPlanVersion",[{no:0,name:"OPUS_PLAN_VERSION_UNSPECIFIED"},{no:1,name:"OPUS_PLAN_VERSION_V0"},{no:2,name:"OPUS_PLAN_VERSION_V1_MORE_CONTEXT_AND_GUIDELINES"}]);var v3r=class uKe extends R{constructor(e){super(),this.fileDiffs=[],this.commits=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.BranchDiff"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"file_diffs",kind:"message",T:y3r,repeated:!0},{no:2,name:"commits",kind:"message",T:NN,repeated:!0}])}static fromBinary(e,t){return new uKe().fromBinary(e,t)}static fromJson(e,t){return new uKe().fromJson(e,t)}static fromJsonString(e,t){return new uKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(uKe,e,t)}},y3r=class hKe extends R{constructor(e){super(),this.fileName="",this.diff="",this.tooBig=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.BranchDiff.FileDiff"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"file_name",kind:"scalar",T:9},{no:2,name:"diff",kind:"scalar",T:9},{no:3,name:"too_big",kind:"scalar",T:8}])}static fromBinary(e,t){return new hKe().fromBinary(e,t)}static fromJson(e,t){return new hKe().fromJson(e,t)}static fromJsonString(e,t){return new hKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(hKe,e,t)}},fWs=class dKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.File"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new dKe().fromBinary(e,t)}static fromJson(e,t){return new dKe().fromJson(e,t)}static fromJsonString(e,t){return new dKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(dKe,e,t)}},w3r=class fKe extends R{constructor(e){super(),this.files=[],this.qa=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.CodebaseInformation"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"files",kind:"message",T:C3r,repeated:!0},{no:2,name:"qa",kind:"message",T:S3r,repeated:!0}])}static fromBinary(e,t){return new fKe().fromBinary(e,t)}static fromJson(e,t){return new fKe().fromJson(e,t)}static fromJsonString(e,t){return new fKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(fKe,e,t)}},C3r=class gKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.contents="",this.interestingLines=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.CodebaseInformation.File"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"contents",kind:"scalar",T:9},{no:3,name:"interesting_lines",kind:"scalar",T:5,repeated:!0}])}static fromBinary(e,t){return new gKe().fromBinary(e,t)}static fromJson(e,t){return new gKe().fromJson(e,t)}static fromJsonString(e,t){return new gKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(gKe,e,t)}},S3r=class pKe extends R{constructor(e){super(),this.question="",this.answer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanRequest.CodebaseInformation.QA"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"question",kind:"scalar",T:9},{no:2,name:"answer",kind:"scalar",T:9}])}static fromBinary(e,t){return new pKe().fromBinary(e,t)}static fromJson(e,t){return new pKe().fromJson(e,t)}static fromJsonString(e,t){return new pKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(pKe,e,t)}},Mta=class mKe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ExtractFunctionNameFromImplementationPromptProps"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new mKe().fromBinary(e,t)}static fromJson(e,t){return new mKe().fromJson(e,t)}static fromJsonString(e,t){return new mKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(mKe,e,t)}},x3r=class bKe extends R{constructor(e){super(),this.text="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"text",kind:"scalar",T:9}])}static fromBinary(e,t){return new bKe().fromBinary(e,t)}static fromJson(e,t){return new bKe().fromJson(e,t)}static fromJsonString(e,t){return new bKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(bKe,e,t)}},$ta=class vKe extends R{constructor(e){super(),this.examples=[],this.tokenLimit=0,this.tokenizer="",this.chainOfThought=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CodebaseKnowledgeCmdKInstructionFewShotPromptProps"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"examples",kind:"message",T:k3r,repeated:!0},{no:2,name:"current",kind:"message",T:gWs},{no:8,name:"token_limit",kind:"scalar",T:5},{no:9,name:"tokenizer",kind:"scalar",T:9},{no:10,name:"chain_of_thought",kind:"scalar",T:8}])}static fromBinary(e,t){return new vKe().fromBinary(e,t)}static fromJson(e,t){return new vKe().fromJson(e,t)}static fromJsonString(e,t){return new vKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(vKe,e,t)}},k3r=class yKe extends R{constructor(e){super(),this.instruction="",this.reasoning="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CodebaseKnowledgeCmdKInstructionFewShotPromptProps.Example"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"props",kind:"message",T:gWs},{no:2,name:"instruction",kind:"scalar",T:9},{no:3,name:"reasoning",kind:"scalar",T:9}])}static fromBinary(e,t){return new yKe().fromBinary(e,t)}static fromJson(e,t){return new yKe().fromJson(e,t)}static fromJsonString(e,t){return new yKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(yKe,e,t)}},gWs=class wKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.currentFileLines=[],this.startLineOneIndexedInclusive=0,this.endLineOneIndexedExclusive=0,this.groundTruthLines=[],this.prHistory=[],this.scoredCodebaseContext=[],this.tokenLimit=0,this.tokenizer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CodebaseKnowledgeCmdKInstructionPromptProps"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"current_file_lines",kind:"scalar",T:9,repeated:!0},{no:3,name:"start_line_one_indexed_inclusive",kind:"scalar",T:5},{no:4,name:"end_line_one_indexed_exclusive",kind:"scalar",T:5},{no:5,name:"ground_truth_lines",kind:"scalar",T:9,repeated:!0},{no:6,name:"pr_history",kind:"message",T:pWs,repeated:!0},{no:7,name:"scored_codebase_context",kind:"message",T:Xp,repeated:!0},{no:8,name:"token_limit",kind:"scalar",T:5},{no:9,name:"tokenizer",kind:"scalar",T:9}])}static fromBinary(e,t){return new wKe().fromBinary(e,t)}static fromJson(e,t){return new wKe().fromJson(e,t)}static fromJsonString(e,t){return new wKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(wKe,e,t)}},Fta=class CKe extends R{constructor(e){super(),this.codebaseContext=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ScoredCodebaseContext"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"codebase_context",kind:"message",T:Xp,repeated:!0}])}static fromBinary(e,t){return new CKe().fromBinary(e,t)}static fromJson(e,t){return new CKe().fromJson(e,t)}static fromJsonString(e,t){return new CKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(CKe,e,t)}},pWs=class SKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.originalLines=[],this.newLines=[],this.startLineOneIndexed=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.PrHistoryItem"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"original_lines",kind:"scalar",T:9,repeated:!0},{no:4,name:"new_lines",kind:"scalar",T:9,repeated:!0},{no:5,name:"start_line_one_indexed",kind:"scalar",T:5}])}static fromBinary(e,t){return new SKe().fromBinary(e,t)}static fromJson(e,t){return new SKe().fromJson(e,t)}static fromJsonString(e,t){return new SKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(SKe,e,t)}},Ota=class xKe extends R{constructor(e){super(),this.relativeWorkspacePath="",this.currentFileLines=[],this.startLineOneIndexedInclusive=0,this.endLineOneIndexedExclusive=0,this.instruction="",this.prHistory=[],this.scoredCodebaseContext=[],this.tokenLimit=0,this.tokenizer="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CodebaseKnowledgeCmdKPromptProps"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"relative_workspace_path",kind:"scalar",T:9},{no:2,name:"current_file_lines",kind:"scalar",T:9,repeated:!0},{no:3,name:"start_line_one_indexed_inclusive",kind:"scalar",T:5},{no:4,name:"end_line_one_indexed_exclusive",kind:"scalar",T:5},{no:5,name:"instruction",kind:"scalar",T:9},{no:6,name:"pr_history",kind:"message",T:pWs,repeated:!0},{no:7,name:"scored_codebase_context",kind:"message",T:Xp,repeated:!0},{no:8,name:"token_limit",kind:"scalar",T:5},{no:9,name:"tokenizer",kind:"scalar",T:9}])}static fromBinary(e,t){return new xKe().fromBinary(e,t)}static fromJson(e,t){return new xKe().fromJson(e,t)}static fromJsonString(e,t){return new xKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(xKe,e,t)}},_ta=class kKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.Opus2ChainPlanPromptProps"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"request",kind:"message",T:dWs},{no:2,name:"plan",kind:"scalar",T:9,opt:!0}])}static fromBinary(e,t){return new kKe().fromBinary(e,t)}static fromJson(e,t){return new kKe().fromJson(e,t)}static fromJsonString(e,t){return new kKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(kKe,e,t)}};xr();var mWs={typeName:"aiserver.v1.HallucinatedFunctionsService",methods:{v0ChainRun:{name:"V0ChainRun",I:m3r,O:b3r,kind:Ze.ServerStreaming},opus2ChainPlan:{name:"Opus2ChainPlan",I:dWs,O:x3r,kind:Ze.ServerStreaming},opus2ChainApplyPlan:{name:"Opus2ChainApplyPlan",I:r3r,O:o3r,kind:Ze.ServerStreaming},opus2ChainReflect:{name:"Opus2ChainReflect",I:u3r,O:h3r,kind:Ze.ServerStreaming},sortUsefulTypesNaive:{name:"SortUsefulTypesNaive",I:a3r,O:c3r,kind:Ze.Unary}}};xr();var E3r=class EKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetPublicIpRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new EKe().fromBinary(e,t)}static fromJson(e,t){return new EKe().fromJson(e,t)}static fromJsonString(e,t){return new EKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(EKe,e,t)}},I3r=class IKe extends R{constructor(e){super(),this.ip="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetPublicIpResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"ip",kind:"scalar",T:9}])}static fromBinary(e,t){return new IKe().fromBinary(e,t)}static fromJson(e,t){return new IKe().fromJson(e,t)}static fromJsonString(e,t){return new IKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(IKe,e,t)}},D3r=class DKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.IsConnectedRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new DKe().fromBinary(e,t)}static fromJson(e,t){return new DKe().fromJson(e,t)}static fromJsonString(e,t){return new DKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(DKe,e,t)}},T3r=class TKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.IsConnectedResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new TKe().fromBinary(e,t)}static fromJson(e,t){return new TKe().fromJson(e,t)}static fromJsonString(e,t){return new TKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(TKe,e,t)}};xr();var bWs={typeName:"aiserver.v1.NetworkService",methods:{getPublicIp:{name:"GetPublicIp",I:E3r,O:I3r,kind:Ze.Unary},isConnected:{name:"IsConnected",I:D3r,O:T3r,kind:Ze.Unary}}};xr(),co(),X6(),fw(),bc();var L3r=class LKe extends R{constructor(e){super(),this.command=[],this.cwd="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ExecRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"command",kind:"scalar",T:9,repeated:!0},{no:2,name:"cwd",kind:"scalar",T:9}])}static fromBinary(e,t){return new LKe().fromBinary(e,t)}static fromJson(e,t){return new LKe().fromJson(e,t)}static fromJsonString(e,t){return new LKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(LKe,e,t)}},P3r=class PKe extends R{constructor(e){super(),this.stdout="",this.stderr="",this.exitCode=0,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ExecResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"stdout",kind:"scalar",T:9},{no:2,name:"stderr",kind:"scalar",T:9},{no:3,name:"exit_code",kind:"scalar",T:5}])}static fromBinary(e,t){return new PKe().fromBinary(e,t)}static fromJson(e,t){return new PKe().fromJson(e,t)}static fromJsonString(e,t){return new PKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(PKe,e,t)}},N3r=class NKe extends R{constructor(e){super(),this.commit="",this.port=0,this.connectionToken="",this.rootPath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WarmCursorServerRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"commit",kind:"scalar",T:9},{no:2,name:"port",kind:"scalar",T:5},{no:3,name:"connection_token",kind:"scalar",T:9},{no:4,name:"root_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new NKe().fromBinary(e,t)}static fromJson(e,t){return new NKe().fromJson(e,t)}static fromJsonString(e,t){return new NKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(NKe,e,t)}},R3r=class RKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WarmCursorServerResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new RKe().fromBinary(e,t)}static fromJson(e,t){return new RKe().fromJson(e,t)}static fromJsonString(e,t){return new RKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(RKe,e,t)}},A3r=class AKe extends R{constructor(e){super(),this.rootPath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetExplicitContextRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"root_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new AKe().fromBinary(e,t)}static fromJson(e,t){return new AKe().fromJson(e,t)}static fromJsonString(e,t){return new AKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(AKe,e,t)}},M3r=class MKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetExplicitContextResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"explicit_context",kind:"message",T:_f}])}static fromBinary(e,t){return new MKe().fromBinary(e,t)}static fromJson(e,t){return new MKe().fromJson(e,t)}static fromJsonString(e,t){return new MKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(MKe,e,t)}},$3r=class $Ke extends R{constructor(e){super(),this.absolutePaths=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetFileStatsRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_paths",kind:"scalar",T:9,repeated:!0}])}static fromBinary(e,t){return new $Ke().fromBinary(e,t)}static fromJson(e,t){return new $Ke().fromJson(e,t)}static fromJsonString(e,t){return new $Ke().fromJsonString(e,t)}static equals(e,t){return m.util.equals($Ke,e,t)}},F3r=class FKe extends R{constructor(e){super(),this.fileStats=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetFileStatsResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"file_stats",kind:"message",T:O3r,repeated:!0}])}static fromBinary(e,t){return new FKe().fromBinary(e,t)}static fromJson(e,t){return new FKe().fromJson(e,t)}static fromJsonString(e,t){return new FKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(FKe,e,t)}},O3r=class OKe extends R{constructor(e){super(),this.absolutePath="",this.pathExists=!1,this.isFile=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.GetFileStatsResponse.Stat"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"path_exists",kind:"scalar",T:8},{no:3,name:"is_file",kind:"scalar",T:8}])}static fromBinary(e,t){return new OKe().fromBinary(e,t)}static fromJson(e,t){return new OKe().fromJson(e,t)}static fromJsonString(e,t){return new OKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(OKe,e,t)}},_3r=class _Ke extends R{constructor(e){super(),this.rootPath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CompileRepoIncludeExcludePatternsRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"root_path",kind:"scalar",T:9},{no:2,name:"request",kind:"message",T:eFt}])}static fromBinary(e,t){return new _Ke().fromBinary(e,t)}static fromJson(e,t){return new _Ke().fromJson(e,t)}static fromJsonString(e,t){return new _Ke().fromJsonString(e,t)}static equals(e,t){return m.util.equals(_Ke,e,t)}},B3r=class BKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CompileRepoIncludeExcludePatternsResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"response",kind:"message",T:oet}])}static fromBinary(e,t){return new BKe().fromBinary(e,t)}static fromJson(e,t){return new BKe().fromJson(e,t)}static fromJsonString(e,t){return new BKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(BKe,e,t)}},U3r=class UKe extends R{constructor(e){super(),this.accessToken="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ProvideTemporaryAccessTokenRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"access_token",kind:"scalar",T:9}])}static fromBinary(e,t){return new UKe().fromBinary(e,t)}static fromJson(e,t){return new UKe().fromJson(e,t)}static fromJsonString(e,t){return new UKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(UKe,e,t)}},V3r=class VKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ProvideTemporaryAccessTokenResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new VKe().fromBinary(e,t)}static fromJson(e,t){return new VKe().fromJson(e,t)}static fromJsonString(e,t){return new VKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(VKe,e,t)}},H3r=class HKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.PingRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new HKe().fromBinary(e,t)}static fromJson(e,t){return new HKe().fromJson(e,t)}static fromJsonString(e,t){return new HKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(HKe,e,t)}},W3r=class WKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.PingResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new WKe().fromBinary(e,t)}static fromJson(e,t){return new WKe().fromJson(e,t)}static fromJsonString(e,t){return new WKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(WKe,e,t)}},q3r=class qKe extends R{constructor(e){super(),this.absolutePath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ReadTextFileRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new qKe().fromBinary(e,t)}static fromJson(e,t){return new qKe().fromJson(e,t)}static fromJsonString(e,t){return new qKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(qKe,e,t)}},j3r=class jKe extends R{constructor(e){super(),this.contents="",this.pathDoesNotExist=!1,this.wasTruncated=!1,this.isNotAFile=!1,m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.ReadTextFileResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"contents",kind:"scalar",T:9},{no:2,name:"path_does_not_exist",kind:"scalar",T:8},{no:3,name:"was_truncated",kind:"scalar",T:8},{no:4,name:"is_not_a_file",kind:"scalar",T:8}])}static fromBinary(e,t){return new jKe().fromBinary(e,t)}static fromJson(e,t){return new jKe().fromJson(e,t)}static fromJsonString(e,t){return new jKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(jKe,e,t)}},z3r=class zKe extends R{constructor(e){super(),this.absolutePath="",this.newContents="",this.getNewLinterErrors=!1,this.rootPath="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WriteTextFileRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"absolute_path",kind:"scalar",T:9},{no:2,name:"new_contents",kind:"scalar",T:9},{no:3,name:"get_new_linter_errors",kind:"scalar",T:8},{no:4,name:"root_path",kind:"scalar",T:9}])}static fromBinary(e,t){return new zKe().fromBinary(e,t)}static fromJson(e,t){return new zKe().fromJson(e,t)}static fromJsonString(e,t){return new zKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(zKe,e,t)}},J3r=class JKe extends R{constructor(e){super(),this.newLinterErrors=[],m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.WriteTextFileResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"new_linter_errors",kind:"message",T:zI,repeated:!0}])}static fromBinary(e,t){return new JKe().fromBinary(e,t)}static fromJson(e,t){return new JKe().fromJson(e,t)}static fromJsonString(e,t){return new JKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(JKe,e,t)}},G3r=class GKe extends R{constructor(e){super(),this.rootPath="",this.pathEncryptionKey="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SyncIndexRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"root_path",kind:"scalar",T:9},{no:2,name:"repository_info",kind:"message",T:al},{no:3,name:"path_encryption_key",kind:"scalar",T:9}])}static fromBinary(e,t){return new GKe().fromBinary(e,t)}static fromJson(e,t){return new GKe().fromJson(e,t)}static fromJsonString(e,t){return new GKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(GKe,e,t)}},K3r=class KKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.SyncIndexResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new KKe().fromBinary(e,t)}static fromJson(e,t){return new KKe().fromJson(e,t)}static fromJsonString(e,t){return new KKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(KKe,e,t)}},Y3r=class YKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.UpgradeRequest"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new YKe().fromBinary(e,t)}static fromJson(e,t){return new YKe().fromJson(e,t)}static fromJsonString(e,t){return new YKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(YKe,e,t)}},X3r=class XKe extends R{constructor(e){super(),this.version="",this.newPort="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.UpgradeResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"version",kind:"scalar",T:9},{no:2,name:"new_port",kind:"scalar",T:9}])}static fromBinary(e,t){return new XKe().fromBinary(e,t)}static fromJson(e,t){return new XKe().fromJson(e,t)}static fromJsonString(e,t){return new XKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(XKe,e,t)}},Q3r=class QKe extends R{constructor(e){super(),this.rootPath="",this.composerId="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CallClientSideV2ToolRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"tool_call",kind:"message",T:Dhe},{no:2,name:"root_path",kind:"scalar",T:9},{no:3,name:"composer_id",kind:"scalar",T:9}])}static fromBinary(e,t){return new QKe().fromBinary(e,t)}static fromJson(e,t){return new QKe().fromJson(e,t)}static fromJsonString(e,t){return new QKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(QKe,e,t)}},Z3r=class ZKe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.CallClientSideV2ToolResponse"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"tool_result",kind:"message",T:El}])}static fromBinary(e,t){return new ZKe().fromBinary(e,t)}static fromJson(e,t){return new ZKe().fromJson(e,t)}static fromJsonString(e,t){return new ZKe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(ZKe,e,t)}},e9r=class eYe extends R{constructor(e){super(),this.githubAccessToken="",m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.RefreshGitHubAccessTokenRequest"}static{this.fields=m.util.newFieldList(()=>[{no:1,name:"github_access_token",kind:"scalar",T:9}])}static fromBinary(e,t){return new eYe().fromBinary(e,t)}static fromJson(e,t){return new eYe().fromJson(e,t)}static fromJsonString(e,t){return new eYe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(eYe,e,t)}},t9r=class tYe extends R{constructor(e){super(),m.util.initPartial(e,this)}static{this.runtime=m}static{this.typeName="aiserver.v1.RefreshGitHubAccessTokenResponse"}static{this.fields=m.util.newFieldList(()=>[])}static fromBinary(e,t){return new tYe().fromBinary(e,t)}static fromJson(e,t){return new tYe().fromJson(e,t)}static fromJsonString(e,t){return new tYe().fromJsonString(e,t)}static equals(e,t){return m.util.equals(tYe,e,t)}};xr();var vWs={typeName:"aiserver.v1.VmDaemonService",methods:{syncIndex:{name:"SyncIndex",I:G3r,O:K3r,kind:Ze.Unary},compileRepoIncludeExcludePatterns:{name:"CompileRepoIncludeExcludePatterns",I:_3r,O:B3r,kind:Ze.Unary},upgrade:{name:"Upgrade",I:Y3r,O:X3r,kind:Ze.Unary},ping:{name:"Ping",I:H3r,O:W3r,kind:Ze.Unary},exec:{name:"Exec",I:L3r,O:P3r,kind:Ze.Unary},callClientSideV2Tool:{name:"CallClientSideV2Tool",I:Q3r,O:Z3r,kind:Ze.Unary},readTextFile:{name:"ReadTextFile",I:q3r,O:j3r,kind:Ze.Unary},writeTextFile:{name:"WriteTextFile",I:z3r,O:J3r,kind:Ze.Unary},getFileStats:{name:"GetFileStats",I:$3r,O:F3r,kind:Ze.Unary},getExplicitContext:{name:"GetExplicitContext",I:A3r,O:M3r,kind:Ze.Unary},provideTemporaryAccessToken:{name:"ProvideTemporaryAccessToken",I:U3r,O:V3r,kind:Ze.Unary},warmCursorServer:{name:"WarmCursorServer",I:N3r,O:R3r,kind:Ze.Unary},refreshGitHubAccessToken:{name:"RefreshGitHubAccessToken",I:e9r,O:t9r,kind:Ze.Unary}}},yWs={[qHs.typeName]:qHs,[Qit.typeName]:Qit,[KHs.typeName]:KHs,[I0e.typeName]:I0e,[jVt.typeName]:jVt,[YHs.typeName]:YHs,[Jdt.typeName]:Jdt,[XHs.typeName]:XHs,[xlt.typeName]:xlt,[yj.typeName]:yj,[JVt.typeName]:JVt,[QHs.typeName]:QHs,[ZHs.typeName]:ZHs,[wri.typeName]:wri,[Elt.typeName]:Elt,[Yh.typeName]:Yh,[Cri.typeName]:Cri,[nst.typeName]:nst,[tWs.typeName]:tWs,[jme.typeName]:jme,[Sri.typeName]:Sri,[aWs.typeName]:aWs,[xri.typeName]:xri,[Afe.typeName]:Afe,[lWs.typeName]:lWs,[gWt.typeName]:gWt,[uWs.typeName]:uWs,[mWs.typeName]:mWs,[qVt.typeName]:qVt,[bWs.typeName]:bWs,[EYt.typeName]:EYt,[bHt.typeName]:bHt,[Ume.typeName]:Ume,[vWs.typeName]:vWs},wWs=i=>{const e=i.at(0);return e&&e===e?.toUpperCase()?e.toLowerCase()+i.slice(1):i};function Ebt(i){const e=new Headers;if(i)for(const t of i.headers)e.append(t.key,t.value);return e}var CWs=class extends H{constructor(e,t,s,n,r,o,a,l,c,u,h,f,g,p,b,v,y,w,C,S,x,k,E,I){super(),this.c=t,this.f=s,this.g=n,this.h=r,this.j=o,this.n=a,this.r=l,this.s=c,this.t=u,this.u=h,this.w=f,this.y=g,this.z=p,this.C=b,this.F=v,this.G=y,this.H=w,this.J=C,this.L=S,this.M=x,this.N=k,this.P=E,this.Q=I,this.U=new Map;const L=e.getProxy(Bo.ExtHostCursor);this.a=L;const P=this.D(this.c.createScoped(this));P.createImplicitEffect(()=>{this.a.$changeCursorCreds(this.c.applicationUserPersistentStorage.cursorCreds),this.a.$changeShouldIndex(this.c.applicationUserPersistentStorage.indexRepository)}),P.onChangeEffect({deps:[()=>this.c.workspaceUserPersistentStorage.indexingData.preferredEmbeddingModel],onChange:({deps:[_]})=>{this.a.$changePreferredEmbeddingModel(_)}}),this.D(this.N.onDidCursorIgnoreChange(()=>{this.a.$triggerCursorIgnoredFilesChange()})),this.D(this.f.onDidPotentiallyChangePrivacyMode(_=>{this.a.$changePrivacyMode(_)})),this.D(this.f.onDidChangeSnippetLearningEligibility(_=>{this.a.$changeSnippetLearningEligibility(_)})),P.onChangeEffect({onChange:()=>{this.a.$changeFileSyncClientEnabled(this.c.applicationUserPersistentStorage.isFileSyncClientEnabled),this.a.$changeCppEnabled(this.c.applicationUserPersistentStorage.cppEnabled),this.a.$changeCppConfig(this.c.applicationUserPersistentStorage.cppConfig),this.a.$changeMembershipType(this.c.applicationUserPersistentStorage.membershipType)},deps:[()=>this.c.applicationUserPersistentStorage.isFileSyncClientEnabled,()=>this.c.applicationUserPersistentStorage.cppEnabled,()=>this.c.applicationUserPersistentStorage.cppConfig,()=>this.c.applicationUserPersistentStorage.membershipType]}),this.f.refreshMembershipType(),this.authenticationUpdateIntervalId=Rt.setInterval(this.f.refreshMembershipType,60*1e3),this.privacyModeForwarderIntervalId=Rt.setInterval(()=>{Ja(()=>{this.a.$changePrivacyMode(this.f.reactivePrivacyMode())})},30*1e3),this.b=async _=>{this.a.$changeCursorAuthToken(await this.f.getAccessToken())},this.f.addLoginChangedListener(this.b),this.g.onDidRequestRepoIndex(_=>{this.a.$triggerCursorIndex(_)}),this.g.onDidRequestRepoInterrupt(_=>{this.a.$triggerCursorInterrupt(_)}),this.D(this.F.onDidChangeCppSessionId(_=>{this.a.$updateCppSessionId(_)})),this.a.$updateCppSessionId(this.F.getCurrentSessionId()),this.D(this.F.onDidChangeCppTelemEnabled(_=>{this.a.$updateCppTelemEnabled(_)}));const N=this.c.nonPersistentStorage.canWeTrackTelem;this.a.$updateCppTelemEnabled(N??!1),this.D(this.H.onProcessConfigUpdate(this.a.$processConfigUpdate)),this.a.$changeConfigVersion(this.L.cachedServerConfig.configVersion),this.D(this.L.onDidRefreshServerConfig(()=>{this.a.$changeConfigVersion(this.L.cachedServerConfig.configVersion)}))}dispose(){super.dispose(),this.f.removeLoginChangedListener(this.b),Rt.clearInterval(this.authenticationUpdateIntervalId),Rt.clearInterval(this.privacyModeForwarderIntervalId)}async $onDidChangeIndexingStatus(){this.g.fireOnDidChangeIndexingStatus()}async $unregisterOnDidChangeIndexingStatus(){this.g.unregisterOnDidChangeIndexingStatus()}async $triggerRefreshCursorAuthToken(){await this.f.refreshAuthentication()}async $triggerCursorIgnoredFilesChange(){this.a.$triggerCursorIgnoredFilesChange()}async $registerExtHostEventLogger(){this.R=this.G.registerExtHostEventLogger({recordExtHostEvent:e=>this.a.$recordExtHostEvent(e),forceFlush:()=>this.a.$forceFlushExtHostEventLogger()})}async $unregisterExtHostEventLogger(){this.R&&(this.R.dispose(),this.R=void 0)}async $registerIndexProvider(){const e=()=>this.a.$getIndexProviderGetGlobalStatus(),t=p=>this.a.$getIndexProviderGetStatus(p),s=p=>this.a.$getIndexProviderGetIndexingProgress(p),n=p=>this.a.$getIndexProviderGetCurrentJobs(p),r=()=>this.a.$getIndexProviderGetCodebases(),o=()=>this.a.$getIndexProviderGetHighLevelFolderDescription(),a=()=>this.a.$getIndexProviderGetEmbeddableFilesPath(),l=()=>this.a.$getIndexProviderGetRepoInfo(),c=()=>this.a.$getIndexProviderGetQueryOnlyRepoInfo(),u=()=>this.a.$getIndexProviderGetPathEncryptionKey(),h=p=>this.a.$getIndexProviderEncryptPaths(p),f=p=>this.a.$getIndexProviderDecryptPaths(p),g=p=>this.a.$getIndexProviderCompileGlobFilter(p);this.g.registerIndexingProvider({getGlobalStatus:e,getStatus:t,getIndexingProgress:s,getCurrentJobs:n,getHighLevelFolderDescription:o,getRepoInfo:l,getQueryOnlyRepoInfo:c,getEmbeddableFilesPath:a,getPathEncryptionKey_ONLY_FOR_VM_AGENT:u,encryptPaths:h,decryptPaths:f,compileGlobFilter:g,getCodebases:r})}async $unregisterIndexProvider(){this.g.unregisterIndexingProvider()}async $registerMetricsProvider(){const e=r=>{this.a.$getMetricsProviderIncrement(r)},t=r=>{this.a.$getMetricsProviderDecrement(r)},s=r=>{this.a.$getMetricsProviderDistribution(r)},n=r=>{this.a.$getMetricsProviderGauge(r)};this.n.registerMetricsProvider({increment:e,decrement:t,distribution:s,gauge:n})}async $callShadowServer(e,t,s){try{const n=this.z.getServer(),o=n[e].bind(n),l=I0e.methods[e].I.fromBinary(t.buffer),c=new AbortController;s.isCancellationRequested?c.abort():s.onCancellationRequested(()=>{c.abort()});const u=await o(l,{signal:c.signal});return Li.wrap(u.toBinary())}catch(n){throw console.error("Error in $callShadowServer",n,n.stack),this.h.error("Error in $callShadowServer",n,n.stack),n}}async $registerShadowServerProvider(){const e=this.y.getServerSocketPath();e&&await this.a.$getShadowServerProviderStart(e)}async $unregisterShadowServerProvider(){}async $registerShadowClientProvider(){this.S=this.y.provideClient(async e=>(await this.a.$createShadowClient(e),new Proxy({},{get:(t,s,n)=>{if(typeof s=="string"){const r=I0e.methods[s]?.I;if(r===void 0)return;const o=I0e.methods[s]?.O;if(o===void 0)return;const a=s;return async(l,c)=>{const u=new r(l),h=new zi;let f;c?.signal&&(c.signal.aborted?h.cancel():(f=()=>{h.cancel()},c.signal.addEventListener("abort",f)));try{const g=await this.a.$callShadowServer(a,Li.wrap(u.toBinary()),h.token);return o.fromBinary(g.buffer)}finally{f&&c?.signal&&c.signal.removeEventListener("abort",f)}}}}})))}async $unregisterShadowClientProvider(){this.S&&(this.S.dispose(),this.S=void 0)}async $unregisterMetricsProvider(){this.n.unregisterMetricsProvider()}async $registerEditHistoryProvider(){const e=n=>{this.a.$getEditHistoryProviderInitModel(n)},t=n=>this.a.$getEditHistoryProviderHasProcessedTextModelUptilVersion(n),s=n=>this.a.$getEditHistoryProviderCompileGlobalDiffTrajectories(n);this.s.registerEditHistoryProvider({initModel:e,hasProcessedTextModelUptilVersion:t,compileGlobalDiffTrajectories:s})}async $unregisterEditHistoryProvider(){}async $registerLspSubgraphProvider(){this.u.registerProvider({activate:this.a.$callLspSubgraphProviderActivate,deactivate:this.a.$callLspSubgraphProviderDeactivate,debouncedForceAbort:this.a.$callLspSubgraphProviderDebouncedForceAbort,retrieve:this.a.$callLspSubgraphProviderRetrieve})}async $unregisterLspSubgraphProvider(){this.u.unregisterProvider()}async $streamAiConnect(e,t,s,n,r,o,a){if(!(e.typeName in yWs))throw new Error("Service not recognized in the SERVICE_NAME_MAP_AISERVER_V1");const l=Wt(),c=new zi,u=()=>{c.cancel(),this.a.$cancelAiConnectTransportStreamChunk(l)};s?.addEventListener("abort",u);const h=n??$4i,f=new LYt(h);this.U.set(l,f),(async()=>{for await(const C of o){const S=new t.I(C),x=Li.wrap(S.toBinary());if(c.token.isCancellationRequested){console.info("stopped pushing. Cancelled in $streamAiConnect (aiRequestServiceTransport)");break}this.a.$pushAiConnectTransportStreamChunk(x,l,n).catch(k=>{console.error("Error in $streamAiConnect (aiRequestServiceTransport)",k,k.stack),this.h.error("Error in $streamAiConnect (aiRequestServiceTransport)",k,k.stack)})}this.a.$endAiConnectTransportStreamChunk(l)})();const g=await this.a.$callAiConnectTransportProviderStream(l,e.typeName,wWs(t.name),n,r,a,c.token),p=this.U,b=async function*(){try{for await(const C of f){if(c.token.isCancellationRequested)continue;yield t.O.fromBinary(C.buffer)}}catch(C){throw C}finally{p.delete(l),s?.removeEventListener("abort",u)}},v=U$t.fromBinary(g.buffer);if(v.isError){const C=JSON.parse(v.connectError);if(this.W(C)){const S=new Vf(C.rawMessage,C.code,C.metadata,C.details,C.cause);throw this.X(S),S}throw new Error("Error in the connect call."+v.connectError)}const y=Ebt(v.header),w=Ebt(v.trailer);return{stream:!0,service:e,method:t,message:b(),header:y,trailer:w}}async $pushAiConnectTransportStreamChunk(e,t){const s=this.U.get(t);return s?(s.push(e),{success:!0}):{success:!1}}async $endAiConnectTransportStreamChunk(e){const t=this.U.get(e);t&&t.end()}W(e){return"name"in e&&"rawMessage"in e&&"code"in e&&e.name==="ConnectError"}X(e){e.details=e.details.map(t=>{const s="value"in t&&t.value instanceof Uint8Array;if("value"in t&&s===!1){const n=Object.values(t.value);t.value=Uint8Array.from(n)}return t})}async $endAiConnectTransportReportError(e,t){const s=this.U.get(e);let n;this.W(t)?(n=new Vf(t.rawMessage,t.code,t.metadata,t.details),this.X(n)):n=t,s&&n!==void 0&&s.error(n)}async $registerAiConnectTransportProvider(){const e=this.a,t=async(o,a,l,c,u,h)=>{const f=new a.I(h),g=Li.wrap(f.toBinary());if(!(o.typeName in yWs))throw console.log("MAJOR ERROR: If you are on dev and your service isnt working. SERVICE DOESNOT EXIST",o.typeName),new Error("Connect transport provider not initialized. BIG PROBLEM. "+o.typeName);if(this.B.isDisposed)throw new _a;const p=this.D(new zi),b=()=>{p.cancel()};l?.addEventListener("abort",b);try{const v=o.typeName,y=wWs(a.name),w=await e.$callAiConnectTransportProviderUnary(v,y,g,c,u,p.token),C=U$t.fromBinary(w.buffer);if(C.isError){const I=JSON.parse(C.connectError);if(this.W(I)){const L=new Vf(I.rawMessage,I.code,I.metadata,I.details,I.cause);throw this.X(L),L}throw new Error("Error in the connect call."+C.connectError)}const S=C.message,x=C.header,k=C.trailer,E=a.O.fromBinary(S);return{service:o,method:a,message:E,stream:!1,header:Ebt(x),trailer:Ebt(k)}}finally{l?.removeEventListener("abort",b)}},s=(o,a)=>{const l=new Headers(a);return l.set(UV,MY(o)),Object.fromEntries(l)},n=t,r=this.$streamAiConnect.bind(this);this.C.registerConnectTransportProvider({unary:(o,a,l,c,u,h,f)=>GT(`${o.typeName}.${a.name}`,g=>{const p=s(g,u);return n(o,a,l,c,p,h,f)}),stream:(o,a,l,c,u,h,f)=>GT(`${o.typeName}.${a.name}`,g=>{const p=s(g,u);return r(o,a,l,c,p,h,f)})})}async $registerDiffingProvider(){const e=(t,s)=>this.a.$getDiffingProviderWordDiff(t,s);this.r.registerDiffingProvider({wordDiff:e})}async $unregisterDiffingProvider(){this.r.unregisterDiffingProvider()}async $registerEverythingProvider(){const e=(t,s)=>this.a.$getEverythingProviderRunCommand(t,s);this.t.registerEverythingProvider({runCommand:e})}async $unregisterEverythingProvider(){this.t.unregisterEverythingProvider()}async $registerEverythingProviderAllLocal(){const e=(t,s)=>this.a.$getEverythingAllLocalProviderRunCommand(t,s);this.t.registerEverythingProviderAllLocal({runCommand:e})}async $unregisterEverythingProviderAllLocal(){this.t.unregisterEverythingProviderAllLocal()}async $showWebCmdKInputBox(e){return this.w.showWebCmdKInputBox(e)}async $registerMCPServer(e,t,s){return this.P.registerMCPServer(e,t,s)}async $unregisterMCPServer(e,t){return this.P.unregisterMCPServer(e,t)}async $updateUploadProgress(e,t,s=!1){s?this.c.setNonPersistentStorage("repoProgressBars",n=>n.filter(r=>r.repoId!==n$.id)):this.c.setNonPersistentStorage("repoProgressBars",n=>n.find(o=>o.repoId===n$.id)?n.map(o=>o.repoId===n$.id?{repoId:n$.id,progress:e,uploadType:t}:o):[...n,{repoId:n$.id,progress:e,uploadType:t}])}async $getCursorAuthToken(){return await this.f.getAccessToken()}async $getSemanticSearchResultsFromServer(e){return await this.g.parallelSearch(e.query,e.topK,e.finalK,e.options)}async $getCursorCreds(){return Promise.resolve(this.c.applicationUserPersistentStorage.cursorCreds)}async $getPrivacyMode(){return Promise.resolve(this.f.reactivePrivacyMode())}async $getEligibleForSnippetLearning(){return Promise.resolve(this.f.eligibleForSnippetLearning())}async $isFileSyncClientEnabled(){return this.c.applicationUserPersistentStorage.isFileSyncClientEnabled}async $cppEnabled(){return this.c.applicationUserPersistentStorage.cppEnabled}async $cppConfig(){return this.c.applicationUserPersistentStorage.cppConfig}async $membershipType(){return this.c.applicationUserPersistentStorage.membershipType}async $preferredEmbeddingModel(){return this.c.workspaceUserPersistentStorage.indexingData.preferredEmbeddingModel===VO.UNSPECIFIED&&this.c.applicationUserPersistentStorage.preferredEmbeddingModel!==VO.UNSPECIFIED&&(this.c.setWorkspaceUserPersistentStorage("indexingData","preferredEmbeddingModel",this.c.applicationUserPersistentStorage.preferredEmbeddingModel),this.c.setApplicationUserPersistentStorage("preferredEmbeddingModel",VO.UNSPECIFIED)),this.c.workspaceUserPersistentStorage.indexingData.preferredEmbeddingModel}$publicLogCapture(e){this.j.publicLogCapture(e)}async $shouldBlockUriFromReading(e){return this.N.shouldBlockUriFromReading(e)}async $shouldIgnoreUri(e){return this.N.shouldIgnoreUri(e)?.type}async $adminBlocklistPath(){return(await this.f.adminBlocklistPath()).fsPath}async $adminUnifiedJsonBlocklistPath(){return(await this.f.adminUnifiedJsonBlocklistPath()).fsPath}async $sendEnvelope(e,t){await this.H.sendEnvelope(e,t)}async $sendScopeUpdate(e,t){await this.H.sendScopeUpdate(e,t)}async $getMachineId(){return this.J.getMachineId()}async $getMacMachineId(){return this.J.getMacMachineId()}$addRcpLog(e){}};CWs=__decorate([ga(vo.MainThreadCursor),__param(1,Vi),__param(2,_c),__param(3,Eb),__param(4,Mt),__param(5,At),__param(6,qL),__param(7,cbe),__param(8,HHs),__param(9,$w),__param(10,zlt),__param(11,CYt),__param(12,Ylt),__param(13,WHs),__param(14,$fe),__param(15,yR),__param(16,V0),__param(17,D0e),__param(18,ost),__param(19,qx),__param(20,k0),__param(21,Hf),__param(22,hbe),__param(23,hR)],CWs),de(),Xt(),Ra(),ee();var SWs="timeline",i9r="timeline",dne=Be(i9r);rf();var xWs=class{constructor(e,t,s){this.c=t,this.d=s,this.b=new Map,this.a=e.getProxy(Bo.ExtHostTimeline)}$registerTimelineProvider(e){this.c.trace(`MainThreadTimeline#registerTimelineProvider: id=${e.id}`);const t=this.a,s=this.b;let n=s.get(e.id);n===void 0&&(n=new $,s.set(e.id,n)),this.d.registerTimelineProvider({...e,onDidChange:n.event,async provideTimeline(r,o,a){return uh(await t.$getTimeline(e.id,r,o,a))},dispose(){s.delete(e.id),n?.dispose()}})}$unregisterTimelineProvider(e){this.c.trace(`MainThreadTimeline#unregisterTimelineProvider: id=${e}`),this.d.unregisterTimelineProvider(e)}$emitTimelineChangeEvent(e){this.c.trace(`MainThreadTimeline#emitChangeEvent: id=${e.id}, uri=${e.uri?.toString(!0)}`),this.b.get(e.id)?.fire(e)}dispose(){}};xWs=__decorate([ga(vo.MainThreadTimeline),__param(1,Mt),__param(2,dne)],xWs),de(),W(),Ie(),gt(),Sn(),ni(),cn(),Sr(),Ie();var kWs=0,s9r=class{constructor(i,e,t,s){this.result=i,this.fromTaskId=e,this.b=t,this.c=s,this.a=new Xs,this.didAddCoverage=bE(this),this.tree=new jse,this.associatedData=new Map}*allPerTestIDs(){const i=new Set;for(const e of this.tree.nodes)if(e.value&&e.value.perTestData)for(const t of e.value.perTestData)i.has(t)||(i.add(t),yield t)}append(i,e){const t=this.getComputedForUri(i.uri),s=this.result,n=(a,l)=>{l[a]?(l[a].covered+=(i[a]?.covered||0)-(t?.[a]?.covered||0),l[a].total+=(i[a]?.total||0)-(t?.[a]?.total||0)):i[a]&&(l[a]={...i[a]})},r=[...this.f(i.uri,!0)],o=[];this.tree.mutatePath(this.f(i.uri,!1),a=>{if(o.push(a),o.length===r.length)if(a.value){const l=a.value;l.id=i.id,l.statement=i.statement,l.branch=i.branch,l.declaration=i.declaration}else{const l=a.value=new R0e(i,s,this.c);this.a.set(i.uri,l)}else if(a.value)n("statement",a.value),n("branch",a.value),n("declaration",a.value),a.value.didChange.trigger(e);else{const l=Ln(i);l.id=String(kWs++),l.uri=this.g(r.slice(0,o.length)),a.value=new IWs(l,s)}if(i.testIds){a.value.perTestData??=new Set;for(const l of i.testIds)a.value.perTestData.add(l)}}),o&&this.didAddCoverage.trigger(e,o)}filterTreeForTest(i){const e=new jse;for(const t of this.tree.values())if(t instanceof R0e){if(!t.perTestData?.has(i.toString()))continue;const s=[...this.f(t.uri,!0)],n=[];e.mutatePath(this.f(t.uri,!1),r=>{n.push(r),r.value??=new DWs(this.g(s.slice(0,n.length)),t.fromResult)})}return e}getAllFiles(){return this.a}getUri(i){return this.a.get(i)}getComputedForUri(i){return this.tree.find(this.f(i,!1))}*f(i,e){yield i.scheme,yield i.authority,yield*(!e&&this.b.extUri.ignorePathCasing(i)?i.path.toLowerCase():i.path).split("/")}g(i){return V.from({scheme:i[0],authority:i[1],path:i.slice(2).join("/")})}},Eri=(i,e,t)=>{let s=i.covered,n=i.total;return e&&(s+=e.covered,n+=e.total),t&&(s+=t.covered,n+=t.total),n===0?1:s/n},EWs=class{get tpc(){return Eri(this.statement,this.branch,this.declaration)}constructor(i,e){this.fromResult=e,this.didChange=bE(this),this.id=i.id,this.uri=i.uri,this.statement=i.statement,this.branch=i.branch,this.declaration=i.declaration}},IWs=class extends EWs{},DWs=class extends IWs{constructor(i,e){super({id:String(kWs++),uri:i,statement:{covered:0,total:0}},e)}},R0e=class extends EWs{get hasSynchronousDetails(){return this.a instanceof Array||this.b}constructor(i,e,t){super(i,e),this.f=t}async detailsForTest(i,e=ht.None){this.c??=new Map;const t=i.toString(),s=this.c.get(t);if(s)return s;const n=(async()=>{try{return await this.f.getCoverageDetails(this.id,t,e)}catch(r){throw this.c?.delete(t),r}})();return this.c.set(t,n),n}async details(i=ht.None){this.a??=this.f.getCoverageDetails(this.id,void 0,i);try{const e=await this.a;return this.b=!0,e}catch(e){throw this.a=void 0,e}}};de(),So(),W(),Sr(),ke(),ee(),jt(),W(),jt();var n9r={deserialize:i=>JSON.parse(i),serialize:i=>JSON.stringify(i)},LA=class extends H{constructor(e,t){super(),this.h=t,this.b=e.key,this.c=e.scope,this.f=e.target,this.a=e.serialization??n9r,this.onDidChange=this.h.onDidChangeValue(this.c,this.b,this.B)}get(e){if(this.g===void 0){const t=this.h.get(this.b,this.c);this.g=t===void 0?e:this.a.deserialize(t)}return this.g}store(e){this.g=e,this.h.store(this.b,this.a.serialize(e),this.c,this.f)}delete(){this.h.remove(this.b,this.c)}};LA=__decorate([__param(1,lt)],LA),K(),ke();var yn;(function(i){i.providerCount=new he("testing.providerCount",0),i.canRefreshTests=new he("testing.canRefresh",!1,{type:"boolean",description:d(11405,null)}),i.isRefreshingTests=new he("testing.isRefreshing",!1,{type:"boolean",description:d(11406,null)}),i.isContinuousModeOn=new he("testing.isContinuousModeOn",!1,{type:"boolean",description:d(11407,null)}),i.hasDebuggableTests=new he("testing.hasDebuggableTests",!1,{type:"boolean",description:d(11408,null)}),i.hasRunnableTests=new he("testing.hasRunnableTests",!1,{type:"boolean",description:d(11409,null)}),i.hasCoverableTests=new he("testing.hasCoverableTests",!1,{type:"boolean",description:d(11410,null)}),i.hasNonDefaultProfile=new he("testing.hasNonDefaultProfile",!1,{type:"boolean",description:d(11411,null)}),i.hasConfigurableProfile=new he("testing.hasConfigurableProfile",!1,{type:"boolean",description:d(11412,null)}),i.supportsContinuousRun=new he("testing.supportsContinuousRun",!1,{type:"boolean",description:d(11413,null)}),i.isParentRunningContinuously=new he("testing.isParentRunningContinuously",!1,{type:"boolean",description:d(11414,null)}),i.activeEditorHasTests=new he("testing.activeEditorHasTests",!1,{type:"boolean",description:d(11415,null)}),i.cursorInsideTestRange=new he("testing.cursorInsideTestRange",!1,{type:"boolean",description:d(11416,null)}),i.isTestCoverageOpen=new he("testing.isTestCoverageOpen",!1,{type:"boolean",description:d(11417,null)}),i.hasPerTestCoverage=new he("testing.hasPerTestCoverage",!1,{type:"boolean",description:d(11418,null)}),i.isCoverageFilteredToTest=new he("testing.isCoverageFilteredToTest",!1,{type:"boolean",description:d(11419,null)}),i.coverageToolbarEnabled=new he("testing.coverageToolbarEnabled",!0,{type:"boolean",description:d(11420,null)}),i.inlineCoverageEnabled=new he("testing.inlineCoverageEnabled",!1,{type:"boolean",description:d(11421,null)}),i.canGoToRelatedCode=new he("testing.canGoToRelatedCode",!1,{type:"boolean",description:d(11422,null)}),i.canGoToRelatedTest=new he("testing.canGoToRelatedTest",!1,{type:"boolean",description:d(11423,null)}),i.peekHasStack=new he("testing.peekHasStack",!1,{type:"boolean",description:d(11424,null)}),i.capabilityToContextKey={2:i.hasRunnableTests,8:i.hasCoverableTests,4:i.hasDebuggableTests,16:i.hasNonDefaultProfile,32:i.hasConfigurableProfile,64:i.supportsContinuousRun},i.hasAnyResults=new he("testing.hasAnyResults",!1),i.viewMode=new he("testing.explorerViewMode","list"),i.viewSorting=new he("testing.explorerViewSorting","location"),i.isRunning=new he("testing.isRunning",!1),i.isInPeek=new he("testing.isInPeek",!1),i.isPeekVisible=new he("testing.isPeekVisible",!1),i.peekItemType=new he("peekItemType",void 0,{type:"string",description:d(11425,null)}),i.controllerId=new he("controllerId",void 0,{type:"string",description:d(11426,null)}),i.testItemExtId=new he("testId",void 0,{type:"string",description:d(11427,null)}),i.testItemHasUri=new he("testing.testItemHasUri",!1,{type:"boolean",description:d(11428,null)}),i.testItemIsHidden=new he("testing.testItemIsHidden",!1,{type:"boolean",description:d(11429,null)}),i.testMessageContext=new he("testMessage",void 0,{type:"string",description:d(11430,null)}),i.testResultOutdated=new he("testResultOutdated",void 0,{type:"boolean",description:d(11431,null)}),i.testResultState=new he("testResultState",void 0,{type:"string",description:d(11432,null)}),i.testProfileContextGroup=new he("testing.profile.context.group",void 0,{type:"string",description:d(11433,null)})})(yn||(yn={}));var Up=Be("testProfileService"),F4=(i,e)=>i.controllerId===e.controllerId&&(Nc.isRoot(e.item.extId)||!i.tag||e.item.tags.includes(i.tag)),Iri=(i,e)=>i.isDefault!==e.isDefault?i.isDefault?-1:1:i.label.localeCompare(e.label),TWs=i=>[[yn.hasRunnableTests.key,(i&2)!==0],[yn.hasDebuggableTests.key,(i&4)!==0],[yn.hasCoverableTests.key,(i&8)!==0]],Dri=class extends H{constructor(e,t){super(),this.h=this.D(new $),this.j=new Map,this.onDidChange=this.h.event,t.remove("testingPreferredProfiles",1),this.f=this.D(new LA({key:"testingPreferredProfiles2",scope:1,target:1},t)),this.g={2:yn.hasRunnableTests.bindTo(e),4:yn.hasDebuggableTests.bindTo(e),8:yn.hasCoverableTests.bindTo(e),16:yn.hasNonDefaultProfile.bindTo(e),32:yn.hasConfigurableProfile.bindTo(e),64:yn.supportsContinuousRun.bindTo(e)},this.m()}addProfile(e,t){const s=this.f.get()?.[e.id]?.[t.profileId],n={...t,isDefault:s??t.isDefault,wasInitiallyDefault:t.isDefault};let r=this.j.get(t.controllerId);r?(r.profiles.push(n),r.profiles.sort(Iri)):(r={profiles:[n],controller:e},this.j.set(t.controllerId,r)),this.m(),this.h.fire()}updateProfile(e,t,s){const n=this.j.get(e);if(!n)return;const r=n.profiles.find(o=>o.controllerId===e&&o.profileId===t);if(r){if(Object.assign(r,s),n.profiles.sort(Iri),s.isDefault!==void 0){const o=Ln(this.f.get({}));Tri(o,r,s.isDefault),this.f.store(o)}this.h.fire()}}configure(e,t){this.j.get(e)?.controller.configureRunProfile(t)}removeProfile(e,t){const s=this.j.get(e);if(!s)return;if(!t){this.j.delete(e),this.h.fire();return}const n=s.profiles.findIndex(r=>r.profileId===t);n!==-1&&(s.profiles.splice(n,1),this.m(),this.h.fire())}capabilitiesForTest(e){const t=this.j.get(Nc.root(e.extId));if(!t)return 0;let s=0;for(const n of t.profiles)(!n.tag||e.tags.includes(n.tag))&&(s|=s&n.group?16:n.group);return s}all(){return this.j.values()}getControllerProfiles(e){return this.j.get(e)?.profiles??[]}getGroupDefaultProfiles(e,t){const s=t?this.j.get(t)?.profiles||[]:[...Ps.flatMap(this.j.values(),r=>r.profiles)],n=s.filter(r=>r.group===e&&r.isDefault);if(n.length===0){const r=s.find(o=>o.group===e);r&&n.push(r)}return n}setGroupDefaultProfiles(e,t){const s={};for(const n of this.j.values()){s[n.controller.id]={};for(const r of n.profiles)r.group===e&&Tri(s,r,t.some(o=>o.profileId===r.profileId));for(const r of n.profiles){if(r.group===e)continue;const o=n.profiles.find(a=>a.group===e&&a.label===r.label);o&&Tri(s,r,o.isDefault)}n.profiles.sort(Iri)}this.f.store(s),this.h.fire()}getDefaultProfileForTest(e,t){return this.getControllerProfiles(t.controllerId).find(s=>(s.group&e)!==0&&F4(s,t))}m(){let e=0;for(const{profiles:t}of this.j.values())for(const s of t)e|=e&s.group?16:s.group,e|=s.supportsContinuousRun?64:0;for(const t of yBr)this.g[t].set((e&t)!==0)}};Dri=__decorate([__param(0,Le),__param(1,lt)],Dri);var Tri=(i,e,t)=>{e.isDefault=t,i[e.controllerId]??={},e.isDefault!==e.wasInitiallyDefault?i[e.controllerId][e.profileId]=e.isDefault:delete i[e.controllerId][e.profileId]};Qe(),Jn(),de(),Ec(),W(),it(),K(),ai(),So(),Sr();var RP={2:6,6:5,4:4,1:3,3:2,0:0,5:1},fne=i=>i===6||i===4,r9r=i=>i===6||i===4||i===3,Wta=q6i(RP,(i,e)=>({statusNode:!0,state:Number(e),priority:i})),Lri=(i,e)=>RP[e]-RP[i],Pri=(...i)=>{switch(i.length){case 0:return 0;case 1:return i[0];case 2:return RP[i[0]]>RP[i[1]]?i[0]:i[1];default:{let e=i[0];for(let t=1;t<i.length;t++)RP[e]<RP[i[t]]&&(e=i[t]);return e}}},Nri=Object.keys(RP).map(i=>Number(i)).sort(Lri),LWs={3:0,5:1,4:2,6:3},Rri=()=>new Uint32Array(Nri.length),o9r=i=>"getOwnDuration"in i,Ari=(i,e,t=!1)=>{let s=i.getCurrentComputedState(e);if(s===void 0||t){s=i.getOwnState(e)??0;let n=0;const r=Rri();for(const o of i.getChildren(e)){const a=Ari(i,o);n++,r[a]++,s=a===5&&s===0?5:Pri(s,a)}n>a9r&&NWs.set(e,r),i.setComputedState(e,s)}return s},PWs=(i,e,t=!1)=>{let s=i.getCurrentComputedDuration(e);if(s===void 0||t){const n=i.getOwnDuration(e);if(n!==void 0)s=n;else{s=void 0;for(const r of i.getChildren(e)){const o=PWs(i,r);o!==void 0&&(s=(s||0)+o)}}i.setComputedDuration(e,s)}return s},a9r=64,NWs=new WeakMap,A0e=(i,e,t,s=!0)=>{const n=i.getCurrentComputedState(e),r=RP[n],o=t??Ari(i,e,!0),a=RP[o],l=new Set;if(a!==r){i.setComputedState(e,o),l.add(e);let c=n,u=o;for(const h of i.getParents(e)){const f=NWs.get(h);f&&(f[c]--,f[u]++);const g=i.getCurrentComputedState(h);if(a>r){if(g!==void 0&&RP[g]>=a||f&&f[u]>1)break;i.setComputedState(h,o),l.add(h)}else{if(g===void 0||RP[g]>r||f&&f[c]>0)break;u=Ari(i,h,!0),i.setComputedState(h,u),l.add(h)}c=g}}if(o9r(i)&&s)for(const c of Ps.concat(Ps.single(e),i.getParents(e))){const u=i.getCurrentComputedDuration(c),h=PWs(i,c,!0);if(u===h)break;i.setComputedDuration(c,h),l.add(c)}return l},l9r={buffers:[],length:0,onDidWriteData:ce.None,endPromise:Promise.resolve(),getRange:()=>Li.alloc(0),getRangeIter:()=>[]},c9r=class{constructor(){this.a=new $,this.c=new xl,this.d=0,this.onDidWriteData=this.a.event,this.endPromise=this.c.p,this.buffers=[]}get length(){return this.d}getRange(i,e){const t=Li.alloc(e);let s=0;for(const n of this.getRangeIter(i,e))t.buffer.set(n.buffer,s),s+=n.byteLength;return s<e?t.slice(0,s):t}*getRangeIter(i,e){let t=0,s=0;for(const n of this.buffers){if(s+n.byteLength<=i){s+=n.byteLength;continue}const r=Math.max(0,i-s),o=Math.min(n.byteLength,r+e-t);if(yield n.slice(r,o),t+=o-r,s+=n.byteLength,t===e)break}}append(i,e){const t=this.d;let s=i.byteLength;if(e===void 0)return this.e(i),{offset:t,length:s};let n;(function(l){l[l.CR=13]="CR",l[l.LF=10]="LF"})(n||(n={}));const r=Li.fromString(RWs(e,!0)),o=Li.fromString(RWs(e,!1));s+=r.byteLength+o.byteLength,this.e(r);let a=i.byteLength;for(;a>0;a--){const l=i.buffer[a-1];if(l!==13&&l!==10)break}return this.e(i.slice(0,a)),this.e(o),this.e(i.slice(a)),{offset:t,length:s}}e(i){i.byteLength!==0&&(this.buffers.push(i),this.a.fire(i),this.d+=i.byteLength)}end(){this.c.complete()}},u9r=function*(i,e){for(const t of Nc.fromString(e.item.extId).idsToRoot())yield i.getStateById(t.toString())},h9r=i=>{for(const e of Nri)if(i[e]>0)return e;return 0},RWs=(i,e)=>`\x1B]633;SetMark;Id=${hsi(i,e)};Hidden\x07`,d9r=(i,e,t)=>({controllerId:i,expand:0,item:{...e},children:[],tasks:[],ownComputedState:0,computedState:0}),AWs;(function(i){i[i.ComputedStateChange=0]="ComputedStateChange",i[i.OwnStateChange=1]="OwnStateChange",i[i.NewMessage=2]="NewMessage"})(AWs||(AWs={}));var Hy=class extends H{get completedAt(){return this.n}get tests(){return this.j.values()}getTestById(e){return this.j.get(e)?.item}constructor(e,t,s,n,r){super(),this.id=e,this.persist=t,this.request=s,this.insertOrder=n,this.u=r,this.a=this.D(new $),this.f=this.D(new $),this.g=this.D(new $),this.h=this.D(new $),this.j=new Map,this.m=0,this.startedAt=Date.now(),this.onChange=this.h.event,this.onComplete=this.a.event,this.onNewTask=this.f.event,this.onEndTask=this.g.event,this.tasks=[],this.name=d(11434,null,new Date().toLocaleString(Hc)),this.counts=Rri(),this.q={getOwnState:o=>o.ownComputedState,getCurrentComputedState:o=>o.computedState,setComputedState:(o,a)=>o.computedState=a,getChildren:o=>o.children,getParents:o=>{const{j:a}=this;return function*(){const l=Nc.fromString(o.item.extId).parentId;if(l)for(const c of l.idsToRoot())yield a.get(c.toString())}()}},this.F=new ya(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(o=>({id:o.id,name:o.name,ctrlId:o.ctrlId,hasCoverage:!!o.coverage.get()})),name:this.name,request:this.request,items:[...this.j.values()].map(qwe.serializeWithoutMessages)})),this.G=new ya(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(o=>({id:o.id,name:o.name,ctrlId:o.ctrlId,hasCoverage:!!o.coverage.get()})),name:this.name,request:this.request,items:[...this.j.values()].map(qwe.serialize)}))}getStateById(e){return this.j.get(e)}appendOutput(e,t,s,n){const r=e.byteLength>100?e.slice(0,100).toString()+"\u2026":e.toString();let o;(n||s)&&(o=this.m++);const a=this.C(t),l=this.tasks[a],{offset:c,length:u}=l.output.append(e,o),h={location:s,message:r,offset:c,length:u,marker:o,type:1},f=n&&this.j.get(n);f?(f.tasks[a].messages.push(h),this.h.fire({item:f,result:this,reason:2,message:h})):l.otherMessages.push(h)}addTask(e){this.tasks.push({...e,coverage:Ks(this,void 0),otherMessages:[],output:new c9r});for(const t of this.tests)t.tasks.push({duration:void 0,messages:[],state:0});this.f.fire(this.tasks.length-1)}addTestChainToRun(e,t){let s=this.j.get(t[0].extId);s||(s=this.z(e,t[0],null));for(let n=1;n<t.length;n++)s=this.z(e,t[n],s.item.extId)}updateState(e,t,s,n){const r=this.j.get(e);if(!r)return;const o=this.C(t),a=LWs[r.tasks[o].state],l=LWs[s];a!==void 0&&(l===void 0||l<a)||this.y(r,o,s,n)}appendMessage(e,t,s){const n=this.j.get(e);n&&(n.tasks[this.C(t)].messages.push(s),this.h.fire({item:n,result:this,reason:2,message:s}))}markTaskComplete(e){const t=this.C(e),s=this.tasks[t];s.running=!1,s.output.end(),this.w(0,e,n=>n.state===1||n.state===2),this.g.fire(t)}markComplete(){if(this.n!==void 0)throw new Error("cannot complete a test result multiple times");for(const e of this.tasks)e.running&&this.markTaskComplete(e.id);this.n=Date.now(),this.a.fire(),this.u.publicLog2("test.outcomes",{failures:this.counts[6]+this.counts[4],passes:this.counts[3],controller:this.request.targets.map(e=>e.controllerId).join(",")})}markRetired(e){for(const[t,s]of this.j)!s.retired&&(!e||e.hasKeyOrParent(Nc.fromString(t).path))&&(s.retired=!0,this.h.fire({reason:0,item:s,result:this}))}toJSON(){return this.completedAt&&this.persist?this.F.value:void 0}toJSONWithMessages(){return this.completedAt&&this.persist?this.G.value:void 0}w(e,t,s){const n=this.C(t);for(const r of this.j.values())s(r.tasks[n],r)&&this.y(r,n,e)}y(e,t,s,n){const r=e.ownComputedState,o=e.ownDuration,a={item:e,result:this,reason:1,previousState:r,previousOwnDuration:o};e.tasks[t].state=s,n!==void 0&&(e.tasks[t].duration=n,e.ownDuration=Math.max(e.ownDuration||0,n));const l=Pri(...e.tasks.map(c=>c.state));if(l===r){n!==o&&this.h.fire(a);return}e.ownComputedState=l,this.counts[r]--,this.counts[l]++,A0e(this.q,e).forEach(c=>this.h.fire(c===e?a:{item:c,result:this,reason:0}))}z(e,t,s){const n=d9r(e,t,s);if(this.j.set(t.extId,n),this.counts[0]++,s&&this.j.get(s)?.children.push(n),this.tasks.length)for(let r=0;r<this.tasks.length;r++)n.tasks.push({duration:void 0,messages:[],state:0});return n}C(e){const t=this.tasks.findIndex(s=>s.id===e);if(t===-1)throw new Error(`Unknown task ${e} in updateState`);return t}};Hy=__decorate([__param(4,At)],Hy);var f9r=class{get tests(){return this.a.values()}constructor(i,e,t=!0){this.c=e,this.d=t,this.counts=Rri(),this.a=new Map,this.id=e.id,this.completedAt=e.completedAt,this.tasks=e.tasks.map((s,n)=>({id:s.id,name:s.name||d(11435,null),ctrlId:s.ctrlId,running:!1,coverage:Ks(this,void 0),output:l9r,otherMessages:[]})),this.name=e.name,this.request=e.request;for(const s of e.items){const n=qwe.deserialize(i,s);this.counts[n.ownComputedState]++,this.a.set(s.item.extId,n)}}getStateById(i){return this.a.get(i)}toJSON(){return this.d?this.c:void 0}toJSONWithMessages(){return this.toJSON()}};Nf(),Qe(),de(),Zy(),W(),Ns(),ke(),ee(),ai(),Jn(),W(),Vt(),Ie(),Yo(),Pt(),ee(),Xt(),jt(),Sn(),oi();var MWs=128,g9r=16,p9r=1024*128,m9r=.2,$Ws=Be("ITestResultStorage"),Ibt=1,Mri=class extends H{constructor(e,t,s){super(),this.b=e,this.c=t,this.f=s,this.a=this.D(new LA({key:"storedTestResults",scope:1,target:1},this.c))}async read(){const e=await Promise.all(this.a.get([]).map(async s=>{if(s.rev===Ibt)try{const n=await this.g(s.id);return n?{rec:s,result:new f9r(this.b,n)}:void 0}catch(n){this.f.warn(`Error deserializing stored test result ${s.id}`,n);return}})),t=e.filter(Lr);return t.length!==e.length&&this.a.store(t.map(({rec:s})=>s)),t.map(({result:s})=>s)}getResultOutputWriter(e){const t=PRt();return this.q(e,t),t}async persist(e){const t=new Map(this.a.get([]).map(({id:o,bytes:a})=>[o,a])),s=[],n=[];let r=p9r;for(let o=0;o<e.length&&o<MWs&&(r>0||s.length<g9r);o++){const a=e[o],l=t.get(a.id);if(l!==void 0){t.delete(a.id),s.push({id:a.id,rev:Ibt,bytes:l}),r-=l;continue}const c=a.toJSON();if(!c)continue;const u=Li.fromString(JSON.stringify(c));n.push(this.n(a.id,c)),s.push({id:a.id,rev:Ibt,bytes:u.byteLength}),r-=u.byteLength}for(const o of t.keys())n.push(this.m(o).catch(()=>{}));this.a.store(s),await Promise.all(n)}};Mri=__decorate([__param(0,Ds),__param(1,lt),__param(2,Mt)],Mri);var $ri=class extends Mri{constructor(e,t,s,n,r,o){super(e,t,s),this.t=r,this.r=V.joinPath(o.workspaceStorageHome,n.getWorkspace().id,"testResults")}async g(e){const t=await this.t.readFile(this.H(e));return JSON.parse(t.value.toString())}n(e,t){return this.t.writeFile(this.H(e),Li.fromString(JSON.stringify(t)))}m(e){return this.t.del(this.H(e)).catch(()=>{})}async j(e,t,s){try{const{value:n}=await this.t.readFile(this.I(e),{position:t,length:s});return n}catch{return Li.alloc(0)}}async h(e){try{const{value:t}=await this.t.readFileStream(this.I(e));return t}catch{return IO(Li.alloc(0))}}async q(e,t){await this.t.createFile(this.I(e),t)}async persist(e){await super.persist(e),Math.random()<m9r&&await this.G()}async G(){const{children:e}=await this.t.resolve(this.r);if(!e)return;const t=new Set(this.a.get([]).filter(s=>s.rev===Ibt).map(s=>s.id));await Promise.all(e.filter(s=>!t.has(s.name.replace(/\.[a-z]+$/,""))).map(s=>this.t.del(s.resource).catch(()=>{})))}H(e){return V.joinPath(this.r,`${e}.json`)}I(e){return V.joinPath(this.r,`${e}.output`)}};$ri=__decorate([__param(0,Ds),__param(1,lt),__param(2,Mt),__param(3,kt),__param(4,yt),__param(5,Lo)],$ri);var b9r=i=>i.results.length>0&&i.results[0].completedAt===void 0,wm=Be("testResultService"),Fri=class extends H{get results(){return this.s(),this.g}constructor(e,t,s,n){super(),this.w=t,this.y=s,this.z=n,this.f=this.D(new $),this.g=[],this.h=[],this.j=this.D(new $),this.m=0,this.onResultsChanged=this.f.event,this.onTestChanged=this.j.event,this.s=nv(()=>this.w.read().then(r=>{for(let o=r.length-1;o>=0;o--)this.push(r[o])})),this.u=new Cn(()=>this.H(),500),this.D(Oe(()=>si(this.h))),this.n=yn.isRunning.bindTo(e),this.q=yn.hasAnyResults.bindTo(e)}getStateById(e){for(const t of this.results){const s=t.getStateById(e);if(s&&s.computedState!==0)return[t,s]}}createLiveResult(e){if("targets"in e){const n=Wt();return this.push(new Hy(n,!0,e,this.m++,this.z))}let t;e.profile&&(t=this.y.getControllerProfiles(e.controllerId).find(r=>r.profileId===e.profile.id));const s={preserveFocus:e.preserveFocus,targets:[],exclude:e.exclude,continuous:e.continuous,group:t?.group??2};return t&&s.targets.push({profileId:t.profileId,controllerId:e.controllerId,testIds:e.include}),this.push(new Hy(e.id,e.persist,s,this.m++,this.z))}push(e){if(e.completedAt===void 0)this.results.unshift(e);else{const s=lN(this.results,n=>n.completedAt!==void 0&&n.completedAt<=e.completedAt);this.results.splice(s,0,e),this.u.schedule()}this.q.set(!0),this.results.length>MWs&&(this.results.pop(),this.h.pop()?.dispose());const t=new X;if(this.h.push(t),e instanceof Hy)t.add(e),t.add(e.onComplete(()=>this.C(e))),t.add(e.onChange(this.j.fire,this.j)),this.n.set(!0),this.f.fire({started:e});else{this.f.fire({inserted:e});for(const s of e.tests)for(const n of this.results)if(n===e){this.j.fire({item:s,result:e,reason:0});break}else if(n.getStateById(s.item.extId)!==void 0)break}return e}getResult(e){return this.results.find(t=>t.id===e)}clear(){const e=[],t=[];for(const s of this.results)s.completedAt!==void 0?t.push(s):e.push(s);this.g=e,this.u.schedule(),e.length===0&&this.q.set(!1),this.f.fire({removed:t})}C(e){this.F(),this.G(),this.u.schedule(),this.f.fire({completed:e})}F(){this.results.sort((e,t)=>{if(!!e.completedAt!=!!t.completedAt)return e.completedAt===void 0?-1:1;const s=e instanceof Hy?e.insertOrder:-1;return(t instanceof Hy?t.insertOrder:-1)-s})}G(){this.n.set(b9r(this))}async H(){await this.s(),this.w.persist(this.results)}};Fri=__decorate([__param(0,Le),__param(1,$Ws),__param(2,Up),__param(3,At)],Fri),ep(),ni(),So(),ee();var Rc=Be("testService"),v9r=i=>!Ps.some(i.rootItems,e=>e.children.size>0),y9r=(i,e)=>{if(typeof e=="string"&&(e=Nc.fromString(e)),e.isRoot)return{controller:e.toString()};const t={$mid:16,tests:[]};for(const s of e.idsFromRoot())if(!s.isRoot){const n=i.getNodeById(s.toString());n&&t.tests.push(n)}return t},w9r=async(i,e,t=ht.None)=>{const s=[...Nc.fromString(e).idsFromRoot()];let n=0;for(let r=s.length-1;!t.isCancellationRequested&&r>=n;){const o=s[r].toString(),a=i.getNodeById(o);if(!a){r--;continue}if(r===s.length-1)return a;a.children.has(s[r+1].toString())||await i.expand(o,0),n=r+1,r=s.length-1}},FWs=(i,e)=>{if(e.item.busy)return new Promise(t=>{const s=i.onDidProcessDiff(()=>{i.collection.getNodeById(e.item.extId)?.item.busy!==!0&&(t(),s.dispose())})})},OWs=async function*(i,e,t,s=!0){for(const n of i.collection.all)n.item.uri&&(e.extUri.isEqual(t,n.item.uri)&&(yield n),e.extUri.isEqualOrParent(t,n.item.uri)&&(n.expand===1&&await i.collection.expand(n.item.extId,1),s&&await FWs(i,n)))},C9r=async function*(i,e,t,s=!0){const n=[i.collection.rootIds];for(;n.length;)for(const r of n.pop()){const o=i.collection.getNodeById(r);o&&(o.item.uri&&e.extUri.isEqualOrParent(o.item.uri,t)?yield o:(!o.item.uri||e.extUri.isEqualOrParent(t,o.item.uri))&&(o.expand===1&&await i.collection.expand(o.item.extId,1),s&&await FWs(i,o),n.push(o.children.values())))}},S9r=(i,e)=>{if(e.length<2)return e;const t=new jse;for(const r of e)t.insert(Nc.fromString(r.item.extId).path,r);const s=[],n=(r,o)=>{if(o.value)return o.value;xQe(!!o.children,"expect to have children");const a=[];for(const[u,h]of o.children){r.push(u);const f=n(r,h);f&&a.push(f),r.pop()}if(!a.length)return;const l=new Nc(r),c=i.getNodeById(l.toString());if(c?.children.size===a.length)return c;s.push(...a)};for(const[r,o]of t.entries){const a=n([r],o);a&&s.push(a)}return s},_Ws=class extends H{constructor(e,t,s,n,r){super(),this.f=t,this.g=s,this.h=n,this.j=r,this.b=this.D(new Ei),this.c=new Map,this.a=e.getProxy(Bo.ExtHostTesting),this.D(this.g.registerExtHost({provideTestFollowups:(o,a)=>this.a.$provideTestFollowups(o,a),executeTestFollowup:o=>this.a.$executeTestFollowup(o),disposeTestFollowups:o=>this.a.$disposeTestFollowups(o),getTestsRelatedToCode:(o,a,l)=>this.a.$getTestsRelatedToCode(o,a,l)})),this.D(this.g.onDidCancelTestRun(({runId:o,taskId:a})=>{this.a.$cancelExtensionTestRun(o,a)})),this.D(ce.debounce(n.onDidChange,(o,a)=>a)(()=>{const o={};for(const a of[2,4,8])for(const l of this.h.getGroupDefaultProfiles(a))o[l.controllerId]??=[],o[l.controllerId].push(l.profileId);this.a.$setDefaultRunProfiles(o)})),this.D(r.onResultsChanged(o=>{if("completed"in o){const a=o.completed.toJSONWithMessages();a&&this.a.$publishTestResults([a])}else"removed"in o&&o.removed.forEach(a=>{a instanceof Hy&&this.a.$disposeRun(a.id)})}))}$markTestRetired(e){let t;if(e){t=new jse;for(const s of e)t.insert(Nc.fromString(s).path,void 0)}for(const s of this.j.results)s instanceof Hy&&s.markRetired(t)}$publishTestRunProfile(e){const t=this.c.get(e.controllerId);t&&this.h.addProfile(t.instance,e)}$updateTestRunConfig(e,t,s){this.h.updateProfile(e,t,s)}$removeTestProfile(e,t){this.h.removeProfile(e,t)}$addTestsToRun(e,t,s){this.m(t,n=>n.addTestChainToRun(e,s.map(r=>Hwe.deserialize(this.f,r))))}$appendCoverage(e,t,s){this.m(e,n=>{const r=n.tasks.find(a=>a.id===t);if(!r)return;const o=psi.deserialize(this.f,s);to(a=>{let l=r.coverage.read(void 0);l?l.append(o,a):(l=new s9r(n,t,this.f,{getCoverageDetails:(c,u,h)=>this.a.$getCoverageDetails(c,u,h).then(f=>f.map(vsi.deserialize))}),l.append(o,a),r.coverage.set(l,a))})})}$startedExtensionTestRun(e){this.j.createLiveResult(e)}$startedTestRunTask(e,t){this.m(e,s=>s.addTask(t))}$finishedTestRunTask(e,t){this.m(e,s=>s.markTaskComplete(t))}$finishedExtensionTestRun(e){this.m(e,t=>t.markComplete())}$updateTestStateInRun(e,t,s,n,r){this.m(e,o=>o.updateState(s,t,n,r))}$appendOutputToRun(e,t,s,n,r){const o=n&&{uri:V.revive(n.uri),range:Y.lift(n.range)};this.m(e,a=>a.appendOutput(s,t,o,r))}$appendTestMessagesInRun(e,t,s,n){const r=this.j.getResult(e);if(r&&r instanceof Hy)for(const o of n)r.appendMessage(s,t,yA.deserialize(this.f,o))}$registerTestController(e,t,s){const n=new X,r=Ks(`${e}.label`,t),o=Ks(`${e}.cap`,s),a={id:e,label:r,capabilities:o,syncTests:()=>this.a.$syncTests(),refreshTests:l=>this.a.$refreshTests(e,l),configureRunProfile:l=>this.a.$configureRunProfile(e,l),runTests:(l,c)=>this.a.$runControllerTests(l,c),startContinuousRun:(l,c)=>this.a.$startContinuousRun(l,c),expandTest:(l,c)=>this.a.$expandTest(l,isFinite(c)?c:-1),getRelatedCode:(l,c)=>this.a.$getCodeRelatedToTest(l,c).then(u=>u.map(h=>({uri:V.revive(h.uri),range:Y.lift(h.range)})))};n.add(Oe(()=>this.h.removeProfile(e))),n.add(this.g.registerTestController(e,a)),this.c.set(e,{instance:a,label:r,capabilities:o,disposable:n})}$updateController(e,t){const s=this.c.get(e);s&&to(n=>{t.label!==void 0&&s.label.set(t.label,n),t.capabilities!==void 0&&s.capabilities.set(t.capabilities,n)})}$unregisterTestController(e){this.c.get(e)?.disposable.dispose(),this.c.delete(e)}$subscribeToDiffs(){this.a.$acceptDiff(this.g.collection.getReviverDiff().map(nmt.serialize)),this.b.value=this.g.onDidProcessDiff(this.a.$acceptDiff,this.a)}$unsubscribeFromDiffs(){this.b.clear()}$publishDiff(e,t){this.g.publishDiff(e,t.map(s=>nmt.deserialize(this.f,s)))}async $runTests(e,t){return(await this.g.runResolvedTests(e,t)).id}async $getCoverageDetails(e,t,s,n){return await this.j.getResult(e)?.tasks[t]?.coverage.get()?.getUri(V.from(s))?.details(n)||[]}dispose(){super.dispose();for(const e of this.c.values())e.disposable.dispose();this.c.clear()}m(e,t){const s=this.j.getResult(e);return s&&s instanceof Hy?t(s):void 0}};_Ws=__decorate([ga(vo.MainThreadTesting),__param(1,Ds),__param(2,Rc),__param(3,Up),__param(4,wm)],_Ws),W(),Xt(),Qe(),Qe(),ee();var Ori=Be("encryptionService"),Kta=Be("encryptionMainService"),BWs;(function(i){i.kwallet="kwallet",i.kwallet5="kwallet5",i.gnomeLibsecret="gnome-libsecret",i.basic="basic"})(BWs||(BWs={}));var UWs;(function(i){i.unknown="unknown",i.basicText="basic_text",i.gnomeAny="gnome_any",i.gnomeLibsecret="gnome_libsecret",i.gnomeKeyring="gnome_keyring",i.kwallet="kwallet",i.kwallet5="kwallet5",i.kwallet6="kwallet6",i.dplib="dpapi",i.keychainAccess="keychain_access"})(UWs||(UWs={}));function x9r(i){return i==="kwallet"||i==="kwallet5"||i==="kwallet6"}function k9r(i){return i==="gnome_any"||i==="gnome_libsecret"||i==="gnome_keyring"}ee(),jt(),de(),Xt(),W(),Ec();var gne=Be("secretStorageService"),_ri=class extends H{constructor(e,t,s,n){super(),this.h=e,this.j=t,this.m=s,this.n=n,this.a="secret://",this.b=this.D(new $),this.onDidChangeSecret=this.b.event,this.c=new fce,this.f="unknown",this.g=this.D(new X),this.q=new ya(()=>this.s())}get type(){return this.f}get r(){return this.q.value}get(e){return this.c.queue(e,async()=>{const t=await this.r,s=this.w(e);this.n.trace("[secrets] getting secret for key:",s);const n=t.get(s,-1);if(!n){this.n.trace("[secrets] no secret found for key:",s);return}try{this.n.trace("[secrets] decrypting gotten secret for key:",s);const r=this.f==="in-memory"?n:await this.m.decrypt(n);return this.n.trace("[secrets] decrypted secret for key:",s),r}catch(r){this.n.error(r),this.delete(e);return}})}set(e,t){return this.c.queue(e,async()=>{const s=await this.r;this.n.trace("[secrets] encrypting secret for key:",e);let n;try{n=this.f==="in-memory"?t:await this.m.encrypt(t)}catch(o){throw this.n.error(o),o}const r=this.w(e);this.n.trace("[secrets] storing encrypted secret for key:",r),s.store(r,n,-1,1),this.n.trace("[secrets] stored encrypted secret for key:",r)})}delete(e){return this.c.queue(e,async()=>{const t=await this.r,s=this.w(e);this.n.trace("[secrets] deleting secret for key:",s),t.remove(s,-1),this.n.trace("[secrets] deleted secret for key:",s)})}async s(){let e;if(!this.h&&await this.m.isEncryptionAvailable())this.n.trace("[SecretStorageService] Encryption is available, using persisted storage"),this.f="persisted",e=this.j;else{if(this.f==="in-memory")return this.j;this.n.trace("[SecretStorageService] Encryption is not available, falling back to in-memory storage"),this.f="in-memory",e=this.D(new o3i)}return this.g.clear(),this.g.add(e.onDidChangeValue(-1,void 0,this.g)(t=>{this.u(t.key)})),e}t(){this.q=new ya(()=>this.s())}u(e){if(!e.startsWith(this.a))return;const t=e.slice(this.a.length);this.n.trace(`[SecretStorageService] Notifying change in value for secret: ${t}`),this.b.fire(t)}w(e){return`${this.a}${e}`}};_ri=__decorate([__param(1,lt),__param(2,Ori),__param(3,Mt)],_ri);var VWs=class extends H{constructor(e,t,s,n){super(),this.c=t,this.f=s,this.b=new fce,this.a=e.getProxy(Bo.ExtHostSecretState),this.D(this.c.onDidChangeSecret(r=>{try{const{extensionId:o,key:a}=this.n(r);o&&a&&this.a.$onDidChangePassword({extensionId:o,key:a})}catch{}}))}$getPassword(e,t){return this.f.trace(`[mainThreadSecretState] Getting password for ${e} extension: `,t),this.b.queue(e,()=>this.g(e,t))}async g(e,t){const s=this.m(e,t),n=await this.c.get(s);return this.f.trace(`[mainThreadSecretState] ${n?"P":"No p"}assword found for: `,e,t),n}$setPassword(e,t,s){return this.f.trace(`[mainThreadSecretState] Setting password for ${e} extension: `,t),this.b.queue(e,()=>this.h(e,t,s))}async h(e,t,s){const n=this.m(e,t);await this.c.set(n,s),this.f.trace("[mainThreadSecretState] Password set for: ",e,t)}$deletePassword(e,t){return this.f.trace(`[mainThreadSecretState] Deleting password for ${e} extension: `,t),this.b.queue(e,()=>this.j(e,t))}async j(e,t){const s=this.m(e,t);await this.c.delete(s),this.f.trace("[mainThreadSecretState] Password deleted for: ",e,t)}m(e,t){return JSON.stringify({extensionId:e,key:t})}n(e){return JSON.parse(e)}};VWs=__decorate([ga(vo.MainThreadSecretState),__param(1,gne),__param(2,Mt),__param(3,Ob)],VWs),ni(),W(),Ie(),ee();var Dbt=Be("shareService"),HWs=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(Bo.ExtHostShare)}$registerShareProvider(e,t,s,n,r){const o={id:s,label:n,selector:t,priority:r,provideShare:async l=>{const c=await this.a.$provideShare(e,l,ht.None);return typeof c=="string"?c:V.revive(c)}};this.b.set(e,o);const a=this.d.registerShareProvider(o);this.c.set(e,a)}$unregisterShareProvider(e){this.b.has(e)&&this.b.delete(e),this.c.has(e)&&this.c.delete(e)}dispose(){this.b.clear(),si(this.c.values()),this.c.clear()}};HWs=__decorate([ga(vo.MainThreadShare),__param(1,Dbt)],HWs),W(),rf();var WWs=class extends H{constructor(e,t){super(),this.c=t,this.b=this.D(new oo),this.a=e.getProxy(Bo.ExtHostProfileContentHandlers)}async $registerProfileContentHandler(e,t,s,n){this.b.set(e,this.c.registerProfileContentHandler(e,{name:t,description:s,extensionId:n,saveProfile:async(r,o,a)=>{const l=await this.a.$saveProfile(e,r,o,a);return l?uh(l):null},readProfile:async(r,o)=>this.a.$readProfile(e,r,o)}))}async $unregisterProfileContentHandler(e){this.b.deleteAndDispose(e)}};WWs=__decorate([ga(vo.MainThreadProfileContentHandlers),__param(1,ibe)],WWs),ni(),W(),ee();var M0e=Be("IAiRelatedInformationService"),Tbt;(function(i){i[i.SymbolInformation=1]="SymbolInformation",i[i.CommandInformation=2]="CommandInformation",i[i.SearchInformation=3]="SearchInformation",i[i.SettingInformation=4]="SettingInformation"})(Tbt||(Tbt={}));var qWs=class extends H{constructor(e,t){super(),this.c=t,this.b=this.D(new oo),this.a=e.getProxy(Bo.ExtHostAiRelatedInformation)}$getAiRelatedInformation(e,t){return this.c.getRelatedInformation(e,t,ht.None)}$registerAiRelatedInformationProvider(e,t){const s={provideAiRelatedInformation:(n,r)=>this.a.$provideAiRelatedInformation(e,n,r)};this.b.set(e,this.c.registerAiRelatedInformationProvider(t,s))}$unregisterAiRelatedInformationProvider(e){this.b.deleteAndDispose(e)}};qWs=__decorate([ga(vo.MainThreadAiRelatedInformation),__param(1,M0e)],qWs),W(),ee(),Qe(),Et(),bu(),Xt();var Bri,jWs=Be("IAiEmbeddingVectorService"),Uri=class{static{Bri=this}static{this.DEFAULT_TIMEOUT=1e3*10}constructor(e){this.b=e,this.a=[]}isEnabled(){return this.a.length>0}registerAiEmbeddingVectorProvider(e,t){return this.a.push(t),{dispose:()=>{const s=this.a.indexOf(t);s>=0&&this.a.splice(s,1)}}}async getEmbeddingVector(e,t){if(this.a.length===0)throw new Error("No embedding vector providers registered");const s=hl.create(),n=[],r=Ho(Bri.DEFAULT_TIMEOUT),o=t.onCancellationRequested(()=>{o.dispose(),r.cancel()});for(const a of this.a)n.push(nl(async l=>{try{return await a.provideAiEmbeddingVector(Array.isArray(e)?e:[e],l)}catch{}throw await r,new Error("Embedding vector provider timed out")}));n.push(nl(async a=>{const l=a.onCancellationRequested(()=>{r.cancel(),l.dispose()});throw await r,new Error("Embedding vector provider timed out")}));try{const a=await NBi(n);return a.length===1?a[0]:a}finally{s.stop(),this.b.trace(`[AiEmbeddingVectorService]: getEmbeddingVector took ${s.elapsed()}ms`)}}};Uri=Bri=__decorate([__param(0,Mt)],Uri),et(jWs,Uri,1);var zWs=class extends H{constructor(e,t){super(),this.c=t,this.b=this.D(new oo),this.a=e.getProxy(Bo.ExtHostAiEmbeddingVector)}$registerAiEmbeddingVectorProvider(e,t){const s={provideAiEmbeddingVector:(n,r)=>this.a.$provideAiEmbeddingVector(t,n,r)};this.b.set(t,this.c.registerAiEmbeddingVectorProvider(e,s))}$unregisterAiEmbeddingVectorProvider(e){this.b.deleteAndDispose(e)}};zWs=__decorate([ga(vo.MainThreadAiEmbeddingVector),__param(1,jWs)],zWs);var Lbt=class{static{this.ID="workbench.contrib.extensionPoints"}constructor(e){this.a=e,this.a.createInstance(JFr),this.a.createInstance(YFr),this.a.createInstance(nOr),this.a.createInstance(uOr),this.a.createInstance(wti),this.a.createInstance(rii)}};Lbt=__decorate([__param(0,se)],Lbt),Nn(Lbt.ID,Lbt,1),qt(),K(),Tr(),it(),jl(),In(),K(),Ct(),Ne(),ft(),W(),bn(),oi(),it(),Fi(),Tg(),Pn(),de(),Qe(),un(),Lt(),Ix(),Jo(),ke(),Ce();var M7,JWs;(function(i){i.titleSeparator="window.titleSeparator",i.title="window.title"})(JWs||(JWs={}));var GWs=(()=>{if(Kt&&dl)return"${activeEditorShort}${separator}${rootName}${separator}${profileName}";const i="${dirty}${activeEditorShort}${separator}${rootName}${separator}${profileName}${separator}${appName}";return Ws?i+"${separator}${remoteName}":i})(),KWs=Kt?" \u2014 ":" - ",Pbt=class extends H{static{M7=this}static{this.a=d(Zs?3791:3792,null)}static{this.b=d(3793,null)}static{this.c="\u25CF "}get value(){return this.n??""}get workspaceName(){return this.z.getWorkspaceLabel(this.y.getWorkspace())}get fileName(){const e=this.r.activeEditor;if(!e)return;const t=e.getTitle(0);return`${e?.isDirty()&&!e.isSaving()?M7.c:""}${t}`}constructor(e,t,s,n,r,o,a,l,c,u,h){super(),this.t=s,this.u=n,this.w=o,this.y=a,this.z=l,this.C=c,this.F=u,this.G=h,this.f={isPure:!0,isAdmin:!1,prefix:void 0},this.g=new Map,this.h=this.D(new X),this.j=this.D(new Cn(()=>this.M(),0)),this.m=new $,this.onDidChange=this.m.event,this.q=!1,this.r=r.createScoped(t,this.B),this.s=e.vscodeWindowId,this.J(),this.H()}H(){this.D(this.t.onDidChangeConfiguration(e=>this.I(e))),this.D(this.r.onDidActiveEditorChange(()=>this.L())),this.D(this.y.onDidChangeWorkspaceFolders(()=>this.j.schedule())),this.D(this.y.onDidChangeWorkbenchState(()=>this.j.schedule())),this.D(this.y.onDidChangeWorkspaceName(()=>this.j.schedule())),this.D(this.z.onDidChangeFormatters(()=>this.j.schedule())),this.D(this.C.onDidChangeCurrentProfile(()=>this.j.schedule())),this.D(this.G.onDidChangeFocusedView(()=>{this.q&&this.j.schedule()})),this.D(this.u.onDidChangeContext(e=>{e.affectsSome(this.g)&&this.j.schedule()}))}I(e){e.affectsConfiguration("window.title")&&this.J(),(e.affectsConfiguration("window.title")||e.affectsConfiguration("window.titleSeparator"))&&this.j.schedule()}J(){const e=this.t.getValue("window.title");this.q=typeof e=="string"&&e.includes("${focusedView}")}L(){this.h.clear(),this.j.schedule();const e=this.r.activeEditor;if(e&&(this.h.add(e.onDidChangeDirty(()=>this.j.schedule())),this.h.add(e.onDidChangeLabel(()=>this.j.schedule()))),this.q){const t=this.r.activeTextEditorControl,s=[];$r(t)?s.push(t):Td(t)&&s.push(t.getOriginalEditor(),t.getModifiedEditor());for(const n of s)this.h.add(n.onDidBlurEditorText(()=>this.j.schedule())),this.h.add(n.onDidFocusEditorText(()=>this.j.schedule()))}}M(){const e=this.N();if(e!==this.n){let t=e;CO(t)||(t=this.F.nameLong);const s=Uk(this.s,!0).window;!s.document.title&&Kt&&t===this.F.nameLong&&(s.document.title=`${this.F.nameLong} ${M7.c}`),s.document.title=t,this.n=e,this.m.fire()}}N(){const{prefix:e,suffix:t}=this.getTitleDecorations();let s=this.getWindowTitle()||this.F.nameLong;return e&&(s=`${e} ${s}`),t&&(s=`${s} ${t}`),s.replace(/[^\S ]/g," ")}getTitleDecorations(){let e,t;return this.f.prefix&&(e=this.f.prefix),this.w.isExtensionDevelopment&&(e=e?`${M7.b} - ${e}`:M7.b),this.f.isAdmin&&(t=M7.a),{prefix:e,suffix:t}}updateProperties(e){const t=typeof e.isAdmin=="boolean"?e.isAdmin:this.f.isAdmin,s=typeof e.isPure=="boolean"?e.isPure:this.f.isPure,n=typeof e.prefix=="string"?e.prefix:this.f.prefix;(t!==this.f.isAdmin||s!==this.f.isPure||n!==this.f.prefix)&&(this.f.isAdmin=t,this.f.isPure=s,this.f.prefix=n,this.j.schedule())}registerVariables(e){let t=!1;for(const{name:s,contextKey:n}of e)this.g.has(n)||(this.g.set(n,s),t=!0);t&&this.j.schedule()}getWindowTitle(){const e=this.r.activeEditor,t=this.y.getWorkspace();let s;t.configuration?s=t.configuration:t.folders.length&&(s=t.folders[0].uri);const n=Wr.getOriginalUri(e,{supportSideBySide:Fr.PRIMARY});let r=n?sr(n):void 0;r?.path==="."&&(r=void 0);let o;this.y.getWorkbenchState()===2?o=t.folders[0]:n&&(o=this.y.getWorkspaceFolder(n)??void 0);let a;if(this.w.remoteAuthority&&!Ws)a=this.z.getHostLabel(ge.vscodeRemote,this.w.remoteAuthority);else{const P=b_(t);P&&(a=this.z.getHostLabel(P.scheme,P.authority))}const l=e?e.getTitle(0):"",c=e?e.getTitle(1):l,u=e?e.getTitle(2):c,h=r?Ui(r):"",f=r?this.z.getUriLabel(r,{relative:!0}):"",g=r?this.z.getUriLabel(r):"",p=this.z.getWorkspaceLabel(t),b=this.z.getWorkspaceLabel(t,{verbose:0}),v=s?this.z.getUriLabel(s):"",y=o?o.name:"",w=o?this.z.getUriLabel(o.uri):"",C=e?.isDirty()&&!e.isSaving()?M7.c:"",S=this.F.nameLong,x=this.C.currentProfile.isDefault?"":this.C.currentProfile.name,k=this.G.getFocusedViewName(),E={};for(const[P,N]of this.g)E[N]=this.u.getContextKeyValue(P)??"";let I=this.t.getValue("window.title");typeof I!="string"&&(I=GWs);let L=this.t.getValue("window.titleSeparator");return typeof L!="string"&&(L=KWs),c3i(I,{...E,activeEditorShort:l,activeEditorLong:u,activeEditorMedium:c,activeFolderShort:h,activeFolderMedium:f,activeFolderLong:g,rootName:p,rootPath:v,rootNameShort:b,folderName:y,folderPath:w,dirty:C,appName:S,remoteName:a,profileName:x,focusedView:k,separator:{label:L}})}isCustomTitleFormat(){const e=this.t.inspect("window.title"),t=this.t.inspect("window.titleSeparator");return e.value!==e.defaultValue||t.value!==t.defaultValue}};Pbt=M7=__decorate([__param(2,pe),__param(3,Le),__param(4,Ee),__param(5,Ob),__param(6,kt),__param(7,Hs),__param(8,Bl),__param(9,ds),__param(10,Bs)],Pbt),eD();var ria=console.log.bind(console);console.stdlog=console.log,console.log=function(){};var Nbt=De.as(Fn.Configuration);(function(){Nn(sct.ID,sct,4),Nn(vbe.ID,vbe,3),Nbt.registerConfiguration({...m1,properties:{"workbench.externalBrowser":{type:"string",markdownDescription:d(3836,null),included:dl,restricted:!0},"workbench.editor.titleScrollbarSizing":{type:"string",enum:["default","large"],enumDescriptions:[d(3837,null),d(3838,null)],description:d(3839,null),default:"default"},"workbench.editor.showTabs":{type:"string",enum:["multiple","single","none"],enumDescriptions:[d(3840,null),d(3841,null),d(3842,null)],description:d(3843,null),default:"multiple"},"workbench.editor.editorActionsLocation":{type:"string",enum:["default","titleBar","hidden"],markdownEnumDescriptions:[d(3844,null,"`#workbench.editor.showTabs#`","`none`"),d(3845,null,"`#window.customTitleBarVisibility#`","`never`"),d(3846,null)],markdownDescription:d(3847,null),default:"default"},"workbench.editor.alwaysShowEditorActions":{type:"boolean",markdownDescription:d(3848,null),default:!1},"workbench.editor.wrapTabs":{type:"boolean",markdownDescription:d(3849,null,"`#workbench.editor.showTabs#`","`multiple`"),default:!1},"workbench.editor.scrollToSwitchTabs":{type:"boolean",markdownDescription:d(3850,null,"`#workbench.editor.showTabs#`","`multiple`"),default:!1},"workbench.editor.highlightModifiedTabs":{type:"boolean",markdownDescription:d(3851,null,"`#workbench.editor.showTabs#`","multiple"),default:!1},"workbench.editor.decorations.badges":{type:"boolean",markdownDescription:d(3852,null),default:!0},"workbench.editor.decorations.colors":{type:"boolean",markdownDescription:d(3853,null),default:!0},[qQ.SETTING_ID_ENABLED]:{type:"boolean",markdownDescription:d(3854,null),default:!0},[qQ.SETTING_ID_PATTERNS]:{type:"object",markdownDescription:(()=>{let t=d(3855,null);return t+=`
